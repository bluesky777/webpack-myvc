{
  "version": 3,
  "file": "GradosCtrl.js",
  "sourceRoot": "",
  "sources": [
    "GradosCtrl.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "'use strict'\n\nangular.module('myvcFrontApp')\n.controller('GradosCtrl', ['$scope', '$filter', '$state', 'App', 'niveles', '$uibModal', 'toastr', '$http', ($scope, $filter, $state, App, niveles, $modal, toastr, $http) ->\n\n\n\t$scope.grados = {nivel: {}}\n\t$scope.gridScope = $scope # Para getExternalScopes de ui-Grid\n\n\t$scope.niveles = niveles\n\n\t$scope.editar = (row)->\n\t\t$state.go('panel.grados.editar', {grado_id: row.id})\n\n\t$scope.eliminar = (row)->\n\n\t\tmodalInstance = $modal.open({\n\t\t\ttemplateUrl: '==grados/removeGrado.tpl.html'\n\t\t\tcontroller: 'RemoveGradoCtrl'\n\t\t\tsize: 'sm',\n\t\t\tresolve: \n\t\t\t\tgrado: ()->\n\t\t\t\t\trow\n\t\t})\n\t\tmodalInstance.result.then( (grado)->\n\t\t\t$scope.grados = $filter('filter')($scope.grados, {id: '!'+grado.id})\n\t\t\t$scope.gridOptions.data = $scope.grados\n\t\t)\n\n\n\teditNivel = \"==grados/editCellNivel.tpl.html\"\n\n\tbtGrid1 = '<a uib-tooltip=\"Editar\" tooltip-placement=\"right\" class=\"btn btn-default btn-xs shiny icon-only info\" ng-click=\"grid.appScope.editar(row.entity)\"><i class=\"fa fa-edit \"></i></a>'\n\tbtGrid2 = '<a uib-tooltip=\"X Eliminar\" tooltip-placement=\"right\" class=\"btn btn-default btn-xs shiny icon-only danger\" ng-click=\"grid.appScope.eliminar(row.entity)\"><i class=\"fa fa-times \"></i></a>'\n\t$scope.gridOptions = \n\t\tshowGridFooter: true,\n\t\tenableSorting: true,\n\t\tenableFiltering: true,\n\t\tenebleGridColumnMenu: false,\n\t\tenableCellEditOnFocus: true,\n\t\tcolumnDefs: [\n\t\t\t{ name: 'edicion', displayName:'Edición', maxWidth: 50, enableSorting: false, enableFiltering: false, cellTemplate: btGrid1 + btGrid2, enableCellEdit: false}\n\t\t\t{ field: 'nombre', enableHiding: false }\n\t\t\t{ field: 'abrev', displayName:'abreviatura', maxWidth: 50, enableSorting: false }\n\t\t\t{ field: 'orden', type: 'number', maxWidth: 50 }\n\t\t\t{ field: 'nivel_educativo_id', displayName: 'Nivel Educativo', editDropdownOptionsArray: niveles, cellFilter: 'mapNivel:grid.appScope.niveles', editableCellTemplate: 'ui-grid/dropdownEditor', editDropdownIdLabel: 'id', editDropdownValueLabel: 'nombre' }\n\t\t\t{ name: 'nn', displayName: '', maxWidth: 20, enableSorting: false, enableFiltering: false }\n\t\t],\n\t\tmultiSelect: false,\n\t\t#filterOptions: $scope.filterOptions,\n\t\tonRegisterApi: ( gridApi ) ->\n\t\t\t$scope.gridApi = gridApi\n\n\t\t\tgridApi.edit.on.afterCellEdit($scope, (rowEntity, colDef, newValue, oldValue)->\n\t\t\t\t\n\t\t\t\tif newValue != oldValue\n\t\t\t\t\t$http.put('::grados/update/'+rowEntity.id, rowEntity).then((r)->\n\t\t\t\t\t\ttoastr.success 'Grado actualizado con éxito', 'Actualizado'\n\t\t\t\t\t, (r2)->\n\t\t\t\t\t\ttoastr.error 'Cambio no guardado', 'Error'\n\t\t\t\t\t)\n\t\t\t\t$scope.$apply()\n\t\t\t)\n\t\t\t\n\n\n\t$http.get('::grados').then((data)->\n\t\t$scope.grados = data.data\n\t\t$scope.gridOptions.data = $scope.grados;\n\t)\n\n\t$scope.$on 'gradocreado', (ev, grado)->\n\t\t$scope.grados.push grado\n\t\t$scope.gridOptions.data = $scope.grados;\n\n\n\treturn\n])\n\n.filter('mapNivel', ['$filter', ($filter)->\n\n\treturn (input, niveles)->\n\t\tif not input\n\t\t\treturn ''\n\t\telse\n\t\t\tniv = $filter('filter')(niveles, {id: input})[0]\n\t\t\treturn  niv.nombre\n])\n\n\n\n.controller('RemoveGradoCtrl', ['$scope', '$uibModalInstance', 'grado', '$http', 'toastr', ($scope, $modalInstance, grado, $http, toastr)->\n\t$scope.grado = grado\n\n\t$scope.ok = ()->\n\n\t\t$http.delete('::grados/destroy/'+grado.id).then((r)->\n\t\t\ttoastr.success 'Grado ' + r.nombre + ' eliminado con éxito', 'Eliminado'\n\t\t, (r)->\n\t\t\ttoastr.error 'No se pudo eliminar a '+row.nombre\n\t\t)\n\t\t$modalInstance.close(grado)\n\n\t$scope.cancel = ()->\n\t\t$modalInstance.dismiss('cancel')\n\n])"
  ]
}
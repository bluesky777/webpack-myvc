{
  "version": 3,
  "file": "VotacionesCtrl.js",
  "sourceRoot": "",
  "sources": [
    "VotacionesCtrl.coffee"
  ],
  "names": [],
  "mappings": "AAAA;EAAA;EAEA,OAAO,CAAC,MAAR,CAAe,cAAf,CAEA,CAAC,UAFD,CAEY,gBAFZ,EAE8B;IAAC,QAAD;IAAW,SAAX;IAAsB,OAAtB;IAA+B,eAA/B;IAAgD,KAAhD;IAAuD,QAAvD;IAAiE,QAAA,CAAC,MAAD;IAAS,OAAT;IAAkB,KAAlB;IAAyB,aAAzB;IAAwC,GAAxC;IAA6C,MAA7C,CAAA;AAG9F,UAAA,QAAA;IAAA,QAAA;IAAA,MAAA;IAAA,MAAA;IAAA,OAAA;IAAA,OAAA;IAAA,SAAA;IAAA;MAAA,MAAM,CAAC,IAAP,GAAc,CAAA,EAAd;MACA,MAAM,CAAC,OAAP,GAAiB;MACjB,MAAM,CAAC,SAAP,GAAmB,OAFnB;MAGA,MAAM,CAAC,YAAP,GAAsB,CAAA;MAEtB,MAAM,CAAC,QAAP,GAAkB;QACjB,MAAA,EAAQ,KADS;QAEjB,SAAA,EAAW,KAFM;QAGjB,YAAA,EAAc,EAHG;QAIjB,SAAA,EAAW,EAJM;QAKjB,YAAA,EAAc;UAAC;YAAC,UAAA,EAAY,EAAb;YAAiB,KAAA,EAAO;UAAxB,CAAD;;MALG;MAQlB,MAAM,CAAC,IAAP,GAAc;QAAC,WAAA,EAAa;UAAE,WAAA,EAAa;QAAf;MAAd;MAEd,MAAM,CAAC,aAAP,GAAuB,QAAA,CAAA,CAAA;eACtB,MAAM,CAAC,QAAQ,CAAC,YAAY,CAAC,IAA7B,CAAkC;UAAC,UAAA,EAAY,EAAb;UAAiB,KAAA,EAAO;QAAxB,CAAlC;MADsB;MAGvB,MAAM,CAAC,gBAAP,GAA0B,QAAA,CAAC,MAAD,CAAA;eACzB,MAAM,CAAC,QAAQ,CAAC,YAAY,CAAC,MAA7B,CAAoC,MAApC;IAA4C,CAA5C;MADyB;MAI1B,MAAM,CAAC,iBAAP,GAA2B,QAAA,CAAC,WAAD,CAAA;eAC1B,KAAK,CAAC,IAAN,CAAW,sBAAX;IAAmC;UAAC,WAAA,EAAa;QAAd,CAAnC,CAA8D,CAAC,IAA/D,CAAoE,QAAA,CAAC,CAAD,CAAA;UACnE,MAAM,CAAC,OAAP,CAAe,oBAAf;iBACA,MAAM,CAAC,YAAY,CAAC,YAAY,CAAC,IAAjC,CAAsC;YAAC,EAAA,EAAI,CAAC,CAAC,IAAI,CAAC,EAAZ;YAAgB,UAAA,EAAY,EAA5B;YAAgC,KAAA,EAAO;UAAvC,CAAtC;QAFmE,CAApE;IAGE,QAAA,CAAC,EAAD,CAAA;iBACD,MAAM,CAAC,KAAP,CAAa,8BAAb;QADC,CAHF;MAD0B;MAS3B,MAAM,CAAC,oBAAP,GAA8B,QAAA,CAAC,UAAD,CAAA;eAC7B,KAAK,CAAC,GAAN,CAAU,uBAAV;IAAmC,UAAnC,CAA8C,CAAC,IAA/C,CAAoD,QAAA,CAAC,CAAD,CAAA;iBACnD,MAAM,CAAC,OAAP,CAAe,wBAAf;QADmD,CAApD;IAEE,QAAA,CAAC,EAAD,CAAA;iBACD,MAAM,CAAC,KAAP,CAAa,kCAAb;QADC,CAFF;MAD6B;MAQ9B,MAAM,CAAC,oBAAP,GAA8B,QAAA,CAAC,UAAD,CAAA;eAC7B,KAAK,CAAC,MAAN,CAAa,yBAAA,GAA0B,UAAU,CAAC,EAAlD,CAAqD,CAAC,IAAtD,CAA2D,QAAA,CAAC,CAAD,CAAA;UAC1D,MAAM,CAAC,OAAP,CAAe,uBAAf;iBACA,MAAM,CAAC,YAAY,CAAC,YAApB,GAAoC,OAAA,CAAQ,QAAR,CAAA,CAAkB,MAAM,CAAC,YAAY,CAAC,YAAtC;IAAoD;YAAC,EAAA,EAAI,GAAA,GAAI,UAAU,CAAC;UAApB,CAApD;QAFsB,CAA3D;IAGE,QAAA,CAAC,EAAD,CAAA;iBACD,MAAM,CAAC,KAAP,CAAa,iCAAb;QADC,CAHF;MAD6B;MAU9B,MAAM,CAAC,MAAP,GAAgB,QAAA,CAAC,GAAD,CAAA;QACf,MAAM,CAAC,OAAP,GAAiB;eACjB,MAAM,CAAC,YAAP,GAAsB;MAFP;MAIhB,MAAM,CAAC,QAAP,GAAkB,QAAA,CAAC,GAAD,CAAA;eACjB,KAAK,CAAC,MAAN,CAAa,uBAAA,GAAwB,GAAG,CAAC,EAAzC,CAA4C,CAAC,IAA7C,CAAkD,QAAA,CAAC,CAAD,CAAA;iBACjD,MAAM,CAAC,WAAW,CAAC,IAAnB,GAA0B,OAAA,CAAQ,QAAR,CAAA,CAAkB,MAAM,CAAC,WAAW,CAAC,IAArC;IAA2C;YAAC,EAAA,EAAI,GAAA,GAAI,GAAG,CAAC;UAAb,CAA3C;QADuB,CAAlD;IAEE,QAAA,CAAC,EAAD,CAAA;iBACD,MAAM,CAAC,KAAP,CAAa,sBAAb;QADC,CAFF;MADiB;MAOlB,MAAM,CAAC,eAAP,GAAyB,QAAA,CAAC,GAAD,CAAA;eACxB,KAAK,CAAC,GAAN,CAAU,4BAAV;IAAwC;UAAC,EAAA,EAAI,GAAG,CAAC,EAAT;UAAa,SAAA,EAAW,GAAG,CAAC;QAA5B,CAAxC,CAA+E,CAAC,IAAhF,CAAqF,QAAA,CAAC,CAAD,CAAA;AACpF,cAAA,CAAA;IAAA,GAAA;IAAA,GAAA;IAAA;UAAA,IAAG,GAAG,CAAC,SAAP;AACC;YAAA,KAAA,qCAAA;;cACC,IAAG,GAAG,CAAC,EAAJ,KAAU,GAAG,CAAC,EAAjB;gBACC,GAAG,CAAC,SAAJ,GAAgB,MADjB;;YADD,CADD;WAAA,MAAA;YAKC,GAAG,CAAC,SAAJ,GAAgB,MALjB;;iBAOA,MAAM,CAAC,OAAP,CAAe,UAAf;QARoF,CAArF;IASE,QAAA,CAAC,EAAD,CAAA;iBACD,MAAM,CAAC,KAAP,CAAa,6BAAb;QADC,CATF;MADwB;MAezB,MAAM,CAAC,kBAAP,GAA4B,QAAA,CAAC,GAAD,CAAA;eAC3B,KAAK,CAAC,GAAN,CAAU,+BAAV;IAA2C;UAAC,EAAA,EAAI,GAAG,CAAC,EAAT;UAAa,YAAA,EAAc,GAAG,CAAC;QAA/B,CAA3C,CAAwF,CAAC,IAAzF,CAA8F,QAAA,CAAC,CAAD,CAAA;iBAC7F,MAAM,CAAC,OAAP,CAAe,UAAf;QAD6F,CAA9F;IAEE,QAAA,CAAC,EAAD,CAAA;iBACD,MAAM,CAAC,KAAP,CAAa,kCAAb;QADC,CAFF;MAD2B;MAO5B,MAAM,CAAC,sBAAP,GAAgC,QAAA,CAAC,GAAD,CAAA;eAC/B,KAAK,CAAC,GAAN,CAAU,mCAAV;IAA+C;UAAC,EAAA,EAAI,GAAG,CAAC,EAAT;UAAa,gBAAA,EAAkB,GAAG,CAAC;QAAnC,CAA/C,CAAoG,CAAC,IAArG,CAA0G,QAAA,CAAC,CAAD,CAAA;iBACzG,MAAM,CAAC,OAAP,CAAe,UAAf;QADyG,CAA1G;IAEE,QAAA,CAAC,EAAD,CAAA;iBACD,MAAM,CAAC,KAAP,CAAa,sCAAb;QADC,CAFF;MAD+B;MAOhC,MAAM,CAAC,aAAP,GAAuB,QAAA,CAAC,GAAD,CAAA;eACtB,KAAK,CAAC,GAAN,CAAU,yBAAV;IAAqC;UAAC,EAAA,EAAI,GAAG,CAAC,EAAT;UAAa,MAAA,EAAQ,GAAG,CAAC;QAAzB,CAArC,CAAsE,CAAC,IAAvE,CAA4E,QAAA,CAAC,CAAD,CAAA;iBAC3E,MAAM,CAAC,OAAP,CAAe,UAAf;QAD2E,CAA5E;IAEE,QAAA,CAAC,EAAD,CAAA;iBACD,MAAM,CAAC,KAAP,CAAa,6BAAb;QADC,CAFF;MADsB;MAOvB,MAAM,CAAC,wBAAP,GAAkC,QAAA,CAAC,GAAD,CAAA;eACjC,KAAK,CAAC,GAAN,CAAU,sCAAV;IAAkD;UAAC,EAAA,EAAI,GAAG,CAAC,EAAT;UAAa,eAAA,EAAiB,GAAG,CAAC;QAAlC,CAAlD,CAAqG,CAAC,IAAtG,CAA2G,QAAA,CAAC,CAAD,CAAA;iBAC1G,MAAM,CAAC,OAAP,CAAe,UAAf;QAD0G,CAA3G;IAEE,QAAA,CAAC,EAAD,CAAA;iBACD,MAAM,CAAC,KAAP,CAAa,gCAAb;QADC,CAFF;MADiC;MAOlC,MAAM,CAAC,mBAAP,GAA6B,QAAA,CAAC,GAAD,CAAA;eAC5B,KAAK,CAAC,GAAN,CAAU,yBAAV;IAAqC;UAAC,EAAA,EAAI,GAAG,CAAC,EAAT;UAAa,MAAA,EAAQ,GAAG,CAAC;QAAzB,CAArC,CAAsE,CAAC,IAAvE,CAA4E,QAAA,CAAC,CAAD,CAAA;AAC3E,cAAA,CAAA;IAAA,GAAA;IAAA,GAAA;IAAA;UAAA,IAAG,GAAG,CAAC,MAAP;AACC;YAAA,KAAA,qCAAA;;cACC,IAAG,GAAG,CAAC,EAAJ,KAAU,GAAG,CAAC,EAAjB;gBACC,GAAG,CAAC,MAAJ,GAAa,MADd;;YADD,CADD;WAAA,MAAA;YAKC,GAAG,CAAC,MAAJ,GAAa,MALd;;iBAOA,MAAM,CAAC,OAAP,CAAe,UAAf;QAR2E,CAA5E;IASE,QAAA,CAAC,EAAD,CAAA;iBACD,MAAM,CAAC,KAAP,CAAa,2BAAb;QADC,CATF;MAD4B;MAgB7B,OAAA,GAAU;MACV,OAAA,GAAU;MACV,QAAA,GAAW;MACX,MAAA,GAAS;MACT,QAAA,GAAW;MACX,MAAA,GAAS;MACT,QAAA,GAAW;MACX,SAAA,GAAY;MAEZ,MAAM,CAAC,WAAP,GACC;QAAA,aAAA,EAAe,IAAf;QACA,oBAAA,EAAsB,KADtB;QAEA,UAAA,EAAY;UACX;YAAE,IAAA,EAAM,IAAR;YAAc,WAAA,EAAY,IAA1B;YAAgC,KAAA,EAAO,EAAvC;YAA2C,eAAA,EAAiB,KAA5D;YAAmE,cAAA,EAAgB;UAAnF,CADW;UAEX;YAAE,IAAA,EAAM,SAAR;YAAmB,WAAA,EAAY,SAA/B;YAA0C,KAAA,EAAO,EAAjD;YAAqD,aAAA,EAAe,KAApE;YAA2E,eAAA,EAAiB,KAA5F;YAAmG,YAAA,EAAc,OAAA,GAAU,OAA3H;YAAoI,cAAA,EAAgB;UAApJ,CAFW;UAGX;YAAE,KAAA,EAAO,QAAT;YAAmB,YAAA,EAAc,KAAjC;YAAwC,QAAA,EAAU;UAAlD,CAHW;UAIX;YAAE,KAAA,EAAO,QAAT;YAAmB,WAAA,EAAa,WAAhC;YAA6C,YAAA,EAAc,MAA3D;YAAmE,QAAA,EAAU;UAA7E,CAJW;UAKX;YAAE,KAAA,EAAO,cAAT;YAAyB,WAAA,EAAa,cAAtC;YAAsD,QAAA,EAAU,EAAhE;YAAoE,YAAA,EAAc;UAAlF,CALW;UAMX;YAAE,KAAA,EAAO,kBAAT;YAA6B,WAAA,EAAa,kBAA1C;YAA8D,QAAA,EAAU,EAAxE;YAA4E,YAAA,EAAc;UAA1F,CANW;UAOX;YAAE,KAAA,EAAO,QAAT;YAAmB,WAAA,EAAa,QAAhC;YAA0C,YAAA,EAAc,QAAxD;YAAkE,QAAA,EAAU;UAA5E,CAPW;UAQX;YAAE,KAAA,EAAO,WAAT;YAAsB,WAAA,EAAa,WAAnC;YAAgD,YAAA,EAAc,QAA9D;YAAwE,QAAA,EAAU;UAAlF,CARW;UASX;YAAE,KAAA,EAAO,iBAAT;YAA4B,WAAA,EAAa,SAAzC;YAAoD,YAAA,EAAc,SAAlE;YAA6E,QAAA,EAAU;UAAvF,CATW;UAUX;YAAE,KAAA,EAAO,cAAT;YAAyB,WAAA,EAAY,QAArC;YAA+C,UAAA,EAAY,iBAA3D;YAA8E,IAAA,EAAM,MAApF;YAA4F,QAAA,EAAU;UAAtG,CAVW;UAWX;YAAE,KAAA,EAAO,WAAT;YAAsB,WAAA,EAAa,SAAnC;YAA8C,UAAA,EAAY,iBAA1D;YAA6E,IAAA,EAAM,MAAnF;YAA2F,QAAA,EAAU;UAArG,CAXW;SAFZ;QAeA,WAAA,EAAa;MAfb;MAiBD,IAAG,MAAM,CAAC,IAAI,CAAC,OAAZ,KAAuB,CAA1B;QACC,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,IAA9B,CAAmC;UAAE,IAAA,EAAM,SAAR;UAAmB,WAAA,EAAY,SAA/B;UAA0C,KAAA,EAAO,EAAjD;UAAqD,cAAA,EAAgB;QAArE,CAAnC,EADD;;MAGA,KAAK,CAAC,GAAN,CAAU,cAAV,CAAyB,CAAC,IAA1B,CAA+B,QAAA,CAAC,IAAD,CAAA;AAC9B,YAAA,CAAA;IAAA,GAAA;IAAA,GAAA;IAAA,OAAA;IAAA;QAAA,MAAM,CAAC,WAAW,CAAC,IAAnB,GAA0B,IAAI,CAAC;AAC/B;AAAA;QAAA,KAAA,qCAAA;;UACC,IAAG,GAAG,CAAC,MAAP;yBACC,YAAY,CAAC,eAAb,GAA+B,GAAG,CAAC,IADpC;WAAA,MAAA;iCAAA;;QADD,CAAA;;MAF8B,CAA/B;IAKE,QAAA,CAAC,EAAD,CAAA;eACD,MAAM,CAAC,KAAP,CAAa,6BAAb;MADC,CALF;MASA,MAAM,CAAC,KAAP,GAAe,QAAA,CAAA,CAAA;eACd,KAAK,CAAC,IAAN,CAAW,oBAAX;IAAiC,MAAM,CAAC,QAAxC,CAAiD,CAAC,IAAlD,CAAuD,QAAA,CAAC,CAAD,CAAA;UACtD,CAAA,GAAI,CAAC,CAAC;UACN,IAAG,CAAC,CAAC,MAAL;YACC,OAAO,CAAC,OAAR,CAAgB,MAAM,CAAC,WAAW,CAAC,IAAnC;IAAyC,QAAA,CAAC,KAAD;IAAQ,GAAR,CAAA;qBACxC,KAAK,CAAC,MAAN,GAAe;YADyB,CAAzC,EADD;;UAIA,MAAM,CAAC,QAAP,GAAkB,CAAA;iBAClB,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC,IAAxB,CAA6B,CAA7B;QAPsD,CAAvD;IASE,QAAA,CAAC,EAAD,CAAA;iBACD,MAAM,CAAC,KAAP,CAAa,2BAAb;QADC,CATF;MADc;MAcf,MAAM,CAAC,OAAP,GAAiB,QAAA,CAAA,CAAA;eAChB,KAAK,CAAC,IAAN,CAAW,sBAAA,GAAuB,MAAM,CAAC,YAAY,CAAC,EAAtD;IAA0D,MAAM,CAAC,YAAjE,CAA8E,CAAC,IAA/E,CAAoF,QAAA,CAAC,CAAD,CAAA;UACnF,MAAM,CAAC,OAAP,CAAe,+BAAf;iBACA,MAAM,CAAC,OAAP,GAAiB;QAFkE,CAApF;IAGE,QAAA,CAAC,EAAD,CAAA;iBACD,MAAM,CAAC,KAAP,CAAa,2BAAb;QADC,CAHF;MADgB;IA/K6E,CAAjE;GAF9B;AAFA",
  "sourcesContent": [
    "'use strict'\n\nangular.module(\"myvcFrontApp\")\n\n.controller('VotacionesCtrl', ['$scope', '$filter', '$http', 'resolved_user', 'App', 'toastr', ($scope, $filter, $http, resolved_user, App, toastr)->\n\n\n\t$scope.data = {} # Para el popup del Datapicker\n\t$scope.editing = false\n\t$scope.gridScope = $scope # Para getExternalScopes de ui-Grid\n\t$scope.votacionEdit = {}\n\n\t$scope.votacion = {\n\t\tlocked: false\n\t\tis_action: false\n\t\tfecha_inicio: ''\n\t\tfecha_fin: ''\n\t\taspiraciones: [{aspiracion: '', abrev: ''}]\n\t}\n\n\t$scope.date = {dateOptions: { startingDay: 1 } }\n\n\t$scope.addAspiracion = ()->\n\t\t$scope.votacion.aspiraciones.push {aspiracion: '', abrev: ''}\n\n\t$scope.removeAspiracion = (indice)->\n\t\t$scope.votacion.aspiraciones.splice indice, 1\n\n\n\t$scope.addAspiracionEdit = (votacion_id)->\n\t\t$http.post('::aspiraciones/store', {votacion_id: votacion_id}).then((r)->\n\t\t\ttoastr.success 'Aspiración creada.'\n\t\t\t$scope.votacionEdit.aspiraciones.push {id: r.data.id, aspiracion: '', abrev: ''}\n\t\t, (r2)->\n\t\t\ttoastr.error 'No se pudo crear aspiración.'\n\t\t)\n\n\n\t$scope.updateAspiracionEdit = (aspiracion)->\n\t\t$http.put('::aspiraciones/update', aspiracion).then((r)->\n\t\t\ttoastr.success 'Aspiración modificada.'\n\t\t, (r2)->\n\t\t\ttoastr.error 'No se pudo modificar aspiración.'\n\t\t)\n\n\n\t$scope.removeAspiracionEdit = (aspiracion)->\n\t\t$http.delete('::aspiraciones/destroy/'+aspiracion.id).then((r)->\n\t\t\ttoastr.success 'Aspiración eliminada.'\n\t\t\t$scope.votacionEdit.aspiraciones =  $filter('filter')($scope.votacionEdit.aspiraciones, {id: '!'+aspiracion.id})\n\t\t, (r2)->\n\t\t\ttoastr.error 'No se pudo eliminar aspiración.'\n\t\t)\n\n\n\n\t$scope.editar = (row)->\n\t\t$scope.editing = true\n\t\t$scope.votacionEdit = row\n\n\t$scope.eliminar = (row)->\n\t\t$http.delete('::votaciones/destroy/'+row.id).then((r)->\n\t\t\t$scope.gridOptions.data = $filter('filter')($scope.gridOptions.data, {id: '!'+row.id})\n\t\t, (r2)->\n\t\t\ttoastr.error 'No se pudo eliminar.'\n\t\t)\n\n\t$scope.cambiarInAction = (row)->\n\t\t$http.put('::votaciones/set-in-action', {id: row.id, in_action: row.in_action}).then((r)->\n\t\t\tif row.in_action\n\t\t\t\tfor vot in $scope.gridOptions.data\n\t\t\t\t\tif row.id != vot.id\n\t\t\t\t\t\tvot.in_action = false\n\t\t\telse\n\t\t\t\trow.in_action = false\n\n\t\t\ttoastr.success 'Cambiado'\n\t\t, (r2)->\n\t\t\ttoastr.error 'No se pudo poner en acción.'\n\t\t)\n\n\n\t$scope.cambiarVotanProfes = (row)->\n\t\t$http.put('::votaciones/set-votan-profes', {id: row.id, votan_profes: row.votan_profes}).then((r)->\n\t\t\ttoastr.success 'Cambiado'\n\t\t, (r2)->\n\t\t\ttoastr.error 'No se pudo cambiar votan profes.'\n\t\t)\n\n\t$scope.cambiarVotanAcudientes = (row)->\n\t\t$http.put('::votaciones/set-votan-acudientes', {id: row.id, votan_acudientes: row.votan_acudientes}).then((r)->\n\t\t\ttoastr.success 'Cambiado'\n\t\t, (r2)->\n\t\t\ttoastr.error 'No se pudo cambiar votan acudientes.'\n\t\t)\n\n\t$scope.cambiarLocked = (row)->\n\t\t$http.put('::votaciones/set-locked', {id: row.id, locked: row.locked}).then((r)->\n\t\t\ttoastr.success 'Cambiado'\n\t\t, (r2)->\n\t\t\ttoastr.error 'No se pudo cambiar bloqueo.'\n\t\t)\n\n\t$scope.cambiarPermisoVerResults = (row)->\n\t\t$http.put('::votaciones/set-permiso-ver-results', {id: row.id, can_see_results: row.can_see_results}).then((r)->\n\t\t\ttoastr.success 'Cambiado'\n\t\t, (r2)->\n\t\t\ttoastr.error 'No se pudo cambiar el permiso.'\n\t\t)\n\n\t$scope.cambiarEventoActual = (row)->\n\t\t$http.put('::votaciones/set-actual', {id: row.id, actual: row.actual}).then((r)->\n\t\t\tif row.actual\n\t\t\t\tfor vot in $scope.gridOptions.data\n\t\t\t\t\tif row.id != vot.id\n\t\t\t\t\t\tvot.actual = false\n\t\t\telse\n\t\t\t\trow.actual = false\n\n\t\t\ttoastr.success 'Cambiado'\n\t\t, (r2)->\n\t\t\ttoastr.error 'No se pudo volver actual.'\n\t\t)\n\n\n\n\tbtGrid1 = '<a uib-tooltip=\"Editar\" tooltip-placement=\"right\" class=\"btn btn-default btn-xs shiny icon-only info\" ng-click=\"grid.appScope.editar(row.entity)\"><i class=\"fa fa-edit \"></i></a>'\n\tbtGrid2 = '<a uib-tooltip=\"X Eliminar\" tooltip-placement=\"right\" class=\"btn btn-default btn-xs shiny icon-only danger\" ng-click=\"grid.appScope.eliminar(row.entity)\"><i class=\"fa fa-times \"></i></a>'\n\tbtActual = \"==votaciones/botonEventoActual.tpl.html\"\n\tbtBloq = \"==votaciones/botonEventoLocked.tpl.html\"\n\tbtProfes = \"==votaciones/botonVotanProfes.tpl.html\"\n\tbtAcud = \"==votaciones/botonVotanAcudientes.tpl.html\"\n\tbtAccion = \"==votaciones/botonEventoInAction.tpl.html\"\n\tbtPermiso = \"==votaciones/botonPermisoVerResults.tpl.html\"\n\n\t$scope.gridOptions =\n\t\tenableSorting: true,\n\t\tenebleGridColumnMenu: false,\n\t\tcolumnDefs: [\n\t\t\t{ name: 'id', displayName:'Id', width: 40, enableFiltering: false, enableCellEdit: false}\n\t\t\t{ name: 'edicion', displayName:'Edición', width: 50, enableSorting: false, enableFiltering: false, cellTemplate: btGrid1 + btGrid2, enableCellEdit: false}\n\t\t\t{ field: 'nombre', enableHiding: false, minWidth: 110 }\n\t\t\t{ field: 'locked', displayName: 'Bloqueado', cellTemplate: btBloq, minWidth: 80 }\n\t\t\t{ field: 'votan_profes', displayName: 'Profes votan', minWidth: 80, cellTemplate: btProfes }\n\t\t\t{ field: 'votan_acudientes', displayName: 'Acudientes votan', minWidth: 80, cellTemplate: btAcud }\n\t\t\t{ field: 'actual', displayName: 'Actual', cellTemplate: btActual, minWidth: 80}\n\t\t\t{ field: 'in_action', displayName: 'En acción', cellTemplate: btAccion, minWidth: 80 }\n\t\t\t{ field: 'can_see_results', displayName: 'Permiso', cellTemplate: btPermiso, minWidth: 80 }\n\t\t\t{ field: 'fecha_inicio', displayName:'Inicia', cellFilter: \"date:mediumDate\", type: 'date', minWidth: 80}\n\t\t\t{ field: 'fecha_fin', displayName: 'Termina', cellFilter: \"date:mediumDate\", type: 'date', minWidth: 80 }\n\t\t],\n\t\tmultiSelect: false,\n\n\tif $scope.USER.user_id == 1\n\t\t$scope.gridOptions.columnDefs.push({ name: 'user_id', displayName:'Creador', width: 40, enableCellEdit: false})\n\n\t$http.get('::votaciones').then((data)->\n\t\t$scope.gridOptions.data = data.data;\n\t\tfor vot in data.data\n\t\t\tif vot.actual\n\t\t\t\tlocalStorage.votacion_actual = vot.id\n\t, (r2)->\n\t\ttoastr.error 'Error trayendo los eventos.'\n\t)\n\n\t$scope.crear = ()->\n\t\t$http.post('::votaciones/store', $scope.votacion).then((r)->\n\t\t\tr = r.data\n\t\t\tif r.actual\n\t\t\t\tangular.forEach($scope.gridOptions.data, (value, key)->\n\t\t\t\t\tvalue.actual = 0\n\t\t\t\t)\n\t\t\t$scope.votacion = {}\n\t\t\t$scope.gridOptions.data.push r\n\n\t\t, (r2)->\n\t\t\ttoastr.error 'Falló al intentar guardar'\n\t\t)\n\n\t$scope.guardar = ()->\n\t\t$http.post('::votaciones/update/'+$scope.votacionEdit.id, $scope.votacionEdit).then((r)->\n\t\t\ttoastr.success 'Se hizo el put de la votación'\n\t\t\t$scope.editing = false\n\t\t, (r2)->\n\t\t\ttoastr.error 'Falló al intentar guardar'\n\t\t)\n\n\n\treturn\n])\n"
  ]
}
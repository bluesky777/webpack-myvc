{
  "version": 3,
  "file": "ParticipantesCtrl.js",
  "sourceRoot": "",
  "sources": [
    "ParticipantesCtrl.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "'use strict'\n\nangular.module(\"myvcFrontApp\")\n\n.controller('ParticipantesCtrl', ['$scope', '$filter', '$http', 'toastr', 'Acentos', ($scope, $filter, $http, toastr, Acentos)->\n\n    $scope.participantes\t= []\n    $scope.dato\t= {grupo: ''}\n    $scope.gridOptions \t\t= {}\n\n\n    $scope.votacion = {\n        locked: false\n        is_action: false\n        fecha_inicio: ''\n        fecha_fin: ''\n    }\n\n    envio = {}\n\n    if localStorage.votacion_actual\n        envio.votacion_id = localStorage.votacion_actual\n\n    $http.put('::participantes/datos', envio).then((data)->\n        data = data.data\n        $scope.grupos \t\t\t= data.grupos;\n        $scope.votacion \t\t= data.votacion;\n        matr_grupo = 0\n\n        if localStorage.matr_grupo\n            matr_grupo = parseInt(localStorage.matr_grupo)\n\n        for grupo in $scope.grupos\n            if parseInt(grupo.id) == parseInt(matr_grupo)\n                $scope.dato.grupo = grupo\n                $scope.selectGrupo($scope.dato.grupo)\n\n\n    , (r2)->\n        toastr.warning 'AsegÃºrate de tener al menos un evento como actual.'\n    )\n\n\n\n    $scope.traerProfesores = ()->\n        delete localStorage.matr_grupo\n\n        $http.put('::participantes/profesores', {votacion_id: $scope.votacion.id}).then((r)->\n            \n            for parti in r.data.participantes\n                for aspir in parti.aspiraciones\n                    for voto in aspir.votos\n                        voto.created_at = new Date(voto.created_at.replace(/-/g, '\\/'))\n        \n            $scope.participantes = r.data.participantes\n            $scope.gridOptions.data = r.data.participantes\n        , (r2)->\n            toastr.error 'Error al traer participantes.'\n        )\n\n\n\n    $scope.selectGrupo = (grupo)->\n        localStorage.matr_grupo = grupo.id\n        $scope.dato.grupo \t\t= grupo\n\n        for grup in $scope.grupos\n            grup.active = false\n\n        grupo.active = true\n    \n        $http.put('::participantes/votantes', {grupo_id: grupo.id, votacion_id: $scope.votacion.id}).then((r)->\n            \n            for parti in r.data.participantes\n                for aspir in parti.aspiraciones\n                    for voto in aspir.votos\n                        voto.created_at = new Date(voto.created_at.replace(/-/g, '\\/'))\n        \n            $scope.participantes = r.data.participantes\n            $scope.gridOptions.data = r.data.participantes\n        , (r2)->\n            toastr.error 'Error al traer participantes.'\n        )\n\n\n\n    $scope.guardarInscripciones = ()->\n        $scope.guardando_inscrip = true\n        $http.put('::participantes/guardar-inscripciones', {grupos: $scope.grupos}).then((r)->\n            toastr.success 'Inscripciones guardadas.'\n            $scope.guardando_inscrip = false\n        , (r2)->\n            toastr.error 'Error al intentar guardar Inscripciones.'\n            $scope.guardando_inscrip = false\n        )\n\n\n    btUsuario       = \"==directives/botonesResetPassword.tpl.html\"\n    btEditUsername  = \"==alumnos/botonEditUsername.tpl.html\"\n    btEditEPS       = \"==alumnos/botonEditEps.tpl.html\"\n    btVotos         = \"==alumnos/botonVotos.tpl.html\"\n    appendPopover1 = \"'==alumnos/popoverAlumnoGrid.tpl.html'\"\n    appendPopover2 = \"'mouseenter'\"\n    append3 = \"' '\"\n    appendPopover = 'uib-popover-template=\"views+' + appendPopover1 + '\" popover-trigger=\"'+appendPopover2+'\" popover-title=\"{{ row.entity.nombres + ' + append3 + ' + row.entity.apellidos }}\" popover-popup-delay=\"500\" popover-append-to-body=\"true\"'\n\n\n\n    $scope.gridOptions =\n        showGridFooter: true,\n        showColumnFooter: true,\n        showFooter: true,\n        enableSorting: true,\n        enableFiltering: true,\n        enebleGridColumnMenu: false,\n        columnDefs: [\n            { field: 'no', pinnedLeft:true, cellTemplate: '<div class=\"ui-grid-cell-contents\">{{grid.renderContainers.body.visibleRowCache.indexOf(row) + 1}}</div>', width: 40, enableCellEdit: false }\n            { field: 'nombres', minWidth: 130, pinnedLeft:true,\n            filter: {\n                condition: Acentos.buscarEnGrid\n            }\n            enableHiding: false, cellTemplate: '<div class=\"ui-grid-cell-contents\" style=\"padding: 0px;\" ' + appendPopover + '><img ng-src=\"{{grid.appScope.perfilPath + row.entity.foto_nombre}}\" style=\"width: 35px\" />{{row.entity.nombres}}</div>' }\n            { field: 'apellidos', minWidth: 110, filter: { condition: Acentos.buscarEnGrid }}\n            { name: 'Votos', cellTemplate: btVotos, minWidth: 200 }\n            { field: 'sexo', displayName: 'Sex', width: 40 }\n            { field: 'username', filter: { condition: Acentos.buscarEnGrid }, displayName: 'Usuario', cellTemplate: btUsuario, editableCellTemplate: btEditUsername, minWidth: 135 }\n            { field: 'documento', minWidth: 100, cellFilter: 'formatNumberDocumento' }\n            { field: 'celular', displayName: 'Celular', minWidth: 80 }\n        ],\n        multiSelect: false,\n\n\n    return\n])\n"
  ]
}
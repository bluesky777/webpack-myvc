{
  "version": 3,
  "file": "votarPanelDir.js",
  "sourceRoot": "",
  "sources": [
    "votarPanelDir.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "angular.module('myvcFrontApp')\n\n.directive('votarPanelDir',['App', 'Perfil', '$http', (App, Perfil, $http)->\n\n\trestrict: 'EA'\n\ttemplateUrl: \"==votaciones/votarPanel.tpl.html\"\n\tscope:\n\t\tvotacion: \"=\"\n\n\n\tcontroller: ($scope, App, toastr, $window, $uibModal)->\n\n\t\t$scope.USER = Perfil.User()\n\n\t\t$scope.hover = false\n\t\t$scope.maxi = false\n\t\t$scope.windowHeight = $($window).height()-100\n\t\t$scope.wzStep = 0\n\n\n\n\t\t$scope.currentImg = 'default_male.jpg'\n\t\t$scope.imagesPath = App.images + 'perfil/'\n\n\n\t\t# Maximizo esta votación si es la actual para votar\n\t\tif $scope.$parent.$index == $scope.$parent.indexVotando\n\t\t\t$scope.maxi = true\n\n\n\t\t$scope.$on 'terminaVotacion', (evento, indexVotando)->\n\t\t\tif $scope.$parent.$index == indexVotando\n\t\t\t\t$scope.maxi = true\n\n\n\t\t# Si ya hizo todos los votos en esta votación\n\t\tif $scope.votacion.completos\n\t\t\t$scope.wzStep = $scope.votacion.aspiraciones.length\n\n\n\n\t\t$scope.mostrarImagen = (candidato)->\n\t\t\tcandidato.iluminado = true\n\t\t\t$scope.currentImg = candidato.foto_nombre\n\n\t\t$scope.ocultarImagen = (candidato)->\n\t\t\tcandidato.iluminado = false\n\n\t\t$scope.nextAspiracion = ()->\n\t\t\t$scope.wzStep += 1 if $scope.wzStep < ($scope.votacion.aspiraciones.length)\n\n\t\t$scope.prevAspiracion = ()->\n\t\t\t$scope.wzStep -= 1 if $scope.wzStep > 0\n\n\t\t$scope.goAspiracion = (num)->\n\t\t\t$scope.wzStep = parseInt $scope.wzStep\n\t\t\tnum = parseInt(num)\n\n\t\t\t$scope.wzStep = num if num < $scope.wzStep\n\n\n\t\t$scope.open = (candidato, aspiracion)->\n\n\t\t\tif $scope.votacion.locked\n\t\t\t\ttoastr.warning 'La votación está bloqueada.'\n\t\t\t\treturn\n\t\t\telse if $scope.votacion.locked_votacion\n\t\t\t\ttoastr.warning 'Usted está bloqueado en esta votación.'\n\t\t\t\treturn\n\t\t\telse\n\t\t\t\tmodalInstance = $uibModal.open({\n\t\t\t\t\ttemplateUrl: '==votaciones/chooseCandidato.tpl.html'\n\t\t\t\t\tcontroller: 'chooseCandidatoCtrl'\n\t\t\t\t\tresolve:\n\t\t\t\t\t\tcandidato: ()->\n\t\t\t\t\t\t\tcandidato\n\t\t\t\t\t\taspiracion: ()->\n\t\t\t\t\t\t\taspiracion\n\t\t\t\t\t\tvotacion_id: ()->\n\t\t\t\t\t\t\t$scope.votacion.id\n\n\t\t\t\t})\n\t\t\t\tmodalInstance.result.then( (selectedItem)->\n\t\t\t\t\t#aspiracion.votado = selectedItem\n\t\t\t\t\taspiracion.votado = true\n\n\t\t\t\t\tcantVot = 0\n\t\t\t\t\tfor aspi in $scope.votacion.aspiraciones\n\t\t\t\t\t\tif aspi.votado\n\t\t\t\t\t\t\tcantVot++\n\n\t\t\t\t\tif $scope.votacion.aspiraciones.length == cantVot\n\t\t\t\t\t\t$scope.$emit 'termineDeVotar'\n\t\t\t\t\t\t$scope.maxi = false\n\t\t\t\t\t\ttoastr.info 'Ahora continúa con la siguiente votación.'\n\n\t\t\t\t\t$scope.nextAspiracion()\n\t\t\t\t, ()->\n\t\t\t\t\t#console.log 'Modal dismissed at: ' + new Date()\n\t\t\t\t)\n\n\n\t\treturn\n\n\n\n])\n\n\n\n\n\n\n"
  ]
}
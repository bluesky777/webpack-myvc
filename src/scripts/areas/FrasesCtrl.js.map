{
  "version": 3,
  "file": "FrasesCtrl.js",
  "sourceRoot": "",
  "sources": [
    "FrasesCtrl.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "angular.module(\"myvcFrontApp\")\n\n.controller('FrasesCtrl', ['$scope', 'toastr', '$filter', '$http', '$uibModal', 'App', 'AuthService', ($scope, toastr, $filter, $http, $modal, App, AuthService)->\n\n\tAuthService.verificar_acceso()\n\n\t$scope.currentFrase = {}\n\t$scope.currentFraseEdit = {}\n\t$scope.creando = false\n\t$scope.gridScope = $scope # Para getExternalScopes de ui-Grid\n\n\t$scope.tipos = [\n\t\t{tipo_frase:\t'Debilidad'}\n\t\t{tipo_frase:\t'Amenaza'}\n\t\t{tipo_frase:\t'Oportunidad'}\n\t\t{tipo_frase:\t'Fortaleza'}\n\t]\n\n\t$scope.currentFrase.tipo_frase = \n\t\ttipo_frase: 'Fortaleza'\n\n\t$scope.cancelarCrear = ()->\n\t\t$scope.creando = false\n\n\t$scope.crear = ()->\n\t\t$http.post('::frases/store', $scope.currentFrase).then((r)->\n\t\t\t$scope.gridOptions.data.push r.data\n\t\t\t$scope.currentFrase.frase = ''\n\t\t\t$scope.cancelarCrear()\n\t\t\ttoastr.success 'Frase creada con éxito'\n\t\t, (r2)->\n\t\t\ttoastr.error 'Error creando', 'Problema'\n\t\t)\n\n\t$scope.guardar = ()->\n\t\t$http.put('::frases/update/'+$scope.currentFraseEdit.id, $scope.currentFraseEdit).then((r)->\n\t\t\t$scope.currentFraseEdit.frase = r.data.frase # Para actualizar el grid\n\t\t\ttoastr.success 'Frase actualizada con éxito'\n\t\t, (r2)->\n\t\t\ttoastr.error 'Error guardando', 'Problema'\n\t\t)\n\n\t$scope.eliminar = (row)->\n\n\t\tmodalInstance = $modal.open({\n\t\t\ttemplateUrl: App.views + 'areas/removeFrase.tpl.html'\n\t\t\tcontroller: 'RemoveFraseCtrl'\n\t\t\tresolve: \n\t\t\t\tfrase: ()->\n\t\t\t\t\trow\n\t\t})\n\t\tmodalInstance.result.then( (frase)->\n\t\t\t$scope.gridOptions.data = $filter('filter')($scope.gridOptions.data, {id: '!'+frase.id})\n\t\t)\n\n\tbtGrid1 = '<a uib-tooltip=\"Editar\" tooltip-placement=\"right\" class=\"btn btn-default btn-xs shiny icon-only info\" ng-click=\"grid.appScope.editar(row.entity)\"><i class=\"fa fa-edit \"></i></a>'\n\tbtGrid2 = '<a uib-tooltip=\"X Eliminar\" tooltip-placement=\"right\" class=\"btn btn-default btn-xs shiny icon-only danger\" ng-click=\"grid.appScope.eliminar(row.entity)\"><i class=\"fa fa-trash \"></i></a>'\n\t$scope.gridOptions = \n\t\tenableSorting: true,\n\t\tenableFiltering: true,\n\t\tenebleGridColumnMenu: false,\n\t\tenableCellEditOnFocus: true,\n\t\tcolumnDefs: [\n\t\t\t{ field: 'id', type: 'number', width: 70, enableCellEdit: false }\n\t\t\t{ name: 'edicion', displayName:'Edición', width: 60, enableSorting: false, enableFiltering: false, cellTemplate: btGrid2, enableCellEdit: false}\n\t\t\t{ field: 'tipo_frase', displayName:'Tipo', width: 90, enableCellEdit: false }\n\t\t\t{ field: 'frase', displayName:'Frase', minWidth: 300 }\n\t\t],\n\t\tmultiSelect: false,\n\t\t#filterOptions: $scope.filterOptions,\n\t\tonRegisterApi: ( gridApi ) ->\n\t\t\t$scope.gridApi = gridApi\n\t\t\tgridApi.edit.on.afterCellEdit($scope, (rowEntity, colDef, newValue, oldValue)->\n\t\t\t\t\n\t\t\t\tif newValue != oldValue\n\t\t\t\t\t$scope.currentFraseEdit = rowEntity\n\t\t\t\t\t$scope.guardar()\n\t\t\t\t$scope.$apply()\n\t\t\t)\n\n\t\n\n\t$http.get('::frases').then((data)->\n\t\t$scope.gridOptions.data = data.data\n\t)\n\n])\n\n.controller('RemoveFraseCtrl', ['$scope', '$uibModalInstance', 'frase', '$http', 'toastr', ($scope, $modalInstance, frase, $http, toastr)->\n\t$scope.frase = frase\n\n\t$scope.ok = ()->\n\n\t\t$http.delete('::frases/destroy/'+frase.id).then((r)->\n\t\t\ttoastr.success 'frase \"'+frase.frase+'\" eliminada con éxito.', 'Eliminada'\n\t\t, (r2)->\n\t\t\ttoastr.warning 'Problema', 'No se pudo eliminar la frase.'\n\t\t)\n\t\t$modalInstance.close(frase)\n\n\t$scope.cancel = ()->\n\t\t$modalInstance.dismiss('cancel')\n\n])\n\n"
  ]
}
{
  "version": 3,
  "file": "AreasCtrl.js",
  "sourceRoot": "",
  "sources": [
    "AreasCtrl.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "angular.module(\"myvcFrontApp\")\n\n.controller('AreasCtrl', ['$scope', 'toastr', '$filter', '$http', '$uibModal', ($scope, toastr, $filter, $http, $uibModal)->\n\n\t$scope.creando = false\n\t$scope.editando = false\n\t$scope.currentArea = {}\n\t$scope.currenAreaEdit = {}\n\n\t$scope.gridScope = $scope # Para getExternalScopes de ui-Grid\n\n\t$scope.cancelarCrear = ()->\n\t\t$scope.creando = false\n\n\t$scope.cancelarEdit = ()->\n\t\t$scope.editando = false\n\n\t$scope.crear = ()->\n\t\t$http.post('::areas', $scope.currentArea).then((r)->\n\t\t\t$scope.gridOptions.data.push r.data\n\t\t\tdelete $scope.currentArea\n\t\t\ttoastr.success 'Area creada con éxito'\n\t\t, (r2)->\n\t\t\ttoastr.error 'Error creando', 'Problema'\n\t\t)\n\n\t$scope.guardar = ()->\n\t\t$http.put('::areas/update/'+$scope.currentAreaEdit.id, $scope.currentAreaEdit).then((r)->\n\t\t\tdelete $scope.currentAreaEdit\n\t\t\ttoastr.success 'Area actualizada con éxito'\n\t\t\t$scope.cancelarEdit()\n\t\t, (r2)->\n\t\t\ttoastr.error 'Error guardando', 'Problema'\n\t\t)\n\n\t$scope.editar = (row)->\n\t\t$scope.currentAreaEdit = row\n\t\t$scope.editando = true\n\n\t$scope.eliminar = (row)->\n\n\t\tmodalInstance = $uibModal.open({\n\t\t\ttemplateUrl: '==areas/removeArea.tpl.html'\n\t\t\tcontroller: 'RemoveAreaCtrl'\n\t\t\tresolve: \n\t\t\t\tarea: ()->\n\t\t\t\t\trow\n\t\t})\n\t\tmodalInstance.result.then( (area)->\n\t\t\t$scope.gridOptions.data = $filter('filter')($scope.areas, {id: '!'+area.id})\n\t\t)\n\n\tbtGrid1 = '<a uib-tooltip=\"Editar\" tooltip-placement=\"right\" class=\"btn btn-default btn-xs shiny icon-only info\" ng-click=\"grid.appScope.editar(row.entity)\"><i class=\"fa fa-edit \"></i></a>'\n\tbtGrid2 = '<a uib-tooltip=\"X Eliminar\" tooltip-placement=\"right\" class=\"btn btn-default btn-xs shiny icon-only danger\" ng-click=\"grid.appScope.eliminar(row.entity)\"><i class=\"fa fa-times \"></i></a>'\n\t$scope.gridOptions = \n\t\tshowGridFooter: true,\n\t\tenableSorting: true,\n\t\tenableFiltering: true,\n\t\tenebleGridColumnMenu: false,\n\t\tenableCellEditOnFocus: true,\n\t\tcolumnDefs: [\n\t\t\t{ field: 'id', type: 'number', maxWidth: 50, enableFiltering: false }\n\t\t\t{ name: 'edicion', displayName:'Edición', maxWidth: 50, enableSorting: false, enableFiltering: false, cellTemplate: btGrid1 + btGrid2, enableCellEdit: false}\n\t\t\t{ field: 'orden', type: 'number', maxWidth: 40, enableSorting: false }\n\t\t\t{ field: 'nombre', enableHiding: false }\n\t\t\t{ field: 'alias', displayName:'Alias' }\n\t\t],\n\t\tmultiSelect: false,\n\t\t#filterOptions: $scope.filterOptions,\n\t\tonRegisterApi: ( gridApi ) ->\n\t\t\t$scope.gridApi = gridApi\n\t\t\tgridApi.edit.on.afterCellEdit($scope, (rowEntity, colDef, newValue, oldValue)->\n\t\t\t\t\n\t\t\t\tif newValue != oldValue\n\t\t\t\t\t$scope.currentAreaEdit = rowEntity\n\t\t\t\t\t$scope.guardar()\n\t\t\t\t$scope.$apply()\n\t\t\t)\n\n\t\n\n\t$http.get('::areas').then((data)->\n\t\t$scope.areas = data.data\n\t\t$scope.gridOptions.data = $scope.areas\n\t)\n])\n\n.controller('RemoveAreaCtrl', ['$scope', '$uibModalInstance', 'area', '$http', 'toastr', ($scope, $modalInstance, area, $http, toastr)->\n\t$scope.area = area\n\n\t$scope.ok = ()->\n\n\t\t$http.delete('::areas/destroy/'+area.id).then((r)->\n\t\t\ttoastr.success 'Grupo eliminado: '+area.nombre, 'Eliminado'\n\t\t, (r2)->\n\t\t\ttoastr.warning 'Problema', 'No se pudo eliminar el area.'\n\t\t)\n\t\t$modalInstance.close(area)\n\n\t$scope.cancel = ()->\n\t\t$modalInstance.dismiss('cancel')\n\n])"
  ]
}
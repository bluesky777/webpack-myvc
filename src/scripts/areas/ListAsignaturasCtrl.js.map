{
  "version": 3,
  "file": "ListAsignaturasCtrl.js",
  "sourceRoot": "",
  "sources": [
    "ListAsignaturasCtrl.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "angular.module('myvcFrontApp')\n.controller 'ListAsignaturasCtrl', ['$scope', '$http', 'toastr', '$state', '$cookies', '$rootScope', 'AuthService', 'App', 'resolved_user', '$filter', '$uibModal', ($scope, $http, toastr, $state, $cookies, $rootScope, AuthService, App, resolved_user, $filter, $modal) ->\n\n\t#$scope.$parent.bigLoader \t= true\n\n\t$scope.UNIDAD = $scope.USER.unidad_displayname\n\t$scope.GENERO_UNI = $scope.USER.genero_unidad\n\t$scope.SUBUNIDAD = $scope.USER.subunidad_displayname\n\t$scope.GENERO_SUB = $scope.USER.genero_subunidad\n\t$scope.UNIDADES = $scope.USER.unidades_displayname\n\t$scope.SUBUNIDADES = $scope.USER.subunidades_displayname\n\t$scope.hasRoleOrPerm = AuthService.hasRoleOrPerm\n\t$scope.dato = { }\n\n\t$scope.views = App.views + 'areas/' # La uso en jade\n\n\t$scope.mes = new Date().getMonth();\n\n\t$scope.profesor = {}\n\n\tif $state.params.profesor_id\n\n\t\t$scope.profesor_id = $state.params.profesor_id\n\n\t\t$http.get('::asignaturas/listasignaturas/'+$state.params.profesor_id).then((r)->\n\t\t\t$scope.asignaturas            = r.data.asignaturas\n\t\t\t$scope.profesor               = r.data.info_profesor\n\t\t\t$scope.gruposcomportamientos  = r.data.grados_comp\n\t\t\t$scope.grupos                 = r.data.grupos\n\t\t\t$scope.pedidos                = r.data.pedidos\n\t\t\t$scope.materias               = r.data.materias\n\t\t\t#$scope.$parent.bigLoader \t= false\n\n\t\t, (r2)->\n\t\t\ttoastr.error 'No se pudo traer las asignaturas'\n\t\t\t#$scope.$parent.bigLoader \t= false\n\t\t)\n\n\n\telse\n\n\t\t$http.get('::asignaturas/listasignaturas').then((r)->\n\t\t\t$scope.asignaturas \t\t\t\t    = r.data.asignaturas\n\t\t\t$scope.gruposcomportamientos \t= r.data.grados_comp\n\t\t\t$scope.grupos                 = r.data.grupos\n\t\t\t$scope.pedidos                = r.data.pedidos\n\t\t\t$scope.materias               = r.data.materias\n\n\n\t\t\tfor pedido in $scope.pedidos\n\t\t\t\tif pedido.materia_to_add_accepted == 1 or pedido.asignatura_to_remove_accepted == 1\n\t\t\t\t\tpedido.estado = ':: APROBADO ::  '\n\t\t\t\tif pedido.materia_to_add_accepted == 0 or pedido.asignatura_to_remove_accepted == 0\n\t\t\t\t\tpedido.estado = ':: RECHAZADO ::  '\n\n\n\t\t\t#$scope.$parent.bigLoader \t\t= false\n\t\t, (r2)->\n\t\t\ttoastr.error 'No se pudo traer tus asignaturas'\n\t\t\t#$scope.$parent.bigLoader \t= false\n\t\t)\n\n\n\n\n\t$scope.irAComportamiento = (grupo)->\n\t\tif $state.params.profesor_id\n\t\t\tlocalStorage.profesor_id = $state.params.profesor_id\n\t\telse\n\t\t\tlocalStorage.profesor_id = $scope.USER.persona_id\n\t\t$state.go('panel.comportamiento', {grupo_id: grupo.id})\n\n\n\n\n\t$scope.solicitarMateria = ()->\n\t\tif !$scope.dato.grupo\n\t\t\ttoastr.warning 'Debes seleccionar un grupo.'\n\t\t\treturn\n\n\t\tif !$scope.dato.materia\n\t\t\ttoastr.warning 'Debes seleccionar una materia.'\n\t\t\treturn\n\n\t\tif !$scope.dato.creditos > 0\n\t\t\ttoastr.warning 'Debes asignar la intensidad horaria.'\n\t\t\treturn\n\n\t\t$http.put('::ChangesAskedAssignment/solicitar-materia', { grupo_id: $scope.dato.grupo.id, materia_id: $scope.dato.materia.id, creditos: $scope.dato.creditos }).then((r)->\n\t\t\t$scope.pedidos.push r.data.pedido\n\t\t\ttoastr.success 'Materia solicitada. Un administrador lo revisará.'\n\t\t, (r2)->\n\t\t\ttoastr.error 'No se pudo solicitar materia'\n\t\t\t#$scope.$parent.bigLoader \t= false\n\t\t)\n\n\n\t$scope.quitarSolicitud = (pedido)->\n\n\t\t$http.put('::ChangesAsked/destruir-pedido-asignatura', { asked_id: pedido.asked_id, assignment_id: pedido.assignment_id }).then((r)->\n\t\t\t$scope.pedidos = $filter('filter')($scope.pedidos, {asked_id: '!'+pedido.asked_id})\n\t\t\ttoastr.success 'Solicitada eliminada'\n\t\t, (r2)->\n\t\t\ttoastr.error 'No se pudo solicitar materia'\n\t\t\t#$scope.$parent.bigLoader \t= false\n\t\t)\n\n\n\t$scope.noEsMia = (asignatura)->\n\n\t\tfor pedido in $scope.pedidos\n\t\t\tif pedido.asignatura_to_remove_id==asignatura.asignatura_id and !pedido.asignatura_to_remove_accepted\n\t\t\t\ttoastr.info 'Ya has hecho esta solicitud'\n\t\t\t\treturn\n\n\t\tmodalInstance = $modal.open({\n\t\t\ttemplateUrl: '==areas/asignaturaNoEsMia.tpl.html'\n\t\t\tcontroller: 'AsignaturaNoEsMiaCtrl'\n\t\t\tresolve:\n\t\t\t\tasignatura: ()->\n\t\t\t\t\tasignatura\n\t\t})\n\t\tmodalInstance.result.then( (r)->\n\t\t\ttoastr.success 'Has solicitado remoción de asignatura.'\n\t\t\t$scope.pedidos.push r.pedido\n\t\t)\n\n\n\t$scope.irDefinitivas = (asignatura)->\n\t\tlocalStorage.asignatura_id_def  = asignatura.asignatura_id\n\t\t$state.go('panel.definitivas_periodos', {profesor_id: $state.params.profesor_id})\n\n\n\n\n\t$scope.open = (asignatura)->\n\t\t$state.go 'panel.unidades', {asignatura_id: asignatura.asignatura_id}\n\n\n]\n\n\n\n\n.controller('AsignaturaNoEsMiaCtrl', ['$scope', '$uibModalInstance', 'asignatura', '$http', 'toastr', 'App', ($scope, $modalInstance, asignatura, $http, toastr, App)->\n\n\t$scope.asignatura = asignatura\n\n\t$scope.ok = ()->\n\n\t\tdatos = { asignatura_id: asignatura.asignatura_id }\n\n\t\t$http.put('::ChangesAskedAssignment/pedir-quitar-asignatura', datos).then((r)->\n\t\t\t$modalInstance.close(r.data)\n\t\t, (r2)->\n\t\t\ttoastr.error 'Problema', 'No se pudo hacer solicitud.'\n\t\t)\n\n\n\t$scope.cancel = ()->\n\t\t$modalInstance.dismiss('cancel')\n\n])\n\n\n"
  ]
}
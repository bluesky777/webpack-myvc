{
  "version": 3,
  "file": "PapeleraCtrl.js",
  "sourceRoot": "",
  "sources": [
    "PapeleraCtrl.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "angular.module(\"myvcFrontApp\")\n\n.controller('PapeleraCtrl', ['$scope', 'App', '$state', '$http', '$uibModal', '$filter', 'toastr', ($scope, App, $state, $http, $modal, $filter, toastr)->\n\n\t$scope.restaurarAlum = (alum)->\n\t\t\n\t\t$http.put('::alumnos/restore/'+alum.alumno_id).then(()->\n\t\t\t$scope.gridAlumnos.data = $filter('filter')($scope.gridAlumnos.data, {alumno_id: '!'+alum.alumno_id})\n\t\t\ttoastr.success 'Éxito', 'Alumno restaurado'\n\t\t, (r2)->\n\t\t\ttoastr.error 'No se restauró el alumno', 'Error'\n\t\t)\n\t$scope.elimAlum = (alum)->\n\n\t\tmodalInstance = $modal.open({\n\t\t\ttemplateUrl: '==papelera/forceRemoveAlumno.tpl.html'\n\t\t\tcontroller: 'ForceRemoveAlumnoCtrl'\n\t\t\tresolve: \n\t\t\t\talumno: ()->\n\t\t\t\t\talum\n\t\t})\n\t\tmodalInstance.result.then( (alum)->\n\t\t\t$scope.gridAlumnos.data = $filter('filter')($scope.gridAlumnos.data, {alumno_id: '!'+alum.alumno_id})\n\t\t)\n\n\t# ALUMNOS\n\tbtGridAlum1 = '<a class=\"btn btn-default btn-xs shiny info\" ng-click=\"grid.appScope.restaurarAlum(row.entity)\"><i class=\"fa fa-refresh \"></i>Restaurar</a>'\n\tbtGridAlum2 = '<a uib-tooltip=\"¡Eliminar completamente!\" tooltip-placement=\"right\" class=\"btn btn-default btn-xs shiny icon-only danger\" ng-click=\"grid.appScope.elimAlum(row.entity)\"><i class=\"fa fa-times \"></i></a>'\n\t\n\t$scope.gridAlumnos = \n\t\tenableSorting: true,\n\t\tenableFiltering: true,\n\t\tenebleGridColumnMenu: false,\n\t\tenableCellEditOnFocus: true,\n\t\tcolumnDefs: [\n\t\t\t{ field: 'alumno_id', displayName:'Id', maxWidth: 40}\n\t\t\t{ name: 'edicion', displayName:'Edición', maxWidth: 110, enableSorting: false, enableFiltering: false, cellTemplate: btGridAlum1 + btGridAlum2}\n\t\t\t{ field: 'nombres', enableHiding: false }\n\t\t\t{ field: 'apellidos' }\n\t\t\t{ field: 'sexo', maxWidth: 20 }\n\t\t\t{ field: 'username', displayName: 'Usuario'}\n\t\t\t{ field: 'fecha_nac', displayName:'Nacimiento', cellFilter: \"date:mediumDate\", type: 'date'}\n\t\t\t{ field: 'direccion', displayName: 'Dirección' }\n\t\t],\n\t\tmultiSelect: false,\n\t\t#filterOptions: $scope.filterOptions,\n\t\tonRegisterApi: ( gridApi ) ->\n\t\t\t$scope.gridApi = gridApi\n\n\n\n\t# GRUPOS\n\n\t$scope.restaurarGrupo = (grupo)->\n\t\t$http.put('::grupos/restore/'+grupo.id).then(()->\n\t\t\t$scope.gridGrupos.data = $filter('filter')($scope.gridGrupos.data, {id: '!'+grupo.id})\n\t\t\ttoastr.success 'Éxito', 'Grupo restaurado'\n\t\t, (r2)->\n\t\t\ttoastr.error 'No se restauró el grupo', 'Error'\n\t\t)\n\t$scope.elimGrupo = (grupo)->\n\n\t\tmodalInstance = $modal.open({\n\t\t\ttemplateUrl: '::papelera/forceRemoveGrupo.tpl.html'\n\t\t\tcontroller: 'ForceRemoveGrupoCtrl'\n\t\t\tresolve: \n\t\t\t\tgrupo: ()->\n\t\t\t\t\tgrupo\n\t\t})\n\t\tmodalInstance.result.then( (grupo)->\n\t\t\t$scope.gridGrupos.data = $filter('filter')($scope.gridGrupos.data, {id: '!'+grupo.id})\n\t\t)\n\n\tbtGridGrupo1 = '<a class=\"btn btn-default btn-xs shiny info\" ng-click=\"grid.appScope.restaurarGrupo(row.entity)\"><i class=\"fa fa-refresh \"></i>Restaurar</a>'\n\tbtGridGrupo2 = '<a uib-tooltip=\"¡Eliminar completamente!\" tooltip-placement=\"right\" class=\"btn btn-default btn-xs shiny icon-only danger\" ng-click=\"grid.appScope.elimGrupo(row.entity)\"><i class=\"fa fa-times \"></i></a>'\n\t\n\t$scope.gridGrupos = \n\t\tenableSorting: true,\n\t\tenableFiltering: true,\n\t\tenebleGridColumnMenu: false,\n\t\tenableCellEditOnFocus: true,\n\t\tcolumnDefs: [\n\t\t\t{ field: 'id', displayName:'Id', maxWidth: 40}\n\t\t\t{ name: 'edicion', displayName:'Edición', maxWidth: 110, enableSorting: false, enableFiltering: false, cellTemplate: btGridGrupo1 + btGridGrupo2}\n\t\t\t{ field: 'nombre', enableHiding: false }\n\t\t\t{ field: 'abrev', displayName: 'Abreviatura'}\n\t\t\t{ field: 'grado_id', maxWidth: 20 }\n\t\t\t{ field: 'titular_id', displayName:'Titular' }\n\t\t],\n\t\tmultiSelect: false,\n\t\t#filterOptions: $scope.filterOptions,\n\t\tonRegisterApi: ( gridApi ) ->\n\t\t\t$scope.gridApi = gridApi\n\n\n\t$http.get('::alumnos/trashed').then((data)->\n\t\t$scope.gridAlumnos.data = data.data;\n\t, (r2)->\n\t\ttoastr.warning 'No se pudo traer los alumnos eliminados.'\n\t)\n\t$http.get('::grupos/trashed').then((data)->\n\t\t$scope.gridGrupos.data = data.data;\n\t, (r2)->\n\t\ttoastr.warning 'No se pudo traer los grupos eliminados.'\n\t)\n\n\n\n\n\n\n\n\t# UNIDADES\n\n\t$scope.restaurarUnidad = (unidad)->\n\t\t$http.put('::unidades/restore/'+unidad.id).then(()->\n\t\t\t$scope.gridUnidad.data = $filter('filter')($scope.gridUnidad.data, {id: '!'+unidad.id})\n\t\t\ttoastr.success 'Éxito', 'Unidad restaurada'\n\t\t, (r2)->\n\t\t\ttoastr.error 'No se restauró la unidad', 'Error'\n\t\t)\n\t$scope.elimUnidad = (unidad)->\n\n\t\tmodalInstance = $modal.open({\n\t\t\ttemplateUrl: '==papelera/forceRemoveUnidad.tpl.html'\n\t\t\tcontroller: 'ForceRemoveUnidadCtrl'\n\t\t\tresolve: \n\t\t\t\tunidad: ()->\n\t\t\t\t\tunidad\n\t\t})\n\t\tmodalInstance.result.then( (unidad)->\n\t\t\t$scope.gridUnidad.data = $filter('filter')($scope.gridUnidad.data, {id: '!'+unidad.id})\n\t\t)\n\n\tbtGridUnidad1 = '<a class=\"btn btn-default btn-xs shiny info\" ng-click=\"grid.appScope.restaurarUnidad(row.entity)\"><i class=\"fa fa-refresh \"></i>Restaurar</a>'\n\tbtGridUnidad2 = '<a uib-tooltip=\"¡Eliminar completamente!\" tooltip-placement=\"right\" class=\"btn btn-default btn-xs shiny icon-only danger\" ng-click=\"grid.appScope.elimUnidad(row.entity)\"><i class=\"fa fa-times \"></i></a>'\n\n\t$scope.gridUnidad = \n\t\tenableSorting: true,\n\t\tenableFiltering: true,\n\t\tenebleGridColumnMenu: false,\n\t\tenableCellEditOnFocus: true,\n\t\tcolumnDefs: [\n\t\t\t{ field: 'id', displayName:'Id', maxWidth: 40}\n\t\t\t{ name: 'edicion', displayName:'Edición', maxWidth: 110, enableSorting: false, enableFiltering: false, cellTemplate: btGridUnidad1 + btGridUnidad2}\n\t\t\t{ field: 'definicion', displayName:'Definición', enableHiding: false }\n\t\t\t{ field: 'alias_materia', displayName: 'Materia'}\n\t\t\t{ field: 'abrev_grupo', displayName: 'Grupo'}\n\t\t\t{ field: 'numero_periodo', displayName: 'Per', maxWidth: 20 }\n\t\t\t{ field: 'porcentaje', displayName:'Porc' }\n\t\t],\n\t\tmultiSelect: false,\n\t\t#filterOptions: $scope.filterOptions,\n\t\tonRegisterApi: ( gridApi ) ->\n\t\t\t$scope.gridApi = gridApi\n\n\n\t$http.get('::unidades/trashed').then((data)->\n\t\t$scope.gridUnidad.data = data.data;\n\t, (r2)->\n\t\ttoastr.warning 'No se pudo traer las unidades eliminados.'\n\t)\n\t$http.get('::unidades/trashed').then((data)->\n\t\t$scope.gridUnidad.data = data.data;\n\t, (r2)->\n\t\ttoastr.warning 'No se pudo traer las unidades eliminadas.'\n\t)\n\n])\n"
  ]
}
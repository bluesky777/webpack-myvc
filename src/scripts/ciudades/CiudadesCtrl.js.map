{
  "version": 3,
  "file": "CiudadesCtrl.js",
  "sourceRoot": "",
  "sources": [
    "CiudadesCtrl.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "'use strict'\n\nangular.module(\"myvcFrontApp\")\n\n.controller('CiudadesCtrl', ['$scope', 'toastr', '$http', 'paises', '$filter', ($scope, toastr, $http, paises, $filter)->\n\n\t$scope.paises \t\t\t\t= paises.data\n\t$scope.datos \t\t\t\t= {}\n\n\n\t$scope.creando_ciudad \t\t= false\n\t$scope.creando_departamento = false\n\t$scope.creando_pais \t\t= false\n\n\t$scope.ciudad_new \t\t\t= ''\n\t$scope.departamento_new \t= ''\n\t$scope.pais_new \t\t\t= ''\n\t$scope.modificando_depart \t= false\n\n\n\n\t$scope.crearCiudad = ()->\n\t\t$scope.creando_ciudad = true\n\t\t$scope.$broadcast('paisSeleccionadoEvent2');\n\n\t$scope.crearDepartamento = ()->\n\t\t$scope.creandodepartamento = true\n\n\t$scope.crearPais = ()->\n\t\t$scope.creandopais = true\n\n\t$scope.guardarPais = (pais_new)->\n\t\tif pais_new\n\t\t\tpais_new = pais_new.toUpperCase()\n\t\t\t$scope.creandopais \t= true\n\n\t\t\t$http.post('::paises/store', {pais_new: pais_new } ).then( (r)->\n\t\t\t\ttoastr.success 'Creado correctamente: ' + pais_new\n\t\t\t\t$scope.paises \t\t\t= r.data\n\t\t\t\t$scope.creandopais \t= false\n\t\t\t\t$scope.pais_new \t\t= '' # No sé por qué no funciona!\n\t\t\t\t$scope.mostrarAgregarPais = false\n\t\t\t, (r2)->\n\t\t\t\ttoastr.error 'No se pudo crear', 'Error'\n\t\t\t)\n\t\telse\n\t\t\ttoastr.warning 'Debes escribir el nombre del pais.'\n\n\t$scope.guardarCiudad = (ciudad_new, departamento_new)->\n\n\t\tif !$scope.datos.pais\n\t\t\ttoastr.warning 'Debes seleccionar un pais.'\n\t\t\treturn\n\t\tif !$scope.datos.departamento and departamento_new==''\n\t\t\ttoastr.warning 'Debe seleccionar departamento o escribir uno nuevo.'\n\t\t\treturn\n\t\tif ciudad_new==''\n\t\t\ttoastr.warning 'Debe escribir la nueva ciudad.'\n\t\t\treturn\n\n\t\tif $scope.datos.departamento\n\t\t\tdepart_guardar \t= departamento.departamento\n\t\telse\n\t\t\tdepart_guardar \t= departamento_new\n\n\t\t$http.post('::ciudades/guardar-ciudad', {ciudad: ciudad_new, departamento: depart_guardar, pais_id: $scope.datos.pais.id } ).then( (r)->\n\t\t\ttoastr.success 'Creado correctamente: ' + r.data.ciudad\n\t\t\tif $scope.datos.departamento then $scope.ciudades.push r.data\n\t\t\t$scope.creandociudad \t= false\n\t\t\t$scope.ciudad_new \t\t= '' # No sé por qué no funciona!\n\t\t\t$scope.departamento_new = ''\n\n\t\t\t$scope.guardar = true\n\n\t\t\t$http.get('::paises').then((r)->\n\t\t\t\t$scope.paises = r.data\n\t\t\t\t$scope.paisSelect($filter('filter')($scope.paises, { id: 1 })[0])\n\t\t\t, (r2)->\n\t\t\t\ttoastr.error 'No se pudo traer las ciudades.'\n\t\t\t)\n\t\t, (r2)->\n\t\t\ttoastr.error 'No se pudo crear', 'Error'\n\t\t)\n\n\t$scope.escribeEnDepartamentoNew = ()->\n\t\t$scope.datos.departamento = undefined\n\n\t$scope.actualizarCiudad = (ciudad)->\n\t\t$http.put('::ciudades/actualizar-ciudad', ciudad).then( (r)->\n\t\t\ttoastr.success 'Actualizado: ' + ciudad.ciudad\n\t\t\tciudad.editandoCiudad = false\n\t\t, (r2)->\n\t\t\ttoastr.error 'No se pudo actualizar', 'Error'\n\t\t)\n\n\t$scope.actualizarDepartamento = (ciudad)->\n\t\t$http.put('::ciudades/actualizar-departamento', ciudad).then( (r)->\n\t\t\ttoastr.success 'Actualizado: ' + ciudad.departamento\n\t\t\tciudad.editandoDepart = false\n\t\t\tpais = $scope.ciudad_new.pais\n\n\t\t\tfor ciud in $scope.ciudades\n\t\t\t\tciud.departamento = ciudad.departamento\n\n\t\t\t$scope.modificando_depart = true\n\n\t\t, (r2)->\n\t\t\ttoastr.error 'No se pudo actualizar', 'Error'\n\t\t)\n\t$scope.actualizarPais = (pais)->\n\t\t$http.put('::paises/actualizar', pais).then( (r)->\n\t\t\ttoastr.success 'Actualizado: ' + pais.pais\n\t\t\tpais.editandoPais = false\n\t\t\tpais.editandoAbrev = false\n\t\t, (r2)->\n\t\t\ttoastr.error 'No se pudo actualizar', 'Error'\n\t\t)\n\n\n\n\n\n\t$scope.paisSelect = ($item, numero)->\n\t\t$http.put(\"::ciudades/departamentos-by-id\", { pais_id: $item.id }).then((r)->\n\t\t\t$scope.departamentos = r.data.departamentos\n\n\t\t\tif typeof $scope.datos.pais is 'undefined'\n\t\t\t\t$scope.datos.pais = $item\n\t\t\t$scope.$broadcast('paisSeleccionadoEvent' + numero);\n\t\t)\n\n\t# Que inicialmente aparezca la primera opción, Colombia.\n\t$scope.paisSelect($filter('filter')($scope.paises, { id: 1 })[0], 1)\n\n\n\t$scope.departamentoSelect = ($item, numero)->\n\t\tif $item\n\t\t\t$scope.departamento_new = ''\n\t\t\t$http.get(\"::ciudades/por-departamento/\"+$item.departamento).then((r)->\n\t\t\t\t$scope.ciudades = r.data\n\n\t\t\t\tif typeof $scope.datos.departamento is 'undefined'\n\t\t\t\t\t$scope.datos.departamento = $item\n\t\t\t\t$scope.$broadcast('departamentoSeleccionadoEvent' + numero);\n\t\t\t)\n\n\n\n\t$scope.eliminarCiudad = (ciudad)->\n\n\t\t$http.delete('::ciudades/destroy/'+ciudad.id).then((r)->\n\t\t\ttoastr.success 'Ciudad enviada a la papelera.', 'Eliminado'\n\t\t\t$scope.ciudades = $filter('filter')($scope.ciudades, {id: '!'+ciudad.id})\n\t\t, (r2)->\n\t\t\ttoastr.warning 'No se pudo enviar a la papelera.', 'Problema'\n\t\t)\n\n\n\treturn\n])\n"
  ]
}
{
  "version": 3,
  "file": "ConfigCertificados.js",
  "sourceRoot": "",
  "sources": [
    "ConfigCertificados.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "angular.module('myvcFrontApp')\n\n.directive('configuracionCertificados',['App', (App)->\n\n\trestrict: 'E'\n\ttemplateUrl: \"#{App.views}colegio/configCertificados.tpl.html\"\n\n\n\tlink: (scope, iElem, iAttrs)->\n\t\t# Debo agregar la clase .loading-inactive para que desaparezca el loader de la pantalla.\n\t\t# y eso lo puedo hacer con el ng-if\n\tcontroller: 'ConfigCertificadosCtrl'\n\n])\n\n.controller 'ConfigCertificadosCtrl', ['$scope', 'App', '$http', '$state', 'toastr', 'uiGridConstants', '$filter', ($scope, App, $http, $state, toastr, uiGridConstants, $filter) ->\n\n\t#console.log 'Configurando certificados'\n\t$scope.newcertif = {\n\t\tencabezado_width: 0\n\t\tencabezado_height: 0\n\t\tencabezado_margin_top: 0\n\t\tencabezado_margin_left: 0\n\t\tpiepagina_width: 0\n\t\tpiepagina_height: 0\n\t\tpiepagina_margin_bottom: 0\n\t\tpiepagina_margin_left: 0\n\t}\n\t$scope.creando_certificado = false\n\t$scope.editando = false\n\t$scope.currentCertif = {}\n\t$scope.certificado = {}\n\n\n\tcerts = $filter('filter')($scope.certificados, {id: $scope.year.config_certificado_estudio_id})\n\tif certs\n\t\tif certs.length > 0\n\t\t\t$scope.certificado.config_actual = certs[0]\n\n\n\t$scope.crearConfig = ()->\n\t\t$scope.creando_certificado = true\n\n\t$scope.cancelConfig = ()->\n\t\t$scope.creando_certificado = false\n\n\n\n\tbtGrid1 = '<a uib-tooltip=\"Editar\" tooltip-placement=\"left\" class=\"btn btn-default btn-xs shiny icon-only info\" ng-click=\"grid.appScope.editar(row.entity)\"><i class=\"fa fa-edit \"></i></a>'\n\tbtGrid2 = '<a uib-tooltip=\"X Eliminar\" tooltip-placement=\"right\" class=\"btn btn-default btn-xs shiny icon-only danger\" ng-click=\"grid.appScope.eliminar(row.entity)\"><i class=\"fa fa-trash \"></i></a>'\n\n\n\t$scope.gridOptions =\n\t\tshowGridFooter: true,\n\t\tenableSorting: true,\n\t\tenableFiltering: false,\n\t\tenebleGridColumnMenu: false,\n\t\tcolumnDefs: [\n\t\t\t{ field: 'id', displayName:'Id', width: 50, enableCellEdit: false, enableColumnMenu: false}\n\t\t\t{ field: 'nombre', displayName:'Nombre', minWidth: 80, enableSorting: false, enableColumnMenu: false }\n\t\t\t{ name: 'edicion', displayName:'EdiciÃ³n', width: 60, enableSorting: false, enableFiltering: false, cellTemplate: btGrid1 + btGrid2, enableCellEdit: false, enableColumnMenu: false}\n\t\t\t{ field: 'encabezado_width', displayName:'AnchoE', filter: { condition: uiGridConstants.filter.CONTAINS } }\n\t\t\t{ field: 'encabezado_height', displayName:'AltoE', filter: { condition: uiGridConstants.filter.CONTAINS } }\n\t\t\t{ field: 'encabezado_margin_top', displayName:'MargenEArr', filter: { condition: uiGridConstants.filter.CONTAINS } }\n\t\t\t{ field: 'encabezado_margin_left', displayName:'MargenEIzq', filter: { condition: uiGridConstants.filter.CONTAINS } }\n\t\t\t{ field: 'piepagina_width', displayName:'AnchoP'}\n\t\t\t{ field: 'piepagina_height', displayName:'AltoP'}\n\t\t\t{ field: 'piepagina_margin_left', displayName:'MargenPIzq'}\n\t\t],\n\t\tmultiSelect: false,\n\t\tonRegisterApi: ( gridApi ) ->\n\t\t\t$scope.gridApi = gridApi\n\t\t\tgridApi.edit.on.afterCellEdit($scope, (rowEntity, colDef, newValue, oldValue)->\n\n\t\t\t\tif newValue != oldValue\n\n\t\t\t\t\t$http.put('::certificados/update', rowEntity).then((r)->\n\t\t\t\t\t\ttoastr.success 'Certificado modificado', 'Actualizado'\n\t\t\t\t\t, (r2)->\n\t\t\t\t\t\ttoastr.error 'Cambio no guardado', 'Error'\n\t\t\t\t\t)\n\n\t\t\t\t$scope.$apply()\n\t\t\t)\n\n\n\n\t$scope.gridOptions.data = $scope.certificados;\n\n\n\n\n\t$scope.guardar = ()->\n\t\t$http.post('::certificados/store', $scope.newcertif).then((r)->\n\t\t\ttoastr.success 'Certificado creado.'\n\t\t\t$scope.creando_certificado = false\n\t\t\t$scope.certificados.push r.data\n\t\t\t$scope.gridOptions.data = $scope.certificados\n\t\t, (r2)->\n\t\t\ttoastr.error 'Certificado no guardado', 'Error'\n\t\t)\n\n\n\n\t$scope.editar = (certif)->\n\t\t$scope.editando = true\n\t\t$scope.currentCertif = certif\n\t\tenc_img = $filter('filter')($scope.imagenes, {id: certif.encabezado_img_id})\n\t\tpie_img = $filter('filter')($scope.imagenes, {id: certif.piepagina_img_id})\n\n\t\tif enc_img.length > 0\n\t\t\tenc_img = enc_img[0]\n\t\t\t$scope.currentCertif.encabezado_img = enc_img\n\n\t\tif pie_img.length > 0\n\t\t\tpie_img = pie_img[0]\n\t\t\t$scope.currentCertif.piepagina_img = pie_img\n\n\n\n\t$scope.cancelEdit = ()->\n\t\t$scope.editando = false\n\n\n\t$scope.actualizar = ()->\n\t\t$http.put('::certificados/update', $scope.currentCertif).then((r)->\n\t\t\ttoastr.success 'Certificado modificado', 'Actualizado'\n\t\t\t$scope.editando = false\n\t\t, (r2)->\n\t\t\ttoastr.error 'Cambio no guardado', 'Error'\n\t\t)\n\n\n\n\t$scope.eliminar = (certif)->\n\t\t$http.delete('::certificados/destroy/'+certif.id).then((r)->\n\t\t\ttoastr.success 'Certificado eliminado.'\n\t\t\t$scope.certificados = $filter('filter')($scope.certificados, {id: '!'+certif.id})\n\t\t\t$scope.gridOptions.data = $scope.certificados\n\t\t, (r2)->\n\t\t\ttoastr.error 'Certificado no eliminado', 'Error'\n\t\t)\n\n\n\t$scope.certificadoSelect = ($item, $model)->\n\t\t$http.put('::certificados/actual', {config_certificado_estudio_id: $item.id, year_id: $scope.year.id}).then((r)->\n\t\t\ttoastr.success 'Certificado actual cambiado.'\n\t\t, (r2)->\n\t\t\ttoastr.error 'Certificado no cambiado', 'Error'\n\t\t)\n\n\n\t$scope.guardarEncabezado = ()->\n\t\t$http.put('::certificados/encabezado', {encabezado_certificado: $scope.year.encabezado_certificado, year_id: $scope.year.id}).then((r)->\n\t\t\ttoastr.success 'Encabezado guardado.'\n\t\t, (r2)->\n\t\t\ttoastr.error 'Encabezado no guardado', 'Error'\n\t\t)\n\n\n\n\treturn\n]\n"
  ]
}
{
  "version": 3,
  "file": "ConfigEscalas.js",
  "sourceRoot": "",
  "sources": [
    "ConfigEscalas.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "angular.module('myvcFrontApp')\n\n.directive('configuracionEscalas',['App', (App)->\n\n\trestrict: 'E'\n\ttemplateUrl: \"#{App.views}colegio/configEscalas.tpl.html\"\n\n\n\tlink: (scope, iElem, iAttrs)->\n\t\t# Debo agregar la clase .loading-inactive para que desaparezca el loader de la pantalla.\n\t\t# y eso lo puedo hacer con el ng-if\n\tcontroller: 'ConfigEscalasCtrl'\n\n])\n\n.controller 'ConfigEscalasCtrl', ['$scope', 'App', '$http', '$state', '$cookies', 'toastr', 'uiGridConstants', '$filter', ($scope, App, $http, $state, $cookies, toastr, uiGridConstants, $filter) ->\n\n\t$scope.creando_escala = false\n\n\tbtGrid2 = '<a uib-tooltip=\"X Eliminar\" tooltip-placement=\"right\" class=\"btn btn-default btn-xs shiny icon-only danger\" ng-click=\"grid.appScope.eliminarEscala(row.entity)\"><i class=\"fa fa-trash \"></i></a>'\n\n\n\t$scope.gridOptions =\n\t\tshowGridFooter: true,\n\t\tenableSorting: true,\n\t\tenebleGridColumnMenu: false,\n\t\tcolumnDefs: [\n\t\t\t{ field: 'id', displayName:'Id', width: 50, enableCellEdit: false, enableColumnMenu: false}\n\t\t\t{ field: 'desempenio', displayName:'Desempeño', enableSorting: false, enableColumnMenu: false }\n\t\t\t{ name: 'eliminar', displayName:'Elimin', width: 50, enableSorting: false, enableFiltering: false, cellTemplate: btGrid2, enableCellEdit: false, enableColumnMenu: false}\n\t\t\t{ field: 'descripcion', displayName:'Descripción' }\n\t\t\t{ field: 'porc_inicial', displayName:'Valor inicial' }\n\t\t\t{ field: 'porc_final', displayName:'Valor final' }\n\t\t\t{ field: 'orden', type: 'number' }\n\t\t\t{ field: 'perdido', type:'boolean', cellTemplate: '<input type=\"checkbox\" ng-model=\"row.entity.perdido\" ng-true-value=\"1\" ng-false-value=\"0\">' }\n\t\t\t{ field: 'valoracion', displayName:'Valoración'}\n\t\t],\n\t\tmultiSelect: false,\n\t\tonRegisterApi: ( gridApi ) ->\n\t\t\t$scope.gridApi = gridApi\n\t\t\tgridApi.edit.on.afterCellEdit($scope, (rowEntity, colDef, newValue, oldValue)->\n\n\t\t\t\tif newValue != oldValue\n\n\t\t\t\t\t$http.put('::escalas/update', rowEntity).then((r)->\n\t\t\t\t\t\ttoastr.success 'Escala modificada', 'Actualizada'\n\t\t\t\t\t, (r2)->\n\t\t\t\t\t\ttoastr.error 'Cambio no guardado', 'Error'\n\t\t\t\t\t)\n\n\t\t\t\t$scope.$apply()\n\t\t\t)\n\n\n\n\t$scope.gridOptions.data = $scope.year.escalas;\n\n\n\n\n\t$scope.crearEscala = ()->\n\t\t$http.post('::escalas/store').then((r)->\n\t\t\ttoastr.success 'Escala creada.'\n\t\t\t$scope.creando_escala = false\n\t\t\t$scope.year.escalas.push r.data\n\t\t\t$scope.gridOptions.data = $scope.year.escalas\n\t\t, (r2)->\n\t\t\ttoastr.error 'Escala no guardada', 'Error'\n\t\t)\n\n\n\n\n\n\t$scope.eliminarEscala = (escala)->\n\t\t$http.delete('::escalas/destroy/'+escala.id).then((r)->\n\t\t\ttoastr.success 'Escala eliminada.'\n\t\t\t$scope.year.escalas = $filter('filter')($scope.year.escalas, {id: '!'+escala.id})\n\t\t\t$scope.gridOptions.data = $scope.year.escalas\n\t\t, (r2)->\n\t\t\ttoastr.error 'Escala no eliminada', 'Error'\n\t\t)\n\n\n\n\treturn\n]\n"
  ]
}
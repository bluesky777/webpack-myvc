{
  "version": 3,
  "file": "EditarPreguntaCtrl.js",
  "sourceRoot": "",
  "sources": [
    "EditarPreguntaCtrl.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "'use strict'\n\nangular.module(\"myvcFrontApp\")\n\n.controller('EditarPreguntaCtrl', ['$scope', 'App', '$rootScope', '$state', '$http', '$uibModal', '$filter', 'AuthService', 'datos', 'toastr', '$stateParams', '$location', '$anchorScroll', '$timeout', ($scope, App, $rootScope, $state, $http, $modal, $filter, AuthService, datos, toastr, $stateParams, $location, $anchorScroll, $timeout)->\n\n\tAuthService.verificar_acceso()\n\n\t$scope.pregunta_id \t\t= $stateParams.pregunta_id\n\n\t$scope.perfilPath \t\t= App.images + 'perfil/'\n\t$scope.views \t\t\t= App.views\n\n\t$scope.pregunta = datos\n\t\n\n\t$scope.editor_options = \n\t\tallowedContent: true,\n\t\tentities: false\n\n\n\t$timeout ()->\n\t\t$location.hash('scroll-pregunta');\n\t\t$anchorScroll();\n\n\t$scope.onEditorReady = ()->\n\t\tconsole.log 'Editor listo'\n\n\n\t$scope.guardar_cambios = (finalizar)->\n\n\t\t$http.put('::preguntas/guardar', $scope.pregunta ).then((r)->\n\t\t\tr = r.data\n\t\t\t$scope.$parent.cambios_pregunta_guardados($scope.pregunta)\n\t\t\ttoastr.success 'Cambios guardados'\n\t\t\tif finalizar\n\t\t\t\t$state.go('panel.editar_actividad', { actividad_id: $scope.pregunta.actividad_id })\n\t\t(r2)->\n\t\t\ttoastr.error 'No se pudo guardar cambios'\n\t\t)\n\n\n\t$scope.restar = (modelo)->\n\t\tif $scope.pregunta[modelo] > 0\n\t\t\t$scope.pregunta[modelo] = $scope.pregunta[modelo] - 1\n\t$scope.sumar = (modelo)->\n\t\tif $scope.pregunta[modelo] < 1000\n\t\t\t$scope.pregunta[modelo] = parseInt($scope.pregunta[modelo]) + 1\n\n\t$scope.cancelar = ()->\n\t\t$state.go('panel.editar_actividad', { actividad_id: $scope.pregunta.actividad_id })\n\n\n\t$scope.add_opcion = ()->\n\t\tcant = $scope.pregunta.opciones.length\n\n\t\topcion = \n\t\t\tdefinicion: \t'Opcion ' + (cant+1)\n\t\t\torden: \t\t\tcant\n\t\t\tpregunta_id: \t$scope.pregunta.id\n\t\t\tis_correct: \tfalse\t\t\t\n\n\t\t$http.put('::opciones/add-opcion', opcion ).then((r)->\n\t\t\tr = r.data\n\t\t\ttoastr.success 'Opción agregada'\n\t\t\t\n\t\t\t$scope.pregunta.opciones.push(r)\n\t\t(r2)->\n\t\t\ttoastr.error 'No se pudo agregar'\n\t\t)\n\n\n\t$scope.toggle_opcion_otra = (otra)->\n\n\t\t$http.put('::preguntas/toggle-opcion-otra', {id: $scope.pregunta.id, opcion_otra: otra} ).then((r)->\n\t\t\tr = r.data\n\t\t\ttoastr.success 'Opción OTRA agregada'\n\t\t\t$scope.pregunta.opcion_otra = otra\n\t\t(r2)->\n\t\t\ttoastr.error 'No se pudo agregar OTRA'\n\t\t)\n\n\n\t$scope.setOpcionCorrect = (opcion)->\n\n\t\t$http.put('::opciones/set-opcion-correct', opcion ).then((r)->\n\t\t\tr = r.data\n\t\t\tfor opc in $scope.pregunta.opciones\n\t\t\t\topc.is_correct = if opcion==opc then true else false\n\t\t(r2)->\n\t\t\ttoastr.error 'No se pudo establecer correcta'\n\t\t)\n\n\n\t$scope.eliminarOpcion = (opcion)->\n\n\t\t$http.delete('::opciones/destroy/'+opcion.id ).then((r)->\n\t\t\tr = r.data\n\t\t\ttoastr.success 'Opción eliminada'\n\t\t\t$scope.pregunta.opciones = $filter('filter')($scope.pregunta.opciones, {id: '!'+opcion.id})\n\t\t(r2)->\n\t\t\ttoastr.error 'No se pudo establecer correcta'\n\t\t)\n\n\n\n\n\n\treturn\n])\n\n\n"
  ]
}
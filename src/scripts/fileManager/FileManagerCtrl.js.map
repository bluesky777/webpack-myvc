{
  "version": 3,
  "file": "FileManagerCtrl.js",
  "sourceRoot": "",
  "sources": [
    "FileManagerCtrl.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "'use strict'\n\nangular.module(\"myvcFrontApp\")\n\n.controller('FileManagerCtrl', ['$scope', 'Upload', '$timeout', '$filter', 'App', '$http', 'Perfil', '$uibModal', 'resolved_user', 'toastr', 'AuthService', 'ProfesoresServ', ($scope, $upload, $timeout, $filter, App, $http, Perfil, $modal, resolved_user, toastr, AuthService, ProfesoresServ)->\n\n\t$scope.USER \t\t\t= resolved_user\n\t$scope.subir_intacta \t= {\n\t\tintacta: 'Normal'\n\t}\n\t$scope.hasRoleOrPerm \t= AuthService.hasRoleOrPerm\n\t$scope.cantUp \t\t\t= 10 # cantidad de imágenes que pueden subir\n\t$scope.tabFileManager \t= 'mis_img' # 'mis_img' 'imgs_usus'\n\t$scope.views \t\t      = App.views\n\t$scope.search_alu     = ''\n\n\tfixDato = ()->\n\t\t$scope.dato =\n\t\t\timgUsuario:\n\t\t\t\tid:\t\t$scope.USER.imagen_id\n\t\t\t\tnombre:\t$scope.USER.imagen_nombre\n\t\t\timgOficial:\n\t\t\t\tid:\t\t$scope.USER.foto_id\n\t\t\t\tnombre:\t$scope.USER.foto_nombre\n\n\tfixDato()\n\n\t$scope.perfilPath \t\t\t= App.images + 'perfil/'\n\t$scope.imgFiles \t\t\t= []\n\t$scope.errorMsg \t\t\t= ''\n\t#$scope.fileReaderSupported = window.FileReader != null && (window.FileAPI == null || FileAPI.html5 != false);\n\t$scope.fileReaderSupported \t= window.FileReader != null && (window.FileAPI == null);\n\t$scope.dato.usuarioElegido \t= []\n\t$scope.dato.tipo_a_cambiar \t= 'alumno'\n\t$scope.usuariosall \t\t\t= []\n\t$scope.profesores \t\t\t= []\n\n\n\t$http.get('::myimages').then((r)->\n\t\tr = r.data\n\t\t$scope.imagenes_privadas \t= r.imagenes_privadas\n\t\t$scope.imagenes_publicas \t= r.imagenes_publicas\n\t\t#$scope.imagenes_all \t\t= r.imagenes_publicas.concat( r.imagenes_privadas )\n\t\t$scope.logo \t\t\t\t= r.logo\n\t\t$scope.dato.imgParaUsuario \t= r.imagenes_privadas[0]\n\t\t$scope.grupos \t\t\t\t= r.grupos\n\t\t$scope.profesores \t\t\t= r.profesores\n\n\n\t\tif localStorage.grupo_selected_imgs\n\t\t\tfor grup in $scope.grupos\n\t\t\t\tif grup.id == parseInt(localStorage.grupo_selected_imgs)\n\t\t\t\t\t$scope.dato.grupo = grup\n\t\t\t\t\t$scope.grupoSelect(grup)\n\n\n\n\t, (r2)->\n\t\ttoastr.error 'No se trajeron las imágenes.'\n\t)\n\n\n\tif $scope.hasRoleOrPerm(['profesor', 'admin'])\n\t\t$scope.cantUp = 2\n\n\n\tif localStorage.tabFileManager\n\t\t$scope.tabFileManager = localStorage.tabFileManager\n\telse\n\t\tlocalStorage.tabFileManager = $scope.tabFileManager\n\t\t$timeout ()->\n\t\t\t$scope.tabFileManager \t= 'mis_img'\n\n\n\tif localStorage.tipo_img_a_cambiar\n\t\t$scope.dato.tipo_a_cambiar = localStorage.tipo_img_a_cambiar\n\telse\n\t\tlocalStorage.tipo_img_a_cambiar = 'alumno'\n\n\n\n\n\n\t$scope.selectTab = (indice)->\n\t\tlocalStorage.tabFileManager \t= indice\n\t\t$scope.tabFileManager \t\t\t= localStorage.tabFileManager\n\n\n\t$scope.cambiar_tipo_img_a_cambiar = (tipo)->\n\t\tlocalStorage.tipo_img_a_cambiar \t= tipo\n\n\n\n\t$scope.select_imagen_item = (imagen)->\n\t\tfor img in $scope.imagenes_privadas\n\t\t\timg.selected = false\n\t\timagen.selected = true\n\t\t$scope.dato.selectedImg  = imagen\n\n\n\n\t###########################################################\n\t############### \tSUBIDA DE IMÁGENES \t\t###############\n\t###########################################################\n\t$scope.uploadFiles =  (files)->\n\t\tif $scope.imagenes_privadas.length > 2 and $scope.hasRoleOrPerm(['alumno', 'acudiente'])\n\t\t\ttoastr.warning 'No tiene permiso para subir más imágenes'\n\n\t\t$scope.imgFiles = files\n\t\t$scope.errorMsg = ''\n\n\t\tif files and files.length\n\n\t\t\tfor i in [0...files.length]\n\t\t\t\tfile = files[i]\n\t\t\t\tgenerateThumbAndUpload file\n\n\n\tgenerateThumbAndUpload = (file)->\n\t\t$scope.errorMsg = null\n\t\tuploadUsing$upload(file)\n\t\t$scope.generateThumb(file)\n\n\t$scope.generateThumb = (file)->\n\t\tif file != null\n\t\t\tif $scope.fileReaderSupported and file.type.indexOf('image') > -1\n\t\t\t\t$timeout ()->\n\t\t\t\t\tfileReader = new FileReader()\n\t\t\t\t\tfileReader.readAsDataURL(file)\n\t\t\t\t\tfileReader.onload = (e)->\n\t\t\t\t\t\t$timeout(()->\n\t\t\t\t\t\t\tfile.dataUrl = e.target.result\n\t\t\t\t\t\t)\n\n\tuploadUsing$upload = (file)->\n\n\t\tintactaUrl = if $scope.subir_intacta.intacta == 'Intacta' then '-intacta' else ''\n\n\t\tif $scope.subir_intacta.intacta == 'Firma'\n\t\t\tintactaUrl = '-firma'\n\n\t\tif file.size > 10000000\n\t\t\t$scope.errorMsg = 'Archivo excede los 10MB permitidos.'\n\t\t\treturn\n\n\t\t$upload.upload({\n\t\t\turl: App.Server + 'myimages/store' + intactaUrl,\n\t\t\t#fields: {'username': $scope.username},\n\t\t\tfile: file\n\t\t}).progress( (evt)->\n\t\t\tprogressPercentage = parseInt(100.0 * evt.loaded / evt.total)\n\t\t\tfile.porcentaje = progressPercentage\n\t\t\t#console.log('progress: ' + progressPercentage + '% ' + evt.config.file.name, evt.config)\n\t\t).success( (data, status, headers, config)->\n\n\t\t\tif $scope.subir_intacta.intacta == 'Intacta'\n\t\t\t\t$scope.imagenes_publicas.push data\n\t\t\telse if $scope.subir_intacta.intacta == 'Firma'\n\n\t\t\t\ttoastr.success 'Ahora elige el docente...'\n\t\t\t\t$scope.imagenes_privadas.push data\n\t\t\t\t$scope.selectTab('imgs_usus')\n\t\t\t\t$scope.dato.tipo_a_cambiar = 'profesor'\n\t\t\t\tfor ima in $scope.imagenes_privadas\n\t\t\t\t\tif ima.id == data.id\n\t\t\t\t\t\t$scope.dato.selectedImg = ima\n\n\t\t\telse\n\t\t\t\t$scope.imagenes_privadas.push data\n\n\t\t).error((r2)->\n\t\t\tconsole.log 'Falla uploading: ', r2\n\t\t).xhr((xhr)->\n\t\t\t#xhr.upload.addEventListener()\n\t\t\t#/* return $http promise then(). Note that this promise does NOT have progress/abort/xhr functions */\n\t\t)#.then((), error, progress)\n\n\n\n\t###########################################################\n\t############### \tPEDIDOS PERSONALES \t\t###############\n\t###########################################################\n\t$scope.pedirCambioUsuario = (imgUsu)->\n\t\tif imgUsu.id\n\t\t\t$http.put('::images-users/cambiar-imagen-perfil/'+$scope.USER.user_id, {imagen_id: imgUsu.id}).then((r)->\n\t\t\t\tr = r.data\n\t\t\t\tif $scope.hasRoleOrPerm('admin')\n\t\t\t\t\tPerfil.setImagen(r.imagen_id, imgUsu.nombre)\n\t\t\t\t\t$scope.$emit 'cambianImgs', {image: r}\n\t\t\t\t\ttoastr.success 'Imagen principal cambiada'\n\t\t\t\telse\n\t\t\t\t\ttoastr.info 'Ahora espera que un administrador acepte tu imagen', 'Solicitado'\n\n\t\t\t, (r2)->\n\t\t\t\ttoastr.error 'No se pudo cambiar imagen', 'Problema'\n\t\t\t)\n\t\telse\n\t\t\ttoastr.warning 'Selecciona una imagen'\n\n\t$scope.pedirCambioOficial = (imgOfi)->\n\t\tif imgOfi.id\n\t\t\t$http.put('::images-users/cambiar-imagen-oficial/'+$scope.USER.user_id, {foto_id: imgOfi.id}).then((r)->\n\t\t\t\tr = r.data\n\t\t\t\tif $scope.hasRoleOrPerm('admin')\n\t\t\t\t\tPerfil.setOficial(r.foto_id, imgOfi.nombre)\n\t\t\t\t\t$scope.$emit 'cambianImgs', {foto: r}\n\t\t\t\t\ttoastr.success 'Foto oficial cambiada'\n\t\t\t\telse\n\t\t\t\t\ttoastr.info 'Ahora espera que un administrador acepte tu imagen', 'Solicitado'\n\n\t\t\t, (r2)->\n\t\t\t\ttoastr.error 'No se pudo cambiar foto', 'Problema'\n\t\t\t)\n\t\telse\n\t\t\ttoastr.warning 'Selecciona una imagen'\n\n\t$scope.pedirCambioFirma = (imgFirmaProfe)->\n\t\tif imgFirmaProfe.id\n\t\t\taEnviar = { imgFirmaProfe: imgFirmaProfe.id }\n\t\t\t$http.put('::perfiles/cambiarfirmaunprofe/'+$scope.USER.persona_id, aEnviar).then((r)->\n\t\t\t\ttoastr.success 'Firma cambiada con éxito'\n\t\t\t\t$scope.USER.firma_id      = r.data.id\n\t\t\t\t$scope.USER.firma_nombre  = r.data.nombre\n\n\t\t\t, (r2)->\n\t\t\t\ttoastr.error 'Error al asignar foto al profesor', 'Problema'\n\t\t\t)\n\t\telse\n\t\t\ttoastr.warning 'Selecciona una imagen'\n\n\t$scope.cambiarLogoColegio = (imgLogo)->\n\t\t$http.put('::myimages/cambiarlogocolegio', {logo_id: imgLogo.id}).then((r)->\n\t\t\ttoastr.success 'Logo del colegio cambiado'\n\t\t\t$scope.logo.logo \t= imgLogo.nombre\n\t\t\t$scope.logo.logo_id = imgLogo.id\n\t\t\tconsole.log $scope.logo, imgLogo\n\t\t, (r2)->\n\t\t\ttoastr.error 'No se pudo cambiar el logo', 'Problema'\n\t\t)\n\n\t$scope.grupoSelect = (item, model)->\n\t\tlocalStorage.grupo_selected_imgs = item.id\n\t\t$http.get('::grupos/listado/'+item.id).then((r)->\n\t\t\tr = r.data\n\t\t\t$scope.alumnos = r\n\t\t\tr[0].selected = true\n\t\t\t$scope.dato.alumnoElegido = r[0]\n\t\t\t$scope.alumSelect($scope.dato.alumnoElegido)\n\t\t, (r2)->\n\t\t\ttoastr.error 'No se pudo traer los usuarios'\n\t\t)\n\n\t$scope.rotarImagen = (imagen)->\n\t\t$http.put('::images-users/rotarimagen/'+imagen.id).then((r)->\n\t\t\timagen.nombre = ''\n\t\t\ttoastr.success 'Imagen rotada'\n\t\t\timagen.nombre = r.data + '?' + new Date().getTime()\n\t\t, (r2)->\n\t\t\ttoastr.error 'Imagen no rotada'\n\t\t)\n\n\t$scope.rotarImagenIzquierda = (imagen)->\n\t\t$http.put('::images-users/rotar-imagen-izquierda/'+imagen.id).then((r)->\n\t\t\timagen.nombre = ''\n\t\t\ttoastr.success 'Imagen rotada'\n\t\t\timagen.nombre = r.data + '?' + new Date().getTime()\n\t\t, (r2)->\n\t\t\ttoastr.error 'Imagen no rotada'\n\t\t)\n\n\n\t$scope.publicarImagen = (imagen)->\n\t\t$http.put('::myimages/publicar-imagen/'+imagen.id).then((r)->\n\t\t\ttoastr.info 'Ahora la imagen es pública'\n\n\t\t\t$scope.imagenes_privadas = $filter('filter')($scope.imagenes_privadas, {id: '!'+imagen.id})\n\t\t\t$scope.imagenes_publicas.push imagen\n\n\t\t, (r2)->\n\t\t\ttoastr.error 'Imagen no publicada'\n\t\t)\n\n\n\t$scope.privatizarImagen = (imagen)->\n\t\t$http.put('::myimages/privatizar-imagen/'+imagen.id).then((r)->\n\t\t\tr = r.data\n\t\t\tif r.imagen\n\t\t\t\ttoastr.warning 'No puede ser logo del año ' + r.imagen.is_logo_of_year\n\t\t\t\treturn\n\n\t\t\ttoastr.info 'Ahora la imagen es privada'\n\n\t\t\tif imagen.user_id == $scope.USER.user_id\n\t\t\t\t$scope.imagenes_privadas.push imagen\n\n\t\t\t$scope.imagenes_publicas = $filter('filter')($scope.imagenes_publicas, {id: '!'+imagen.id})\n\n\t\t, (r2)->\n\t\t\ttoastr.error 'Imagen no privatizada'\n\t\t)\n\n\n\n\t$scope.borrarImagen = (imagen, usuario_id, de_un_usuario)->\n\n\t\tmodalInstance = $modal.open({\n\t\t\ttemplateUrl: '==fileManager/removeImage.tpl.html'\n\t\t\tcontroller: 'RemoveImageCtrl'\n\t\t\tsize: 'md',\n\t\t\tresolve:\n\t\t\t\timagen: ()->\n\t\t\t\t\timagen\n\t\t\t\tuser_id: ()->\n\t\t\t\t\tusuario_id\n\t\t\t\tdatos_imagen: ()->\n\n\t\t\t\t\tcodigos =\n\t\t\t\t\t\timagen_id: imagen.id\n\t\t\t\t\t\tuser_id: usuario_id\n\n\t\t\t\t\t$http.put('::myimages/datos-imagen', codigos).then((r)->\n\n\t\t\t\t\t\treturn $scope.datos_imagen = r.data\n\t\t\t\t\t, (r2)->\n\t\t\t\t\t\ttoastr.error 'Error al traer datos de imagen', 'Problema'\n\t\t\t\t\t\treturn {}\n\t\t\t\t\t)\n\n\t\t})\n\t\tmodalInstance.result.then( (imag)->\n\t\t\tif $scope.hasRoleOrPerm('admin')\n\t\t\t\tif de_un_usuario\n\t\t\t\t\t$scope.imagenes_del_usuario = $filter('filter')($scope.imagenes_del_usuario, {id: '!'+imag.id})\n\t\t\t\t\t$scope.dato.selectedImgDelUsuario = undefined\n\t\t\t\telse\n\t\t\t\t\tif imag.publica\n\t\t\t\t\t\t$scope.imagenes_publicas = $filter('filter')($scope.imagenes_publicas, {id: '!'+imag.id})\n\t\t\t\t\telse\n\t\t\t\t\t\t$scope.imagenes_privadas = $filter('filter')($scope.imagenes_privadas, {id: '!'+imag.id})\n\n\t\t\t\ttoastr.success 'La imagen ha sido removida.'\n\t\t\telse\n\t\t\t\tif imag.user_id == $scope.USER.user_id\n\t\t\t\t\ttoastr.success 'La imagen ha sido removida.'\n\t\t\t\t\tif imag.publica\n\t\t\t\t\t\t$scope.imagenes_publicas = $filter('filter')($scope.imagenes_publicas, {id: '!'+imag.id})\n\t\t\t\t\telse\n\t\t\t\t\t\t$scope.imagenes_privadas = $filter('filter')($scope.imagenes_privadas, {id: '!'+imag.id})\n\t\t\t\telse\n\t\t\t\t\ttoastr.info 'Un administrador borrará la imagen ya que no fuiste tú quien la subió', 'Solicitado'\n\t\t)\n\n\n\n\t###########################################################\n\t############### \tCAMBIAR A USUARIOS \t\t###############\n\t###########################################################\n\t$scope.cambiarImgUnUsuario = (usuarioElegido, imgParaUsuario)->\n\n\t\tconfirmando = false\n\t\tif imgParaUsuario\n\t\t\tconfirmando = confirm('Esto quitará la imágen de tu lista. ¿Seguro que deseas cambiar la imagen de este usuario?')\n\t\telse\n\t\t\tconfirmando = confirm('¿Ya no quieres que esta sea su imagen de perfil?')\n\n\t\tif confirmando\n\n\t\t\taEnviar = {}\n\n\t\t\tif imgParaUsuario\n\t\t\t\taEnviar.imagen_id = imgParaUsuario.id\n\n\t\t\t$http.put('::images-users/cambiar-imagen-un-usuario/'+usuarioElegido.user_id, aEnviar).then((r)->\n\n\t\t\t\tif imgParaUsuario\n\t\t\t\t\tusuarioElegido.imagen_id \t\t= imgParaUsuario.id\n\t\t\t\t\tusuarioElegido.imagen_nombre \t= imgParaUsuario.nombre\n\n\t\t\t\t\t$scope.imagenes_privadas = $filter('filter')($scope.imagenes_privadas, (item)->\n\t\t\t\t\t\treturn item.id != imgParaUsuario.id;\n\t\t\t\t\t)\n\n\t\t\t\t\t$scope.dato.selectedImg = undefined\n\t\t\t\t\t$scope.imagenes_del_usuario.push imgParaUsuario\n\t\t\t\t\ttoastr.success 'Imagen asignada con éxito'\n\t\t\t\telse\n\t\t\t\t\tusuarioElegido.imagen_id \t\t  = null\n\t\t\t\t\tusuarioElegido.imagen_nombre \t= 'default_male.png'\n\t\t\t\t\ttoastr.success 'Imagen quitada con éxito'\n\t\t\t, (r2)->\n\t\t\t\ttoastr.error 'Error al asignar imagen a usuario', 'Problema'\n\t\t\t)\n\n\n\t$scope.cambiarFotoUnUsuario = (usuarioElegido, imgParaUsuario)->\n\n\t\tconfirmando = false\n\t\tif imgParaUsuario\n\t\t\tconfirmando = confirm('Esto quitará la imágen de tu lista. ¿Seguro que deseas cambiar la imagen de este usuario?')\n\t\telse\n\t\t\tconfirmando = confirm('¿Ya no quieres que esta sea su foto oficial?')\n\n\t\tif confirmando\n\n\t\t\taEnviar = {}\n\n\t\t\tif imgParaUsuario\n\t\t\t\taEnviar.imagen_id = imgParaUsuario.id\n\n\t\t\t$http.put('::images-users/cambiar-foto-un-usuario/'+usuarioElegido.user_id, aEnviar).then((r)->\n\n\t\t\t\tif imgParaUsuario\n\t\t\t\t\tusuarioElegido.imagen_id \t\t= imgParaUsuario.id\n\t\t\t\t\tusuarioElegido.foto_nombre \t\t= imgParaUsuario.nombre\n\n\t\t\t\t\t$scope.imagenes_privadas = $filter('filter')($scope.imagenes_privadas, (item)->\n\t\t\t\t\t\treturn item.id != imgParaUsuario.id;\n\t\t\t\t\t)\n\n\t\t\t\t\t$scope.dato.selectedImg = undefined\n\t\t\t\t\t$scope.imagenes_del_usuario.push imgParaUsuario\n\t\t\t\t\ttoastr.success 'Foto asignada con éxito'\n\n\t\t\t\telse\n\t\t\t\t\tusuarioElegido.foto_id \t\t  = null\n\t\t\t\t\tusuarioElegido.foto_nombre \t= 'default_male.png'\n\t\t\t\t\ttoastr.success 'Foto quitada con éxito'\n\t\t\t, (r2)->\n\t\t\t\ttoastr.error 'Error al asignar foto oficial', 'Problema'\n\t\t\t)\n\n\n\n\n\n\t$scope.cambiarFirmaUnProfe = (profeElegido, imgParaUsuario)->\n\n\t\tconfirmando = false\n\t\tif imgParaUsuario\n\t\t\tconfirmando = confirm('Esto quitará la imágen de tu lista. ¿Seguro que deseas asignar firma a este usuario?')\n\t\telse\n\t\t\tconfirmando = confirm('¿Ya no quieres que sea su firma?')\n\n\t\tif confirmando\n\n\t\t\taEnviar = {}\n\n\t\t\tif imgParaUsuario\n\t\t\t\taEnviar.imagen_id = imgParaUsuario.id\n\n\t\t$http.put('::images-users/cambiar-firma-un-profe/'+profeElegido.profesor_id, aEnviar).then((r)->\n\n\t\t\t\tif imgParaUsuario\n\t\t\t\t\tprofeElegido.firma_id \t\t\t= imgParaUsuario.id\n\t\t\t\t\tprofeElegido.firma_nombre \t\t= imgParaUsuario.nombre\n\n\t\t\t\t\t$scope.imagenes_privadas = $filter('filter')($scope.imagenes_privadas, (item)->\n\t\t\t\t\t\treturn item.id != imgParaUsuario.id;\n\t\t\t\t\t)\n\n\t\t\t\t\t$scope.dato.selectedImg = undefined\n\t\t\t\t\t$scope.imagenes_del_usuario.push imgParaUsuario\n\t\t\t\t\ttoastr.success 'Firma asignada con éxito'\n\t\t\t\telse\n\t\t\t\t\tprofeElegido.firma_id \t\t  = null\n\t\t\t\t\tprofeElegido.firma_nombre \t= null\n\t\t\t\t\ttoastr.success 'Firma quitada con éxito'\n\t\t, (r2)->\n\t\t\ttoastr.error 'Error al asignar firma', 'Problema'\n\t\t)\n\n\n\n\n\n\t$scope.alumSelect = ($item)->\n\t\tfor alu in $scope.alumnos\n\t\t\talu.selected = false\n\t\t$item.selected = true\n\t\t$scope.dato.alumnoElegido = $item\n\n\t\taEnviar = { usuario_id: $item.user_id }\n\n\t\t$http.put('::images-users/imagenes-de-usuario', aEnviar).then((r)->\n\t\t\t\t$scope.imagenes_del_usuario       = r.data\n\t\t\t\t$scope.mostrando_opt_img_de_alum  = true\n\t\t, (r2)->\n\t\t\ttoastr.error 'Error trayendo imagenes del usuario', 'Problema'\n\t\t)\n\n\n\n\n\t$scope.profeSelect = ($item, $model)->\n\n\t\taEnviar = { usuario_id: $item.user_id }\n\n\t\t$http.put('::images-users/imagenes-de-usuario', aEnviar).then((r)->\n\t\t\t\t$scope.imagenes_del_usuario       = r.data\n\t\t\t\t$scope.mostrando_opt_img_de_prof  = true\n\t\t, (r2)->\n\t\t\ttoastr.error 'Error trayendo imagenes del usuario', 'Problema'\n\t\t)\n\n\n\n\n\t$scope.moveImgToMe = ($item, $model)->\n\t\tif $scope.dato.selectedImgDelUsuario\n\t\t\taEnviar = { img_id: $item.id }\n\n\t\t\t$http.put('::images-users/move-img-to-me', aEnviar).then((r)->\n\t\t\t\t$scope.imagenes_privadas.push $item\n\t\t\t\t$scope.imagenes_del_usuario = $filter('filter')($scope.imagenes_del_usuario, (item)->\n\t\t\t\t\t\t\treturn item.id != $item.id;\n\t\t\t\t)\n\t\t\t\t$scope.dato.selectedImgDelUsuario = undefined\n\t\t\t\ttoastr.success 'Ahora la imagen te pertenece.'\n\t\t\t, (r2)->\n\t\t\t\ttoastr.error 'Error mover imagen', 'Problema'\n\t\t\t)\n\t\telse\n\t\t\ttoastr.warning 'Seleccione la imagen que quiere tomar.'\n\n\n\n\n\treturn\n])\n\n\n.filter('filterByNomApell', ['Acentos', (Acentos)->\n\t(alumnos, texto) ->\n\n\n\t\tif texto\n\t\t\tif texto != ''\n\n\t\t\t\talumnos_response = []\n\t\t\t\ttexto = Acentos.remove(texto)\n\n\t\t\t\tfor alum in alumnos\n\n\t\t\t\t\tnomb    = Acentos.remove(alum.nombres)\n\t\t\t\t\tapell   = Acentos.remove(alum.apellidos)\n\n\t\t\t\t\tif (nomb.indexOf(texto) != -1) or (apell.toLowerCase().indexOf(texto) != -1)\n\t\t\t\t\t\talumnos_response.push alum\n\n\t\t\t\treturn alumnos_response\n\n\t\t\telse\n\t\t\t\treturn alumnos\n\t\telse\n\t\t\treturn alumnos\n\n\n])\n"
  ]
}
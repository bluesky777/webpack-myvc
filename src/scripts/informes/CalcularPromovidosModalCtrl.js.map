{
  "version": 3,
  "file": "CalcularPromovidosModalCtrl.js",
  "sourceRoot": "",
  "sources": [
    "CalcularPromovidosModalCtrl.coffee"
  ],
  "names": [],
  "mappings": "AAAA;EAAA,OAAO,CAAC,MAAR,CAAe,cAAf,CAEA,CAAC,UAFD,CAEY,6BAFZ,EAE2C;IAAC,QAAD;IAAW,mBAAX;IAAgC,MAAhC;IAAwC,OAAxC;IAAiD,QAAjD;IAA2D,WAA3D;IAAwE,QAAxE;IAAkF,QAAA,CAAC,MAAD;IAAS,cAAT;IAAyB,IAAzB;IAA+B,KAA/B;IAAsC,MAAtC;IAA8C,SAA9C;IAAyD,MAAzD,CAAA;MAE5H,MAAM,CAAC,IAAP,GAAc;MACd,MAAM,CAAC,MAAP,GAAgB;MAEhB,MAAM,CAAC,aAAP,GAAuB,QAAA,CAAA,CAAA;QAEtB,MAAM,CAAC,gBAAP,GAA4B;QAC5B,MAAM,CAAC,eAAP,GAA2B;QAE3B,MAAM,CAAC,2BAAP,GAAqC;QACrC,MAAM,CAAC,uBAAP,GAAqC;eAErC,MAAM,CAAC,gBAAP,GAA0B,SAAA,CAAU,QAAA,CAAA,CAAA;AAEnC,cAAA;UAAA,IAAG,MAAM,CAAC,2BAAV;YAEC,MAAM,CAAC,2BAAP,GAAqC;YACrC,KAAA,GAAqB,MAAM,CAAC,MAAO,CAAA,MAAM,CAAC,uBAAP;YACnC,MAAM,CAAC,gBAAP,GAA2B,QAAA,CAAS,CAAC,MAAM,CAAC,uBAAP,GAA+B,CAAhC,CAAA,GAAqC,GAArC,GAA2C,MAAM,CAAC,MAAM,CAAC,MAAlE;mBAE3B,KAAK,CAAC,GAAN,CAAU,6BAAV;IAAyC;cAAC,QAAA,EAAU,KAAK,CAAC;YAAjB,CAAzC,CAAoE,CAAC,IAArE,CAA0E,QAAA,CAAC,CAAD,CAAA;cACzE,MAAM,CAAC,OAAP,CAAe,KAAK,CAAC,MAAN,GAAe,sBAA9B;cACA,MAAM,CAAC,2BAAP,GAAqC;cACrC,MAAM,CAAC,uBAAP,GAAqC,MAAM,CAAC,uBAAP,GAAiC;cACtE,IAAG,MAAM,CAAC,uBAAP,KAAkC,MAAM,CAAC,MAAM,CAAC,MAAnD;uBACC,SAAS,CAAC,MAAV,CAAiB,MAAM,CAAC,gBAAxB,EADD;;YAJyE,CAA1E;IAOE,QAAA,CAAC,EAAD,CAAA;cACD,MAAM,CAAC,2BAAP,GAAqC;qBACrC,MAAM,CAAC,OAAP,CAAe,sBAAA,GAAyB,KAAK,CAAC,MAA/B,GAAwC,0BAAvD;YAFC,CAPF,EAND;;QAFmC,CAAV;IAoBxB,EApBwB;MARJ;MAgCvB,MAAM,CAAC,aAAP,GAAuB,QAAA,CAAC,KAAD,CAAA;QAEtB,IAAG,KAAK,CAAC,UAAT;iBACC,OAAO,CAAC,GAAR,CAAY,YAAZ,EADD;SAAA,MAAA;UAGC,KAAK,CAAC,UAAN,GAAmB;iBAEnB,KAAK,CAAC,GAAN,CAAU,6BAAV;IAAyC;YAAC,QAAA,EAAU,KAAK,CAAC;UAAjB,CAAzC,CAAoE,CAAC,IAArE,CAA0E,QAAA,CAAC,CAAD,CAAA;YACzE,MAAM,CAAC,OAAP,CAAe,KAAK,CAAC,MAAN,GAAe,sBAA9B;mBACA,KAAK,CAAC,UAAN,GAAmB;UAFsD,CAA1E;IAIE,QAAA,CAAC,EAAD,CAAA;YACD,KAAK,CAAC,UAAN,GAAmB;mBACnB,MAAM,CAAC,OAAP,CAAe,sBAAA,GAAyB,KAAK,CAAC,MAA9C;UAFC,CAJF,EALD;;MAFsB;MAmBvB,MAAM,CAAC,EAAP,GAAY,QAAA,CAAA,CAAA;eACX,cAAc,CAAC,KAAf,CAAA;MADW;aAKZ,MAAM,CAAC,MAAP,GAAgB,QAAA,CAAA,CAAA;eACf,cAAc,CAAC,OAAf,CAAuB,QAAvB;MADe;IA7D4G,CAAlF;GAF3C;AAAA",
  "sourcesContent": [
    "angular.module('myvcFrontApp')\n\n.controller('CalcularPromovidosModalCtrl', ['$scope', '$uibModalInstance', 'USER', '$http', 'toastr', '$interval', 'grupos', ($scope, $modalInstance, USER, $http, toastr, $interval, grupos)->\n\n\t$scope.USER = USER\n\t$scope.grupos = grupos\n\t\n\t$scope.calcularTodos = ()->\n\n\t\t$scope.porcentajePromov   = 0\n\t\t$scope.bloqueadoPromov   = true\n\n\t\t$scope.grupo_temp_calculado_promov = true\n\t\t$scope.grupo_temp_indce_promov     = 0\n\n\t\t$scope.intervalo_promov = $interval(()->\n\n\t\t\tif $scope.grupo_temp_calculado_promov\n\n\t\t\t\t$scope.grupo_temp_calculado_promov = false\n\t\t\t\tgrupo \t\t\t\t\t\t\t      = $scope.grupos[$scope.grupo_temp_indce_promov]\n\t\t\t\t$scope.porcentajePromov \t= parseInt(($scope.grupo_temp_indce_promov+1) * 100 / $scope.grupos.length)\n\n\t\t\t\t$http.put('::promovidos/calcular-grupo', {grupo_id: grupo.grupo_id}).then((r)->\n\t\t\t\t\ttoastr.success grupo.nombre + ' calculado con éxito'\n\t\t\t\t\t$scope.grupo_temp_calculado_promov = true\n\t\t\t\t\t$scope.grupo_temp_indce_promov     = $scope.grupo_temp_indce_promov + 1\n\t\t\t\t\tif $scope.grupo_temp_indce_promov == $scope.grupos.length\n\t\t\t\t\t\t$interval.cancel($scope.intervalo_promov)\n\n\t\t\t\t, (r2)->\n\t\t\t\t\t$scope.grupo_temp_calculado_promov = true\n\t\t\t\t\ttoastr.warning 'No se pudo calcular ' + grupo.nombre + '. Intentaremos de nuevo.'\n\t\t\t\t)\n\n\t\t, 20)\n\n\n\n\t$scope.calcularGrupo = (grupo)->\n\n\t\tif grupo.calculando\n\t\t\tconsole.log('Calculando')\n\t\telse\n\t\t\tgrupo.calculando = true\n\t\t\t\n\t\t\t$http.put('::promovidos/calcular-grupo', {grupo_id: grupo.grupo_id}).then((r)->\n\t\t\t\ttoastr.success grupo.nombre + ' calculado con éxito'\n\t\t\t\tgrupo.calculando = false\n\n\t\t\t, (r2)->\n\t\t\t\tgrupo.calculando = false\n\t\t\t\ttoastr.warning 'No se pudo calcular ' + grupo.nombre\n\t\t\t)\n\n\n\n\n\t$scope.ok = ()->\n\t\t$modalInstance.close()\n\n\n\n\t$scope.cancel = ()->\n\t\t$modalInstance.dismiss('cancel')\n\n])\n\n\n"
  ]
}
{
  "version": 3,
  "file": "ActaEvaluacionPromocionCtrl.js",
  "sourceRoot": "",
  "sources": [
    "ActaEvaluacionPromocionCtrl.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "angular.module('myvcFrontApp')\n\n.controller('ActaEvaluacionPromocionCtrl',['$scope', '$interval', 'App', 'Perfil', 'datos', '$state', '$filter', '$uibModal', '$http', 'toastr', ($scope, $interval, App, Perfil, datos, $state, $filter, $modal, $http, toastr)->\n  $scope.grupos       = datos.data.grupos\n  $scope.year         = datos.data.year\n  $scope.USER         = Perfil.User()\n  $scope.perfilPath   = App.images+'perfil/'\n  $scope.views \t\t\t\t= App.views\n  $scope.dato         = {}\n\n  $scope.dato.texto_acta_eval    = $scope.year.texto_acta_eval\n\n  fecha = new Date();\n  $scope.dato.hora_acta = fecha\n  $scope.dato.dia_acta  = fecha\n\n\n  $scope.cambia_texto_informativo = ()->\n\n    $http.put('::actas-evaluacion/cambiar-descripcion', {texto_acta_eval: data.texto_acta_eval }).then((r)->\n      toastr.success('Texto guardado')\n    , (r2)->\n      toastr.warning 'No se pudo guardar texto.', 'Problema'\n    )\n\n\n\n\n\n  $scope.verAlumnos = (alumnos)->\n    modalInstance = $modal.open({\n      templateUrl: '==informes/verAlumnosActaModal.tpl.html'\n      controller: 'VerAlumnosActaCtrl'\n      size: 'lg'\n      resolve:\n        alumnos: ()->\n          alumnos\n    })\n    modalInstance.result.then( (alum)->\n      console.log('Editado')\n    , ()->\n      # nada\n    )\n\n\n\n\n  $scope.editarAlumno = (alumno)->\n    modalInstance = $modal.open({\n      templateUrl: '==informes/editarActaEvaluacionModal.tpl.html'\n      controller: 'EditarActaEvaluacionCtrl'\n      size: 'lg'\n      resolve:\n        alumno: ()->\n          alumno\n    })\n    modalInstance.result.then( (alum)->\n      console.log('Editado')\n    , ()->\n      # nada\n    )\n\n\n  $scope.$emit 'cambia_descripcion', 'Acta de evaluación y promoción ' + $scope.USER.year\n\n])\n\n\n\n\n\n.controller('VerAlumnosActaCtrl', ['$scope', '$uibModalInstance', 'alumnos', '$http', 'toastr', 'App', ($scope, $modalInstance, alumnos, $http, toastr, App)->\n\n  $scope.perfilPath \t= App.images+'perfil/'\n  $scope.views \t\t\t\t= App.views\n  $scope.data         = {}\n  $scope.alumnos      = alumnos\n\n\n  for alumno in alumnos\n    if alumno.fecha_nac\n      alumno.fecha_nac = new Date(alumno.fecha_nac)\n\n    if alumno.fecha_matricula\n      alumno.fecha_matricula = new Date(alumno.fecha_matricula)\n\n    if alumno.fecha_retiro\n      alumno.fecha_retiro = new Date(alumno.fecha_retiro)\n\n    $scope.alumno \t\t  = alumno\n\n\n\n\n  $scope.guardarValor = (rowEntity, colDef, newValue, year_id)->\n    datos = {}\n\n    if colDef == \"sexo\"\n      newValue = newValue.toUpperCase()\n      if !(newValue == 'M' or newValue == 'F')\n        toastr.warning 'Debe usar M o F'\n        rowEntity.sexo = $scope.alum_copy['sexo']\n        return\n\n    if colDef == \"estrato\"\n      if newValue < 0 or newValue > 9\n        toastr.warning 'Valor no admitido'\n        rowEntity.estrato = $scope.alum_copy['estrato']\n        return\n\n\n    datos.alumno_id = rowEntity.alumno_id\n    datos.propiedad = colDef\n    datos.valor \t\t= newValue\n    datos.year_id \t= rowEntity.year_id\n\n    if year_id\n      datos.year_id = year_id\n\n    $http.put('::alumnos/guardar-valor', datos ).then((r)->\n      toastr.success 'Dato actualizado con éxito'\n    , (r2)->\n      rowEntity[colDef] = $scope.alum_copy[colDef]\n      toastr.error 'Cambio no guardado', 'Error'\n    )\n\n\n\n  $scope.ok = ()->\n    $modalInstance.close(alumno)\n\n])\n\n\n\n.controller('EditarActaEvaluacionCtrl', ['$scope', '$uibModalInstance', 'alumno', '$http', 'toastr', 'App', ($scope, $modalInstance, alumno, $http, toastr, App)->\n\n  $scope.perfilPath \t= App.images+'perfil/'\n  $scope.views \t\t\t\t= App.views\n  $scope.data         = {}\n\n  if alumno.fecha_nac\n    alumno.fecha_nac = new Date(alumno.fecha_nac)\n\n  if alumno.fecha_matricula\n    alumno.fecha_matricula = new Date(alumno.fecha_matricula)\n\n  if alumno.fecha_retiro\n    alumno.fecha_retiro = new Date(alumno.fecha_retiro)\n\n  $scope.alumno \t\t  = alumno\n\n  $http.put('::actas-evaluacion/detalle', {alumno_id: alumno.alumno_id, grupo_id: alumno.grupo_id }).then((r)->\n    $scope.alumnos      = r.data.alumnos\n    $scope.matriculas   = r.data.matriculas\n  , (r2)->\n    toastr.warning 'No se pudo traer detalles.', 'Problema'\n  )\n\n\n\n\n  $scope.guardarValor = (rowEntity, colDef, newValue, year_id)->\n    datos = {}\n\n    if colDef == \"sexo\"\n      newValue = newValue.toUpperCase()\n      if !(newValue == 'M' or newValue == 'F')\n        toastr.warning 'Debe usar M o F'\n        rowEntity.sexo = $scope.alum_copy['sexo']\n        return\n\n    if colDef == \"estrato\"\n      if newValue < 0 or newValue > 9\n        toastr.warning 'Valor no admitido'\n        rowEntity.estrato = $scope.alum_copy['estrato']\n        return\n\n\n    datos.alumno_id = rowEntity.alumno_id\n    datos.propiedad = colDef\n    datos.valor \t\t= newValue\n    datos.year_id \t= rowEntity.year_id\n\n    if year_id\n      datos.year_id = year_id\n\n    $http.put('::alumnos/guardar-valor', datos ).then((r)->\n      toastr.success 'Dato actualizado con éxito'\n    , (r2)->\n      rowEntity[colDef] = $scope.alum_copy[colDef]\n      toastr.error 'Cambio no guardado', 'Error'\n    )\n\n\n\n  $scope.ok = ()->\n    $modalInstance.close(alumno)\n\n])\n"
  ]
}
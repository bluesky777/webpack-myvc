{
  "version": 3,
  "file": "DisciplinaCtrl.js",
  "sourceRoot": "",
  "sources": [
    "DisciplinaCtrl.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "'use strict'\n\nangular.module('myvcFrontApp')\n\n.controller('DisciplinaCtrl', ['$scope', 'toastr', '$http', '$uibModal', '$state', '$filter', 'App', 'AuthService', 'escalas', 'EscalasValorativasServ', 'ProfesoresServ', '$cookies', ($scope, toastr, $http, $modal, $state, $filter, App, AuthService, escalas, EscalasValorativasServ, ProfesoresServ, $cookies)->\n\n  AuthService.verificar_acceso()\n\n  $scope.perfilPath \t  \t= App.images+'perfil/'\n  $scope.views \t\t      \t= App.views\n  $scope.nota_minima_aceptada = parseInt($scope.USER.nota_minima_aceptada)\n  $scope.escalas \t\t\t\t\t= escalas\n  $scope.escala_maxima \t\t= EscalasValorativasServ.escala_maxima()\n  $scope.config_infor \t  = {}\n  $scope.datos \t\t      \t= {\n    grupo: ''\n  }\n\n  if $cookies.getObject 'config'\n    $scope.config_infor = $cookies.getObject 'config'\n  else\n    $scope.config_infor.orientacion   = 'vertical'\n\n\n\n\n  if localStorage.inmovible_activado\n    $scope.inmovible_activado = (localStorage.inmovible_activado == 'true')\n  else\n    $scope.inmovible_activado = true\n\n\n  $scope.toggleMostrarDetalle = (alumno, prop)->\n    alumno[prop] = !alumno[prop]\n\n\n  $scope.traerProceso = ()->\n    grupo_id = $scope.datos.grupo.id\n\n    $http.put('::disciplina/alumnos', {grupo_id: grupo_id}).then((r)->\n      $scope.alumnos = r.data.alumnos\n      for alumno in $scope.alumnos\n        for unif in alumno.uniformes_per1\n          unif.fecha_hora = new Date(unif.fecha_hora.replace(/-/g, '\\/'))\n        for unif in alumno.uniformes_per2\n          unif.fecha_hora = new Date(unif.fecha_hora.replace(/-/g, '\\/'))\n        for unif in alumno.uniformes_per3\n          unif.fecha_hora = new Date(unif.fecha_hora.replace(/-/g, '\\/'))\n        for unif in alumno.uniformes_per4\n          unif.fecha_hora = new Date(unif.fecha_hora.replace(/-/g, '\\/'))\n\n    , (r2)->\n      toastr.error('No se trajo los alumnos')\n    )\n\n\n  $scope.crearFalta = (alumno, periodo, per_num)->\n\n    modalInstance = $modal.open({\n      templateUrl: '==comportamiento/crearFaltaModal.tpl.html'\n      controller: 'CrearFaltaCtrl'\n      size: 'lg'\n      scope: $scope\n      resolve:\n        alumno: ()->\n          alumno\n        per_num: ()->\n          per_num\n        periodos: ()->\n          $scope.periodos\n        config: ()->\n          $scope.config\n        profesores: ()->\n          $scope.profesores\n        ordinales: ()->\n          $scope.ordinales\n        creando: ()->\n          true\n    })\n    modalInstance.result.then( (ficha)->\n      #console.log($scope.alumnos)\n    , ()->\n      #console.log($scope.alumnos)\n    )\n\n\n\n  $scope.verFaltasModal = (alumno, periodo, per_num, tipo_falta_num)->\n    periodo.editando = false\n\n    modalInstance = $modal.open({\n      templateUrl: '==comportamiento/crearFaltaModal.tpl.html'\n      controller: 'CrearFaltaCtrl'\n      size: 'lg'\n      scope: $scope\n      resolve:\n        alumno: ()->\n          alumno\n        per_num: ()->\n          per_num\n        periodos: ()->\n          $scope.periodos\n        config: ()->\n          $scope.config\n        profesores: ()->\n          $scope.profesores\n        ordinales: ()->\n          $scope.ordinales\n        creando: ()->\n          false\n    })\n    modalInstance.result.then( (ficha)->\n      #console.log($scope.alumnos)\n    , ()->\n      #console.log($scope.alumnos)\n    )\n\n\n\n  $scope.verUniformesModal = (alumno, per_num)->\n\n    modalInstance = $modal.open({\n      templateUrl: '==comportamiento/uniformesAlumnoPeriodoModal.tpl.html'\n      controller: 'verUniformesAlumnoPeriodoModal'\n      size: 'lg'\n      scope: $scope\n      resolve:\n        alumno: ()->\n          alumno\n        per_num: ()->\n          per_num\n        periodos: ()->\n          $scope.periodos\n        config: ()->\n          $scope.config\n        profesores: ()->\n          $scope.profesores\n    })\n    modalInstance.result.then( (ficha)->\n      #console.log($scope.alumnos)\n    , ()->\n      #console.log($scope.alumnos)\n    )\n\n\n  $scope.toggleInmovible = ()->\n    $scope.inmovible_activado \t\t\t  = !$scope.inmovible_activado\n    localStorage.inmovible_activado \t= $scope.inmovible_activado\n    if !$scope.inmovible_activado\n      $('td.fixed-cell').css( {'transform': 'translate(0, 0)'});\n\n\n  $scope.irComportamientoGrupo = ()->\n    $state.go('panel.comportamiento', {grupo_id: $scope.datos.grupo.id})\n\n\n\n\n  $http.put('::grupos/con-disciplina').then((r)->\n\n    matr_grupo = 0\n\n    if localStorage.matr_grupo\n      matr_grupo = parseInt(localStorage.matr_grupo)\n\n    $scope.grupos \t\t              = r.data.grupos\n    $scope.config \t\t              = r.data.config\n    $scope.ordinales \t              = r.data.ordinales\n    $scope.descripciones_typeahead \t= r.data.descripciones_typeahead\n    $scope.year \t                  = r.data.year\n\n    for grupo in $scope.grupos\n      if grupo.id == matr_grupo\n        $scope.datos.grupo = grupo\n        grupo.active = true\n\n    $scope.traerProceso()\n\n  , ()->\n    toastr.error('No se pudo traer los grupos y datos')\n  )\n\n  ProfesoresServ.contratos().then((r)->\n    $scope.profesores = r\n  , (r2)->\n    toastr.error 'No se pudo traer los profesores.'\n  )\n\n\n  $scope.selectGrupo = (grupo)->\n    localStorage.matr_grupo = grupo.id\n    $scope.datos.grupo \t\t= grupo\n\n    for grup in $scope.grupos\n      grup.active = false\n\n    grupo.active = true\n\n    $scope.traerProceso()\n\n\n\n\n\n  ################################\n  ######## Informes ##############\n  ################################\n\n  $scope.$watch 'config_infor', (newVal, oldVal)->\n    $cookies.putObject 'config', newVal\n    $scope.$broadcast 'change_config'\n  , true\n\n  $scope.$broadcast 'change_config'\n\n  $scope.verSituacionesPorGrupos = ()->\n    $state.go 'panel.disciplina.ver-situaciones-por-grupos', {reload: true}\n\n\n  $scope.verObservadorPeriodo= ()->\n    $state.go 'panel.disciplina.ver-observador-periodo', {grupo_id: $scope.datos.grupo.id}, {reload: true}\n\n  $scope.verObservadorCompleto= ()->\n    $state.go 'panel.disciplina.ver-observador-completo', {grupo_id: $scope.datos.grupo.id}, {reload: true}\n\n\n\n\n])\n\n\n"
  ]
}
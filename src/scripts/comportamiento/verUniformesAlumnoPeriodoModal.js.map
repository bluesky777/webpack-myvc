{
  "version": 3,
  "file": "verUniformesAlumnoPeriodoModal.js",
  "sourceRoot": "",
  "sources": [
    "verUniformesAlumnoPeriodoModal.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "angular.module('myvcFrontApp')\n\n\n.controller('verUniformesAlumnoPeriodoModal', ['$scope', '$uibModalInstance', 'alumno', 'per_num', 'periodos', 'config', 'profesores', '$http', 'toastr', 'App', 'AuthService', ($scope, $modalInstance, alumno, per_num, periodos, config,  profesores, $http, toastr, App, AuthService)->\n  $scope.alumno \t\t    = alumno\n  $scope.datos          = {}\n  $scope.config         = config\n  $scope.periodos \t\t  = periodos\n  $scope.profesores \t  = profesores\n  $scope.perfilPath \t  = App.images+'perfil/'\n  $scope.hasRoleOrPerm  = AuthService.hasRoleOrPerm\n  $scope.per_num        = per_num\n\n\n  for peri in $scope.periodos\n    peri.activo = false\n    if peri.numero == per_num\n      peri.activo \t\t\t\t\t\t= true\n      peri.creando \t\t\t\t\t\t= false # creando\n      $scope.datos.periodo \t\t= peri\n\n\n\n  $scope.verAgregarUniforme = (alumno)->\n    alumno.new_uni = {\n      fecha_hora: new Date()\n    }\n    alumno.creandoUniforme = !alumno.creandoUniforme\n    return\n\n  $scope.cancelarGuardarUniforme = (alumno)->\n    alumno.guardando_uniforme = false\n    alumno.creandoUniforme = false\n\n\n  # Crear uniforme en la nube\n  $scope.guardarUniforme = (alumno)->\n    if alumno.guardando_uniforme\n      return\n\n    alumno.guardando_uniforme = true\n\n    alumno.new_uni.alumno_id = alumno.alumno_id\n    alumno.new_uni.periodo_id = $scope.datos.periodo.id\n    #alumno.new_uni.asignatura_id = $scope.asignatura_actual.asignatura_id\n    #alumno.new_uni.materia = $scope.asignatura_actual.materia\n    alumno.new_uni.fecha_hora = alumno.new_uni.fecha_hora.yyyymmdd() + ' ' + window.fixHora(alumno.new_uni.fecha_hora);\n\n    $http.put('::uniformes/agregar', alumno.new_uni ).then((r)->\n      console.log(alumno, per_num)\n      alumno.guardando_uniforme = false\n      r.data.uniforme.fecha_hora = new Date(r.data.uniforme.fecha_hora.replace(/-/g, '\\/'))\n      alumno['uniformes_per'+per_num].push(r.data.uniforme)\n      alumno.creandoUniforme = false\n    ,() ->\n      toastr.error('Error agregando uniformes')\n      alumno.guardando_uniforme = false\n      alumno.creandoUniforme = false\n    )\n    return\n    \n    \n  $scope.editarUniforme = (uniforme, alumno)->\n    uniforme.editando = !uniforme.editando\n\n    \n  $scope.cancelarGuardarUniformeEditado = (uniforme)->\n    uniforme.guardando = false\n    uniforme.editando = false\n\n\n  $scope.guardarUniformeEditado = (uniforme, alumno)->\n    if uniforme.guardando\n      return\n\n    uniforme.guardando = true\n\n    $http.put('::uniformes/actualizar', uniforme ).then((r)->\n      uniforme.guardando = false\n      toastr.success('Uniforme actualizado.')\n      uniforme.editando = false\n    ,() ->\n      toastr.error('Error actualizado uniforme.')\n      uniforme.guardando = false\n    )\n    return\n\n  $scope.eliminarUniforme = (uniforme, alumno)->\n    res = confirm('Â¿Seguro que deseas eliminar este registro de uniforme?')\n    \n    if res\n      $http.put('::uniformes/eliminar', {uniforme_id: uniforme.id, alumno_id: alumno.alumno_id }).then((r)->\n        alumno['uniformes_per'+per_num] = r.data.uniformes\n      , (r2)->\n        toastr.warning 'No se pudo cambiar.', 'Problema'\n      )\n\n\n\n  $scope.ok = ()->\n    $modalInstance.close($scope.alumno)\n\n\n])\n\n"
  ]
}
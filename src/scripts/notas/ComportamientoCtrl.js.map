{
  "version": 3,
  "file": "ComportamientoCtrl.js",
  "sourceRoot": "",
  "sources": [
    "ComportamientoCtrl.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "angular.module('myvcFrontApp')\n.controller('ComportamientoCtrl', ['$scope', '$filter', '$state', 'comportamiento', '$uibModal', 'App', '$http', 'AuthService', 'toastr', 'EscalasValorativasServ', ($scope, $filter, $state, comportamiento, $modal, App, $http, AuthService, toastr, EscalasValorativasServ) ->\n\n\tAuthService.verificar_acceso()\n\n\t$scope.perfilPath \t= App.images+'perfil/'\n\t$scope.profesor_id \t= localStorage.profesor_id\n\t\n\n\t$scope.frases \t= comportamiento[0]\n\t$scope.alumnos \t= comportamiento[1]\n\t$scope.grupo \t  = comportamiento[2]\n\t$scope.hasRoleOrPerm  = AuthService.hasRoleOrPerm\n\t$scope.tipos \t= [\n\t\t{tipo_frase:\t'Todas'}\n\t\t{tipo_frase:\t'Debilidad'}\n\t\t{tipo_frase:\t'Amenaza'}\n\t\t{tipo_frase:\t'Oportunidad'}\n\t\t{tipo_frase:\t'Fortaleza'}\n\t]\n\n\n\tEscalasValorativasServ.escalas().then((r)->\n\t\t$scope.escalas = r\n\t\t$scope.escala_maxima = EscalasValorativasServ.escala_maxima()\n\t, (r2)->\n\t\tconsole.log 'No se trajeron las escalas valorativas', r2\n\t)\n\n\n\t$scope.fraseCheck = (texto)->\n\t\t$scope.verificandoFrase = true\n\t\treturn $http.put('::nota_comportamiento/frases-check', {texto: texto}).then((r)->\n\t\t\t$scope.frases_match \t\t  = r.data.frases\n\t\t\t$scope.verificandoFrase \t= false\n\t\t\treturn $scope.frases_match.map((item)->\n\t\t\t\treturn item.frase\n\t\t\t)\n\t\t)\n\t\t\n\t################################\n\t# LIBRO ROJO\n\t\t\n\t$scope.comprobadorLibro = (alumno)->\n\t\t# para el badge\n\t\talumno.libro.per1_conta = 0\n\t\talumno.libro.per1_conta = if alumno.libro.per1_col1 then alumno.libro.per1_conta+1 else alumno.libro.per1_conta\n\t\talumno.libro.per1_conta = if alumno.libro.per1_col2 then alumno.libro.per1_conta+1 else alumno.libro.per1_conta\n\t\talumno.libro.per1_conta = if alumno.libro.per1_col3 then alumno.libro.per1_conta+1 else alumno.libro.per1_conta\n\n\t\talumno.libro.per2_conta = 0\n\t\talumno.libro.per2_conta = if alumno.libro.per2_col1 then alumno.libro.per2_conta+1 else alumno.libro.per2_conta\n\t\talumno.libro.per2_conta = if alumno.libro.per2_col2 then alumno.libro.per2_conta+1 else alumno.libro.per2_conta\n\t\talumno.libro.per2_conta = if alumno.libro.per2_col3 then alumno.libro.per2_conta+1 else alumno.libro.per2_conta\n\n\t\talumno.libro.per3_conta = 0\n\t\talumno.libro.per3_conta = if alumno.libro.per3_col1 then alumno.libro.per3_conta+1 else alumno.libro.per3_conta\n\t\talumno.libro.per3_conta = if alumno.libro.per3_col2 then alumno.libro.per3_conta+1 else alumno.libro.per3_conta\n\t\talumno.libro.per3_conta = if alumno.libro.per3_col3 then alumno.libro.per3_conta+1 else alumno.libro.per3_conta\n\n\t\talumno.libro.per4_conta = 0\n\t\talumno.libro.per4_conta = if alumno.libro.per4_col1 then alumno.libro.per4_conta+1 else alumno.libro.per4_conta\n\t\talumno.libro.per4_conta = if alumno.libro.per4_col2 then alumno.libro.per4_conta+1 else alumno.libro.per4_conta\n\t\talumno.libro.per4_conta = if alumno.libro.per4_col3 then alumno.libro.per4_conta+1 else alumno.libro.per4_conta\n\n\t\t\n\tfor alumno in $scope.alumnos\n\t\talumno.periodoLibro = 1 # Cambiar por el USER.periodo\n\t\t$scope.comprobadorLibro(alumno)\n\t\t\n\t$scope.selectPeriodo = (per, alum)->\n\t\talum.periodoLibro = per\n\t\t\n\t$scope.cambiaLibro = (valor, alum, campo)->\n\t\t$http.put('::nota_comportamiento/guardar-libro', {valor: valor, campo: campo, libro_id: alum.libro.id}).then((r)->\n\t\t\t$scope.comprobadorLibro(alum)\n\t\t\ttoastr.success 'Cambios guardados'\n\t\t, (item)->\n\t\t\ttoastr.error 'Error guardando libro' \n\t\t)\n\n\t\n\t################################\n\t# Comportamiento boletín\n\t$scope.addFrase = (alumno)->\n\n\t\talumno.agregando_frase = true\n\n\t\tif alumno.newfrase\n\t\t\tdato =\n\t\t\t\tcomportamiento_id:\talumno.nota.id\n\t\t\t\tfrase_id:\t\t\talumno.newfrase.id\n\n\t\t\t$http.post('::definiciones_comportamiento/store', dato).then((r)->\n\t\t\t\ttoastr.success 'Frase agregada con éxito'\n\t\t\t\talumno.newfrase.definicion_id = r.data.id\n\t\t\t\talumno.definiciones.push alumno.newfrase\n\t\t\t\talumno.newfrase = null\n\t\t\t\talumno.agregando_frase = false\n\t\t\t, (r2)->\n\t\t\t\ttoastr.error 'No se pudo agregar la frase', 'Problema'\n\t\t\t\talumno.agregando_frase = false\n\t\t\t)\n\t\telse\n\t\t\ttoastr.warning 'Debe seleccionar frase'\n\t\t\treturn\n\n\n\t$scope.addFraseEscrita = (alumno)->\n\n\t\talumno.agregando_frase = true\n\n\t\tif alumno.newfrase_escrita != ''\n\t\t\tdato =\n\t\t\t\tcomportamiento_id:\talumno.nota.id\n\t\t\t\tfrase:\t\t\t\t      alumno.newfrase_escrita\n\n\t\t\t$http.post('::definiciones_comportamiento/store-escrita', dato).then((r)->\n\t\t\t\ttoastr.success 'Frase agregada con éxito'\n\t\t\t\talumno.newfrase_escrita = ''\n\t\t\t\talumno.definiciones.push r.data\n\t\t\t\talumno.agregando_frase = false\n\t\t\t, (r2)->\n\t\t\t\ttoastr.error 'No se pudo agregar la frase', 'Problema'\n\t\t\t\talumno.agregando_frase = false\n\t\t\t)\n\t\telse\n\t\t\ttoastr.warning 'Debe escribir la frase'\n\t\t\treturn\n\n\n\t$scope.cambiaNota = (nota)->\n\n\t\ttemp = nota.nota\n\n\t\t$http.put('::nota_comportamiento/update/'+nota.id, {nota: nota.nota}).then((r)->\n\t\t\ttoastr.success 'Nota cambiada: ' + nota.nota\n\t\t, (r2)->\n\t\t\ttoastr.error 'No pudimos guardar la nota ' + nota.nota\n\t\t\tnota.nota = temp\n\t\t)\n\n\t$scope.quitarFrase = (definicion, alumno)->\n\t\tdefin_id = if definicion.definicion_id then definicion.definicion_id else definicion.id\n\t\t$http.delete('::definiciones_comportamiento/destroy/' + defin_id).then((r)->\n\t\t\ttoastr.success 'Definicion quitada'\n\t\t\tif definicion.definicion_id\n\t\t\t\talumno.definiciones = $filter('filter')(alumno.definiciones, {definicion_id: '!'+defin_id})\n\t\t\telse\n\t\t\t\talumno.definiciones = $filter('filter')(alumno.definiciones, {id: '!'+defin_id})\n\t\t, (r2)->\n\t\t\ttoastr.error 'No pudimos quitar frase', 'Problema'\n\t\t)\n\n\n])\n\n.filter('porTipoFrase', [ ->\n\t(input, tipo_frase)->\n\n\t\tif tipo_frase == 'Todas' or tipo_frase == undefined then return input\n\n\t\tresultado = []\n\n\t\tfor frase in input\n\n\t\t\tif tipo_frase == frase.tipo_frase\n\n\t\t\t\tresultado.push frase\n\n\n\n\t\treturn resultado\n\n]);\n\n\n\n"
  ]
}
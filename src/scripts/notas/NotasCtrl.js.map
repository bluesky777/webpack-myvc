{
  "version": 3,
  "file": "NotasCtrl.js",
  "sourceRoot": "",
  "sources": [
    "NotasCtrl.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "'use strict'\n\nangular.module('myvcFrontApp')\n.controller('NotasCtrl', ['$scope', 'toastr', '$http', '$uibModal', '$state', '$rootScope', '$filter', 'App', 'AuthService', '$timeout', 'EscalasValorativasServ', '$stateParams', 'NotasServ', ($scope, toastr, $http, $modal, $state, $rootScope, $filter, App, AuthService, $timeout, EscalasValorativasServ, $stateParams, NotasServ) ->\n\n\tAuthService.verificar_acceso()\n\n\t$scope.asignatura \t  = {}\n\t$scope.asignatura_id  = $state.params.asignatura_id\n\t$scope.datos \t\t      = {}\n\t$scope.UNIDAD \t\t    = $scope.USER.unidad_displayname\n\t$scope.SUBUNIDAD \t    = $scope.USER.subunidad_displayname\n\t$scope.UNIDADES \t    = $scope.USER.unidades_displayname\n\t$scope.SUBUNIDADES \t  = $scope.USER.subunidades_displayname\n\t$scope.perfilPath \t  = App.images+'perfil/'\n\t$scope.views \t\t      = App.views\n\t$scope.nota_minima_aceptada = parseInt($scope.USER.nota_minima_aceptada)\n\t$scope.ocultando_ausencias \t= true\n\t$scope.ausencia_edit \t= {} # Para editar en el popover\n\t$scope.tardanza_edit \t= {}\n\t$scope.alumno_aus_tard_edit \t= {}\n\t$scope.opts_picker \t\t= { minDate: new Date('1/1/2017'), showWeeks: false, startingDay: 0 }\n\t$scope.hasRoleOrPerm  = AuthService.hasRoleOrPerm\n\n\tNotasServ.detalladas($stateParams.asignatura_id, $stateParams.profesor_id, true).then((r)->\n\t\t$scope.asignatura\t\t= r.asignatura\n\t\t$scope.alumnos\t\t\t= r.alumnos\n\t\t$scope.unidades \t\t= r.unidades\n\t\t$scope.asignaturas\t\t= r.asignaturas\n\n\t\t$scope.arreglarDatos()\n\n\t\t###\n\t\t$timeout(()->\n\t\t\t$scope.$parent.bigLoader \t= false\n\t\t, 1000)\n\t\t###\n\t, (r2)->\n\t\ttoastr.error 'No se pudo traer las notas con asignaturas.'\n\t)\n\n\n\n\tEscalasValorativasServ.escalas().then((r)->\n\t\t$scope.escalas = r\n\t, (r2)->\n\t\tconsole.log 'No se trajeron las escalas valorativas', r2\n\t)\n\n\t$scope.escala_maxima = EscalasValorativasServ.escala_maxima()\n\n\n\t$scope.arreglarDatos = ()->\n\n\t\t# Las Subunidades están en cada Unidad. Necesito agregarlas juntas en un solo Array\n\t\t$scope.subunidadesunidas = []\n\n\t\tfor unidad in $scope.unidades\n\t\t\tif unidad.subunidades.length == 0\n\t\t\t\t$scope.subunidadesunidas.push {empty: true}\n\t\t\tfor subunidad in unidad.subunidades\n\t\t\t\t$scope.subunidadesunidas.push subunidad\n\n\t\tif localStorage.ocultando_ausencias\n\t\t\t$scope.ocultando_ausencias = (localStorage.ocultando_ausencias == 'true')\n\n\t\tif localStorage.historial_activado\n\t\t\t$scope.historial_activado = (localStorage.historial_activado == 'true')\n\n\t\tif localStorage.inmovible_activado\n\t\t\t$scope.inmovible_activado = (localStorage.inmovible_activado == 'true')\n\t\telse\n\t\t\t$scope.inmovible_activado = true\n\n\n\t\tif localStorage.titulos_activado\n\t\t\t$scope.titulos_activado = (localStorage.titulos_activado == 'true')\n\t\telse\n\t\t\t$timeout(()->\n\t\t\t\t$scope.toggleTitulos()\n\t\t\t, 200)\n\n\n\t\tfor alumno in $scope.alumnos\n\t\t\tfor ausencia in alumno.ausencias\n\t\t\t\tif ausencia.fecha_hora\n\t\t\t\t\tausencia.fecha_hora = new Date(ausencia.fecha_hora)\n\t\t\tfor tardanza in alumno.tardanzas\n\t\t\t\tif tardanza.fecha_hora\n\t\t\t\t\ttardanza.fecha_hora = new Date(tardanza.fecha_hora)\n\n\t\tfor asignat in $scope.asignaturas\n\t\t\tif parseInt(asignat.asignatura_id) == parseInt($scope.asignatura.asignatura_id)\n\t\t\t\tasignat.active = true\n\n\t\t$timeout(()->\n\n\t\t\tif localStorage.tab_horiz_or_verti\n\t\t\t\tif localStorage.tab_horiz_or_verti == 'vertical'\n\t\t\t\t\t$scope.setTabVertically()\n\t\t\t\telse\n\t\t\t\t\t$scope.setTabHorizontally()\n\t\t\telse\n\t\t\t\t$scope.setTabHorizontally()\n\n\t\t, 1)\n\n\n\n\t$scope.setTabVertically = ()->\n\t\tlocalStorage.tab_horiz_or_verti = 'vertical'\n\t\t$scope.tab_horiz_or_verti       = 'vertical'\n\t\tfilas = $('table tr')\n\n\t\tangular.forEach(filas, (value, key)->\n\t\t\tfila \t= $(value);\n\t\t\tinputs \t= fila.find('.input-nota')\n\n\t\t\tangular.forEach(inputs, (value2, key2)->\n\t\t\t\ta = $(value2);\n\t\t\t\ta.attr('tabindex', key2+1)\n\t\t\t)\n\t\t)\n\t\tif $scope.eleFocus\n\t\t\tif $scope.eleFocus.focus\n\t\t\t\t$scope.eleFocus.focus()\n\n\n\n\t$scope.setTabHorizontally = ()->\n\t\tlocalStorage.tab_horiz_or_verti   = 'horizontal'\n\t\t$scope.tab_horiz_or_verti         = 'horizontal'\n\t\tfilas                             = $('.input-nota')\n\n\t\tangular.forEach(filas, (value, key)->\n\t\t\ta = $(value);\n\t\t\ta.attr('tabindex', key+1)\n\t\t)\n\t\tif $scope.eleFocus\n\t\t\t$scope.eleFocus.focus()\n\n\t$scope.onInputFocus = ($event)->\n\t\t$scope.eleFocus = $event.currentTarget\n\n\n\t$scope.traerNotasDeAsignatura = (asignatura)->\n\t\t#$scope.$parent.bigLoader \t= true\n\t\t$state.go('.', {asignatura_id: asignatura.asignatura_id}, {notify: false});\n\n\t\tNotasServ.detalladas(asignatura.asignatura_id, asignatura.profesor_id, false).then((r)->\n\t\t\t$scope.asignatura\t\t= r.asignatura\n\t\t\t$scope.alumnos\t\t\t= r.alumnos\n\t\t\t$scope.unidades \t\t= r.unidades\n\n\t\t\t$scope.arreglarDatos()\n\t\t\t###\n\t\t\t$timeout(()->\n\t\t\t\t$scope.$parent.bigLoader \t= false\n\t\t\t, 500)\n\t\t\t###\n\t\t)\n\n\t\tfor asignat in $scope.asignaturas\n\t\t\tasignat.active = false\n\n\t\tasignatura.active     = true\n\t\t$scope.asignatura_id  = asignatura.asignatura_id\n\n\n\n\t$scope.toggleHistorial = ()->\n\t\t$scope.historial_activado \t\t\t  = !$scope.historial_activado\n\t\tlocalStorage.historial_activado \t= $scope.historial_activado\n\t\tif $scope.historial_activado\n\t\t\ttoastr.info 'Ahora dale doble click a la nota que quieres ver'\n\n\n\t$scope.toggleInmovible = ()->\n\t\t$scope.inmovible_activado \t\t\t  = !$scope.inmovible_activado\n\t\tlocalStorage.inmovible_activado \t= $scope.inmovible_activado\n\t\tif !$scope.inmovible_activado\n\t\t\t$('td.fixed-cell').css( {'transform': 'translate(0, 0)'});\n\n\n\t$scope.toggleTitulos = ()->\n\t\t$scope.titulos_activado \t\t= !$scope.titulos_activado\n\t\tlocalStorage.titulos_activado \t= $scope.titulos_activado\n\n\n\n\t$scope.seleccionarFila = (alumno)->\n\t\tfor alum in $scope.alumnos\n\t\t\talum.seleccionado = false\n\t\talumno.seleccionado = true\n\n\n\n\n\n\n\n\n\t#####################################################################\n\t##############   AUSENCIAS Y TARDANZAS   ############################\n\t#####################################################################\n\n\t$scope.toggleAusencias = ()->\n\t\t$scope.ocultando_ausencias \t\t\t= !$scope.ocultando_ausencias\n\t\tlocalStorage.ocultando_ausencias \t= $scope.ocultando_ausencias\n\n\t$scope.cambiaAusencia = (alumno)->\n\n\t\t# Si incrementó el número\n\t\tif alumno.ausencias_count > alumno.ausencias.length\n\t\t\tpedidas = alumno.ausencias_count - alumno.ausencias.length\n\n\t\t\tfor pedida in [0..pedidas-1]\n\t\t\t\tdatos =\n\t\t\t\t\talumno_id: \t\t\talumno.alumno_id\n\t\t\t\t\tasignatura_id: \t\t$scope.asignatura_id\n\t\t\t\t\tcantidad_ausencia: \t1\n\t\t\t\t# fecha_hora = new Date(numYearActual, parseInt($scope.dato.mes), dia)\n\n\t\t\t\t$http.post('::ausencias/store', datos).then((r)->\n\t\t\t\t\tr \t\t= r.data\n\t\t\t\t\t#r.fecha_hora = new Date(r.fecha_hora)\n\t\t\t\t\talumno.ausencias.push r\n\t\t\t\t, (r2)->\n\t\t\t\t\ttoastr.warning 'No se pudo agregar ausencia.', 'Problema'\n\t\t\t\t)\n\n\t\t# Si bajó el número\n\t\telse if alumno.ausencias_count < alumno.ausencias.length\n\t\t\tpedidas = alumno.ausencias.length - alumno.ausencias_count\n\n\t\t\tfor pedida in [0..pedidas-1]\n\t\t\t\tausencia_id = alumno.ausencias[alumno.ausencias.length - pedida - 1].id\n\n\t\t\t\t$http.delete('::ausencias/destroy/' + ausencia_id).then((r)->\n\t\t\t\t\tr \t\t= r.data\n\t\t\t\t\t#r.fecha_hora = new Date(r.fecha_hora)\n\t\t\t\t\talumno.ausencias = $filter('filter')(alumno.ausencias, { id: '!'+r.id })\n\t\t\t\t, (r2)->\n\t\t\t\t\ttoastr.warning 'No se pudo quitar ausencia.', 'Problema'\n\t\t\t\t)\n\n\n\n\n\t$scope.cambiaTardanza = (alumno)->\n\n\t\tif alumno.tardanzas_count > alumno.tardanzas.length\n\t\t\tpedidas = alumno.tardanzas_count - alumno.tardanzas.length\n\n\t\t\tfor pedida in [0..pedidas-1]\n\t\t\t\tdatos =\n\t\t\t\t\talumno_id: \t\t\talumno.alumno_id\n\t\t\t\t\tasignatura_id: \t\t$scope.asignatura_id\n\t\t\t\t\tcantidad_tardanza: \t1\n\t\t\t\t# fecha_hora = new Date(numYearActual, parseInt($scope.dato.mes), dia)\n\n\t\t\t\t$http.post('::ausencias/store', datos).then((r)->\n\t\t\t\t\tr \t\t= r.data\n\t\t\t\t\t#r.fecha_hora = new Date(r.fecha_hora)\n\t\t\t\t\talumno.tardanzas.push r\n\t\t\t\t, (r2)->\n\t\t\t\t\ttoastr.warning 'No se pudo agregar tardanza.', 'Problema'\n\t\t\t\t)\n\n\t\t# Si bajó el número\n\t\telse if alumno.tardanzas_count < alumno.tardanzas.length\n\t\t\tpedidas = alumno.tardanzas.length - alumno.tardanzas_count\n\n\t\t\tfor pedida in [0..pedidas-1]\n\t\t\t\ttardanza_id = alumno.tardanzas[alumno.tardanzas.length - pedida - 1].id\n\n\t\t\t\t$http.delete('::ausencias/destroy/' + tardanza_id).then((r)->\n\t\t\t\t\tr \t\t= r.data\n\t\t\t\t\t#r.fecha_hora = new Date(r.fecha_hora)\n\t\t\t\t\talumno.tardanzas = $filter('filter')(alumno.tardanzas, { id: '!'+r.id })\n\t\t\t\t, (r2)->\n\t\t\t\t\ttoastr.warning 'No se pudo quitar tardanza.', 'Problema'\n\t\t\t\t)\n\n\n\n\t$scope.clickAusenciaObject = (ausencia, alumno)->\n\t\tausencia.backup \t\t= ausencia.fecha_hora\n\t\tif ausencia.fecha_hora\n\t\t\tausencia.fecha_hora \t= new Date(ausencia.fecha_hora)\n\t\telse\n\t\t\tausencia.fecha_hora \t= new Date()\n\t\t$scope.ausencia_edit \t  = ausencia\n\t\t$scope.alumno_aus_tard_edit \t= alumno\n\t\tausencia.isOpen = !ausencia.isOpen\n\n\n\t$scope.clickTardanzaObject = (tardanza, alumno)->\n\t\ttardanza.backup \t\t= tardanza.fecha_hora\n\t\tif tardanza.fecha_hora\n\t\t\ttardanza.fecha_hora \t= new Date(tardanza.fecha_hora)\n\t\telse\n\t\t\ttardanza.fecha_hora \t= new Date()\n\t\t$scope.tardanza_edit \t= tardanza\n\t\t$scope.alumno_aus_tard_edit \t= alumno\n\t\ttardanza.isOpen = !tardanza.isOpen\n\n\n\n\t$scope.guardarCambioAusencia = (ausencia)->\n\t\tdatos =\n\t\t\tausencia_id: ausencia.id\n\t\t\tfecha_hora: $filter('date')(ausencia.fecha_hora, 'yyyy-MM-dd HH:mm:ss')\n\n\t\t$http.put('::ausencias/guardar-cambios-ausencia', datos).then((r)->\n\t\t\tr \t\t= r.data\n\t\t\t#r.fecha_hora = new Date(r.fecha_hora)\n\t\t\talumno.tardanzas.push r\n\t\t\t$scope.ausencia_edit.isOpen = false\n\t\t\t$scope.tardanza_edit.isOpen = false\n\t\t, (r2)->\n\t\t\ttoastr.warning 'No se pudo agregar tardanza.', 'Problema'\n\t\t)\n\n\n\t$scope.cancelarCambioAusencia = (ausencia_edit)->\n\t\tausencia_edit.isOpen = false\n\t$scope.cancelarCambioTardanza = (tardanza_edit)->\n\t\ttardanza_edit.isOpen = false\n\n\t$scope.eliminarAusencia = (ausencia, alumno_aus_tard_edit)->\n\t\t$http.delete('::ausencias/destroy/' + ausencia.id).then((r)->\n\t\t\tr \t\t= r.data\n\t\t\talumno_aus_tard_edit.ausencias = $filter('filter')(alumno_aus_tard_edit.ausencias, { id: '!'+r.id })\n\t\t\tausencia.isOpen = false\n\t\t, (r2)->\n\t\t\ttoastr.warning 'No se pudo quitar ausencia.', 'Problema'\n\t\t)\n\n\t$scope.eliminarTardanza = (tardanza, alumno_aus_tard_edit)->\n\t\t$http.delete('::ausencias/destroy/' + tardanza.id).then((r)->\n\t\t\tr \t\t= r.data\n\t\t\talumno_aus_tard_edit.tardanzas = $filter('filter')(alumno_aus_tard_edit.tardanzas, { id: '!'+r.id })\n\t\t\ttardanza.isOpen = false\n\t\t, (r2)->\n\t\t\ttoastr.warning 'No se pudo quitar tardanza.', 'Problema'\n\t\t)\n\n\n\n\n\n\n\n\n\t#####################################################################\n\t######################      NOTAS       #############################\n\t#####################################################################\n\n\n\t$scope.cambiaNotaDef = (alumno, nota, nf_id)->\n\n\t\tif nota > $scope.escala_maxima.porc_final or nota == 'undefined' or nota == undefined\n\t\t\ttoastr.error 'No puede ser mayor de ' + $scope.escala_maxima.porc_final, 'NO guardada', {timeOut: 8000}\n\t\t\treturn\n\t\t$http.put('::definitivas_periodos/update', {nf_id: nf_id, nota: nota}).then((r)->\n\t\t\tif !alumno.nota_final.manual\n\t\t\t\talumno.nota_final.manual = 1\n\t\t\ttoastr.success 'Cambiada: ' + nota\n\t\t, (r2)->\n\t\t\tif r2.status == 400\n\t\t\t\ttoastr.warning 'Parece que no tienes permisos', 'Lo sentimos'\n\t\t\telse\n\t\t\t\ttoastr.error 'No pudimos guardar la nota ' + nota, '', {timeOut: 8000}\n\t\t)\n\n\t$scope.toggleNotaFinalRecuperada = (alumno, recuperada, nf_id)->\n\t\t$http.put('::definitivas_periodos/toggle-recuperada', {nf_id: nf_id, recuperada: recuperada}).then((r)->\n\n\t\t\tif recuperada and !alumno.nota_final.manual\n\t\t\t\talumno.nota_final.manual = 1\n\t\t\t\ttoastr.success 'Indicará que es recuperada, así que también será manual.'\n\t\t\telse if recuperada\n\t\t\t\ttoastr.success 'Recuperada'\n\t\t\telse\n\t\t\t\ttoastr.success 'No recuperada'\n\t\t, (r2)->\n\t\t\tif r2.status == 400\n\t\t\t\ttoastr.warning 'Parece que no tienes permisos', 'Lo sentimos'\n\t\t\telse\n\t\t\t\ttoastr.error 'No pudimos cambiar.', '', {timeOut: 8000}\n\t\t)\n\n\t$scope.toggleNotaFinalManual = (alumno, manual, nf_id)->\n\t\t$http.put('::definitivas_periodos/toggle-manual', {nf_id: nf_id, manual: manual}).then((r)->\n\n\t\t\tif !manual and alumno.nota_final.recuperada\n\t\t\t\talumno.nota_final.recuperada = false\n\t\t\t\ttoastr.success 'Será automática y no recuperada.'\n\t\t\telse if manual\n\t\t\t\ttoastr.success 'Nota manual.'\n\t\t\telse\n\t\t\t\ttoastr.success 'Ahora la calculará el sistema.'\n\t\t, (r2)->\n\t\t\tif r2.status == 400\n\t\t\t\ttoastr.warning 'Parece que no tienes permisos', 'Lo sentimos'\n\t\t\telse\n\t\t\t\ttoastr.error 'No pudimos cambiar.', '', {timeOut: 8000}\n\t\t)\n\n\n\n\n\t$scope.cambiaNota = (nota, otra)->\n\t\tif nota.nota > $scope.escala_maxima.porc_final or nota.nota == 'undefined' or nota.nota == undefined\n\t\t\ttoastr.error 'No puede ser mayor de ' + $scope.escala_maxima.porc_final, 'NO guardada', {timeOut: 8000}\n\t\t\treturn\n\t\t$http.put('::notas/update/'+nota.id, {nota: nota.nota}).then((r)->\n\t\t\ttoastr.success 'Cambiada: ' + nota.nota\n\t\t\tnota.updated_at = nota.updated_at\n\t\t, (r2)->\n\t\t\tif r2.status == 400\n\t\t\t\ttoastr.warning 'Parece que no tienes permisos', 'Lo sentimos'\n\t\t\telse\n\t\t\t\ttoastr.error 'No pudimos guardar la nota ' + nota.nota, '', {timeOut: 8000}\n\t\t)\n\n\n\t$scope.showFrases = (alumno)->\n\n\t\tmodalInstance = $modal.open({\n\t\t\ttemplateUrl: '==notas/showFrases.tpl.html'\n\t\t\tcontroller: 'ShowFrasesCtrl'\n\t\t\tsize: 'lg'\n\t\t\tresolve:\n\t\t\t\talumno: ()->\n\t\t\t\t\talumno\n\t\t\t\tfrases: ()->\n\t\t\t\t\t$http.get('::frases')\n\t\t\t\tasignatura: ()->\n\t\t\t\t\t$scope.asignatura\n\t\t\t\tUSER: ()->\n\t\t\t\t\t$scope.USER\n\t\t})\n\t\tmodalInstance.result.then( (datos)->\n\t\t\talumno.frases = datos.frases_asignatura\n\t\t(res)->\n\t\t\tconsole.log res\n\t\t)\n\n\n\t$scope.promedioTotal = (alumno)->\n\n\t\tacumSub = 0\n\n\t\tfor nota in alumno.notas\n\t\t\tvalorNota   = nota.nota * nota.subunidad_porc * nota.unidad_porc\n\t\t\tacumSub     = acumSub + valorNota\n\n\t\talumno.total_definit = parseInt($filter('number')(acumSub, 0))\n\t\treturn $filter('number')(acumSub, 1)\n\n\n\n\t$scope.verDetalleNota = (notaObject, alumno)->\n\t\tif !$scope.historial_activado\n\t\t\treturn\n\n\t\tmodalInstance = $modal.open({\n\t\t\ttemplateUrl: '==notas/notaDetalleModal.tpl.html'\n\t\t\tcontroller: 'NotaDetalleModalCtrl'\n\t\t\tresolve:\n\t\t\t\talumno: ()->\n\t\t\t\t\talumno\n\t\t\t\tnota: ()->\n\t\t\t\t\tnotaObject\n\t\t})\n\t\tmodalInstance.result.then( (r)->\n\t\t\tif r=='Eliminada'\n\t\t\t\tnotaObject.eliminada = true\n\t\t, ()->\n\t\t\t# nada\n\t\t)\n\t\treturn\n\n\n\t$scope.verifClickNotaRapida = (notaObject)->\n\n\t\t$timeout(()->\n\t\t\tif $rootScope.notaRapida.enable\n\t\t\t\tif notaObject.backup\n\t\t\t\t\tif $rootScope.notaRapida.valorNota != notaObject.nota\n\t\t\t\t\t\tnotaObject.backup = notaObject.nota\n\t\t\t\t\t\tnotaObject.nota = $rootScope.notaRapida.valorNota\n\t\t\t\t\telse\n\t\t\t\t\t\ttemp = notaObject.backup\n\t\t\t\t\t\tnotaObject.backup = notaObject.nota\n\t\t\t\t\t\tnotaObject.nota = temp\n\t\t\t\telse\n\t\t\t\t\tnotaObject.backup = notaObject.nota\n\t\t\t\t\tnotaObject.nota = $rootScope.notaRapida.valorNota\n\n\t\t\t\t$scope.cambiaNota(notaObject)\n\n\t\t)\n\t\treturn\n\n\n\t$scope.columnaNotaRapida = (subunidad_id)->\n\n\t\t$timeout(()->\n\n\t\t\tif $rootScope.notaRapida.enable\n\t\t\t\tfor alumno in $scope.alumnos\n\t\t\t\t\tfor nota in alumno.notas\n\t\t\t\t\t\tif nota.subunidad_id == subunidad_id\n\t\t\t\t\t\t\tif nota.backup\n\t\t\t\t\t\t\t\tif $rootScope.notaRapida.valorNota != nota.nota\n\t\t\t\t\t\t\t\t\tnota.backup   = nota.nota\n\t\t\t\t\t\t\t\t\tnota.nota     = $rootScope.notaRapida.valorNota\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\ttemp \t\t\t\t= nota.backup\n\t\t\t\t\t\t\t\t\tnota.backup = nota.nota\n\t\t\t\t\t\t\t\t\tnota.nota \t= temp\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\tnota.backup \t= nota.nota\n\t\t\t\t\t\t\t\tnota.nota \t\t= $rootScope.notaRapida.valorNota\n\n\t\t\t\t\t\t\tcontadorGuardadas = 0\n\t\t\t\t\t\t\t$http.put('::notas/update/'+nota.id, {nota: nota.nota}).then((r)->\n\t\t\t\t\t\t\t\t# Toca hacerlo con promesa\n\t\t\t\t\t\t\t\tcontadorGuardadas = contadorGuardadas + 1\n\t\t\t\t\t\t\t\tif contadorGuardadas == ($scope.alumnos.length-1)\n\t\t\t\t\t\t\t\t\ttoastr.success (contadorGuardadas + 1) + ' notas guardadas.'\n\t\t\t\t\t\t\t, (r2)->\n\t\t\t\t\t\t\t\ttoastr.error 'No pudimos guardar la nota ' + nota.nota, '', {timeOut: 8000}\n\t\t\t\t\t\t\t)\n\t\t\telse\n\t\t\t\ttoastr.info 'Activa la Nota Rápida para cambiar todas las notas de esta columna.'\n\t\t)\n\t\treturn\n\n\n\n\t$scope.filaNotaRapida = (alumno, $index)->\n\n\t\t$timeout(()->\n\t\t\tif $rootScope.notaRapida.enable\n\n\t\t\t\tfor notaObject in alumno.notas\n\n\t\t\t\t\tif notaObject.backup\n\t\t\t\t\t\tif $rootScope.notaRapida.valorNota != notaObject.nota\n\t\t\t\t\t\t\tnotaObject.backup \t= notaObject.nota\n\t\t\t\t\t\t\tnotaObject.nota \t\t= $rootScope.notaRapida.valorNota\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\ttemp \t\t\t\t\t\t\t= notaObject.backup\n\t\t\t\t\t\t\tnotaObject.backup = notaObject.nota\n\t\t\t\t\t\t\tnotaObject.nota \t= temp\n\t\t\t\t\telse\n\t\t\t\t\t\tnotaObject.backup = notaObject.nota\n\t\t\t\t\t\tnotaObject.nota = $rootScope.notaRapida.valorNota\n\n\t\t\t\t\tcontadorGuardadas = 0\n\t\t\t\t\t$http.put('::notas/update/'+notaObject.id, {nota: notaObject.nota}).then((r)->\n\t\t\t\t\t\t# Toca hacerlo con promesa\n\t\t\t\t\t\tcontadorGuardadas = contadorGuardadas + 1\n\t\t\t\t\t\tif contadorGuardadas == (alumno.notas.length-1)\n\t\t\t\t\t\t\ttoastr.success (contadorGuardadas + 1) + ' notas guardadas.'\n\t\t\t\t\t, (r2)->\n\t\t\t\t\t\ttoastr.error 'No pudimos guardar la nota ' + notaObject.nota, '', {timeOut: 8000}\n\t\t\t\t\t)\n\t\t\telse\n\t\t\t\ttoastr.info 'Activa la Nota Rápida para cambiar todas las notas de este alumno.'\n\n\t\t)\n\t\treturn\n\t\t$timeout(()->\n\t\t\tif $rootScope.notaRapida.enable\n\n\t\t\t\tfor subunidad in $scope.subunidadesunidas\n\n\t\t\t\t\tnotaObject = subunidad.notas[$index]\n\n\t\t\t\t\tif notaObject.backup\n\t\t\t\t\t\tif $rootScope.notaRapida.valorNota != notaObject.nota\n\t\t\t\t\t\t\tnotaObject.backup = notaObject.nota\n\t\t\t\t\t\t\tnotaObject.nota = $rootScope.notaRapida.valorNota\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\ttemp = notaObject.backup\n\t\t\t\t\t\t\tnotaObject.backup = notaObject.nota\n\t\t\t\t\t\t\tnotaObject.nota = temp\n\t\t\t\t\telse\n\t\t\t\t\t\tnotaObject.backup = notaObject.nota\n\t\t\t\t\t\tnotaObject.nota = $rootScope.notaRapida.valorNota\n\n\t\t\t\t\tcontadorGuardadas = 0\n\t\t\t\t\t$http.put('::notas/update/'+notaObject.id, {nota: notaObject.nota}).then((r)->\n\t\t\t\t\t\t# Toca hacerlo con promesa\n\t\t\t\t\t\tcontadorGuardadas = contadorGuardadas + 1\n\t\t\t\t\t\tif contadorGuardadas == ($scope.subunidadesunidas.length-1)\n\t\t\t\t\t\t\ttoastr.success (contadorGuardadas + 1) + 'Notas guardadas.'\n\t\t\t\t\t, (r2)->\n\t\t\t\t\t\ttoastr.error 'No pudimos guardar la nota ' + notaObject.nota, '', {timeOut: 8000}\n\t\t\t\t\t)\n\t\t\telse\n\t\t\t\ttoastr.info 'Activa la Nota Rápida para cambiar todas las notas de este alumno.'\n\n\t\t)\n\t\treturn\n\n\treturn\n])\n\n\n.controller('ShowFrasesCtrl', ['$scope', '$uibModalInstance', 'alumno', 'frases', 'asignatura', '$http', 'toastr', '$filter', 'USER', 'AuthService', ($scope, $modalInstance, alumno, frases, asignatura, $http, toastr, $filter, USER, AuthService)->\n\t$scope.alumno     \t\t= alumno\n\t$scope.frases     \t\t= frases.data\n\t$scope.asignatura \t\t= asignatura\n\t$scope.USER       \t\t= USER\n\t$scope.hasRoleOrPerm  = AuthService.hasRoleOrPerm\n\n\t$scope.alumno.newFrase = ''\n\n\n\t$http.get('::frases_asignatura/show/'+alumno.alumno_id+'/'+asignatura.asignatura_id).then((r)->\n\t\t$scope.frases_asignatura = r.data\n\t, (r2)->\n\t\ttoastr.warning 'No se pudo traer frases.', 'Problema'\n\t)\n\n\n\n\t$scope.addFrase = ()->\n\n\t\tif $scope.alumno.newFrase != ''\n\t\t\tdato =\n\t\t\t\talumno_id:\t\talumno.alumno_id\n\t\t\t\tfrase:\t\t\t$scope.alumno.newFrase\n\t\t\t\tasignatura_id:\t$scope.asignatura.asignatura_id\n\n\t\t\t$http.post('::frases_asignatura/store', dato).then((r)->\n\t\t\t\t$scope.frases_asignatura = r.data\n\t\t\t\ttoastr.success 'Frase añadida.'\n\t\t\t, (r2)->\n\t\t\t\ttoastr.warning 'No se pudo añadir frase.', 'Problema'\n\t\t\t)\n\t\telse\n\t\t\ttoastr.warning 'No ha copiado ninguna frase'\n\n\n\t$scope.addFrase_id = ()->\n\n\t\tif $scope.alumno.newFrase_by_id\n\t\t\tdato =\n\t\t\t\talumno_id:\t\talumno.alumno_id\n\t\t\t\tfrase_id:\t\t$scope.alumno.newFrase_by_id.id\n\t\t\t\tasignatura_id:\t$scope.asignatura.asignatura_id\n\n\t\t\t$http.post('::frases_asignatura/store/'+$scope.alumno.newFrase_by_id.id, dato).then((r)->\n\t\t\t\ttoastr.success 'Frase añadida.'\n\t\t\t\t$scope.frases_asignatura = r.data\n\t\t\t, (r2)->\n\t\t\t\ttoastr.warning 'No se pudo añadir frase.', 'Problema'\n\t\t\t)\n\t\telse\n\t\t\ttoastr.warning 'No ha seleccionado frase'\n\n\n\t$scope.quitarFrase = (fraseasig)->\n\t\t$http.delete('::frases_asignatura/destroy/'+fraseasig.id).then((r)->\n\t\t\ttoastr.success 'Frase quitada'\n\t\t\t$scope.frases_asignatura = $filter('filter')($scope.frases_asignatura, {id: '!'+fraseasig.id})\n\t\t, (r2)->\n\t\t\ttoastr.warning 'No se pudo quitar la frase.', 'Problema'\n\t\t)\n\n\n\t$scope.ok = ()->\n\t\t$modalInstance.close({alumno: alumno, frases_asignatura: $scope.frases_asignatura})\n\n\n\t$scope.$on('modal.closing', (event, reason, closed)->\n\t\tswitch (reason)\n\t\t\t# clicked outside\n\t\t\twhen \"backdrop click\"\n\t\t\t\t$modalInstance.close({alumno: alumno, frases_asignatura: $scope.frases_asignatura})\n\t\t\t\tevent.preventDefault();\n\n\t\t\t# cancel button\n\t\t\twhen \"cancel\"\n\t\t\t\t$modalInstance.close({alumno: alumno, frases_asignatura: $scope.frases_asignatura})\n\t\t\t\tevent.preventDefault();\n\n\t\t\t# escape key\n\t\t\twhen \"escape key press\"\n\t\t\t\t$modalInstance.close({alumno: alumno, frases_asignatura: $scope.frases_asignatura})\n\t\t\t\tevent.preventDefault();\n\n\n\t)\n\n])\n\n\n\n.controller('NotaDetalleModalCtrl', ['$scope', '$uibModalInstance', 'alumno', 'nota', 'AuthService', '$http', 'toastr', '$filter', ($scope, $modalInstance, alumno, nota, AuthService, $http, toastr, $filter)->\n\t$scope.alumno         = alumno\n\t$scope.nota     \t    = nota\n\t$scope.hasRoleOrPerm  = AuthService.hasRoleOrPerm\n\n\t$http.put('::historiales/nota-detalle', {nota_id: nota.id}).then((r)->\n\t\t$scope.cambios        = r.data.cambios\n\t\t$scope.nota_detalle   = r.data.nota\n\t, (r2)->\n\t\ttoastr.warning 'No se pudo traer el historial.', 'Problema'\n\t)\n\n\n\n\t$scope.eliminarNota = ()->\n\n\t\t\t$http.delete('::notas/destroy/' + nota.id).then((r)->\n\t\t\t\ttoastr.success 'Nota eliminada', 'Puede recargar y será creada de nuevo'\n\t\t\t\t$modalInstance.close('Eliminada')\n\t\t\t, (r2)->\n\t\t\t\ttoastr.error 'No se pudo eliminar nota.', 'Problema'\n\t\t\t)\n\n\n\t$scope.ok = ()->\n\t\t$modalInstance.close(alumno)\n\n\n])\n\n\n\n"
  ]
}
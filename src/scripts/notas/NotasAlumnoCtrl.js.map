{
  "version": 3,
  "file": "NotasAlumnoCtrl.js",
  "sourceRoot": "",
  "sources": [
    "NotasAlumnoCtrl.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "angular.module('myvcFrontApp')\n.controller('NotasAlumnoCtrl', ['$scope', 'toastr', '$http', '$uibModal', '$state', 'alumnos', 'escalas', '$rootScope', '$filter', 'App', 'AuthService', 'Perfil', 'EscalasValorativasServ', '$cookies', ($scope, toastr, $http, $modal, $state, alumnos, escalas, $rootScope, $filter, App, AuthService, Perfil, EscalasValorativasServ, $cookies) ->\n\n\tAuthService.verificar_acceso()\n\t$scope.hasRoleOrPerm \t  = AuthService.hasRoleOrPerm\n\talumnos \t\t\t\t        = alumnos.data\n\n\tif !alumnos == 'Sin alumnos'\n\t\t$scope.filtered_alumnos = alumnos\n\n\t$scope.perfilPath \t\t  = App.images+'perfil/'\n\t$scope.views\t\t\t      = App.views\n\t$scope.datos\t\t\t      = {grupo: ''}\n\t$scope.USER \t\t\t      = Perfil.User()\n\t$scope.USER.nota_minima_aceptada = parseInt($scope.USER.nota_minima_aceptada)\n\t$scope.escalas \t\t\t    = escalas\n\t$scope.config \t\t\t    = {solo_notas_perdidas: 'todas'}\n\n\n\tif !($scope.hasRoleOrPerm(['alumno', 'acudiente']) || $scope.USER.tipo=='Alumno')\n\t\t$http.get('::grupos').then((r)->\n\t\t\tr = r.data\n\t\t\t$scope.grupos = r\n\t\t)\n\telse if ($scope.hasRoleOrPerm(['alumno', 'acudiente']) || $scope.USER.tipo=='Alumno')\n\t\tconsole.log($scope.mis_acudidos);\n\n\tEscalasValorativasServ.escalas().then((r)->\n\t\t$scope.escalas = r\n\t\t$scope.escala_maxima = EscalasValorativasServ.escala_maxima()\n\t, (r2)->\n\t\tconsole.log 'No se trajeron las escalas valorativas', r2\n\t)\n\n\n\n\t$scope.verBoletin = ()=>\n\n\t\tfor alumno in $scope.mis_acudidos\n\t\t\tif alumno.seleccionado == true\n\n\t\t\t\tif !alumno.pazysalvo\n\t\t\t\t\ttoastr.info 'Lo sentimos. Debe estar a paz y salvo'\n\t\t\t\t\treturn\n\n\t\t\t\t$cookies.putObject 'requested_alumno', [{ alumno_id: alumno.alumno_id, grupo_id: alumno.grupo_id }]\n\n\t\t\t\t$state.go 'panel.boletin_acudiente', {periodo_a_calcular: $scope.USER.numero_periodo}\n\n\n\n\n\t$scope.verMiBoletin = ()=>\n\n\t\t\tif !$scope.USER.pazysalvo\n\t\t\t\ttoastr.info 'Lo sentimos. Debe estar a paz y salvo'\n\t\t\t\treturn\n\n\t\t\t$cookies.putObject 'requested_alumno', [{ alumno_id: $scope.USER.persona_id, grupo_id: $scope.USER.grupo_id }]\n\n\t\t\t$state.go 'panel.boletin_acudiente', {periodo_a_calcular: $scope.USER.numero_periodo}\n\n\n\n\n\n\t$scope.cambiaNotaComport = (nota, periodo)->\n\t\tif $scope.datos.grupo.titular_id != $scope.USER.persona_id and !$scope.hasRoleOrPerm('admin')\n\t\t\ttoastr.warning 'No eres el titular para cambiar comportamiento.'\n\t\t\treturn\n\n\t\tif nota.id\n\t\t\ttemp = nota.nota\n\n\t\t\t$http.put('::nota_comportamiento/update/'+nota.id, {nota: nota.nota}).then((r)->\n\t\t\t\ttoastr.success 'Nota cambiada: ' + nota.nota\n\t\t\t, (r2)->\n\t\t\t\ttoastr.error 'No pudimos guardar la nota ' + nota.nota\n\t\t\t\tnota.nota = temp\n\t\t\t)\n\n\t\telse\n\t\t\ttemp              = {}\n\t\t\ttemp.nota         = nota.nota\n\t\t\ttemp.year_id      = periodo.year_id\n\t\t\ttemp.alumno_id    = $scope.datos.selected_alumno.alumno_id\n\t\t\ttemp.periodo_id   = periodo.id\n\n\t\t\t$http.put('::nota_comportamiento/crear', temp).then((r)->\n\t\t\t\tnota_temp \t= r.data.nota_comport\n\t\t\t\tnota.id \t\t\t\t= nota_temp.id\n\t\t\t\tnota.year_id \t\t= nota_temp.year_id\n\t\t\t\tnota.nombres \t\t= nota_temp.nombres\n\t\t\t\tnota.apellidos \t= nota_temp.apellidos\n\t\t\t\tnota.alumno_id \t= nota_temp.alumno_id\n\t\t\t\tnota.foto_id \t\t= nota_temp.foto_id\n\t\t\t\tnota.foto_nombre \t= nota_temp.foto_nombre\n\t\t\t\tnota.sexo \t\t\t= nota_temp.sexo\n\t\t\t\tnota.periodo_id = nota_temp.periodo_id\n\n\t\t\t\ttoastr.success 'Nota creada: ' + nota.nota\n\t\t\t, (r2)->\n\t\t\t\ttoastr.error 'No pudimos guardar la nota ' + temp.nota\n\t\t\t\tnota = temp\n\t\t\t)\n\n\n\t$scope.verNotasAlumno = (alumno_id, grupo_id)->\n\n\t\tif !alumno_id\n\t\t\talumno_id = $scope.datos.selected_alumno.alumno_id\n\n\t\tif !grupo_id\n\t\t\tgrupo_id  = $scope.datos.grupo.id\n\n\t\t$http.get('::notas/alumno/'+alumno_id+'/'+grupo_id).then((r)->\n\t\t\tr = r.data\n\t\t\tif r[0]\n\t\t\t\t$scope.alumno_traido = r[0]\n\t\t\t\t$scope.periodos_notas = r[0].periodos\n\n\t\t\t\tfor asig in $scope.alumno_traido.notas_tercer_per\n\t\t\t\t\tnota_faltante       =  $scope.USER.nota_minima_aceptada * 4 - asig.nota_final_year*3\n\t\t\t\t\tasig.nota_faltante  = if nota_faltante <= 0 then '' else nota_faltante\n\n\t\t\telse\n\t\t\t\t$scope.periodos_notas = undefined\n\t\t\t\ttoastr.warning 'Sin matrícula este año.'\n\t\t, (r2)->\n\t\t\ttoastr.warning 'Lo sentimos, No se trajeron las notas'\n\t\t)\n\n\n\t$scope.seleccionarAcudido = (alumno)->\n\n\t\tif !alumno.pazysalvo\n\t\t\ttoastr.info 'Lo sentimos. Debe estar a paz y salvo'\n\t\t\treturn\n\n\t\tfor alu in $scope.mis_acudidos\n\t\t\talu.seleccionado = false\n\t\talumno.seleccionado = true\n\n\n\t\t$http.get('::notas/alumno/'+alumno.alumno_id+'/'+alumno.grupo_id).then((r)->\n\t\t\tr = r.data\n\t\t\tif r[0]\n\t\t\t\t$scope.alumno_traido = r[0]\n\t\t\t\t$scope.periodos_notas = r[0].periodos\n\n\t\t\t\tfor asig in $scope.alumno_traido.notas_tercer_per\n\t\t\t\t\tnota_faltante       =  $scope.USER.nota_minima_aceptada * 4 - asig.nota_final_year*3\n\t\t\t\t\tasig.nota_faltante  = if nota_faltante <= 0 then '' else nota_faltante\n\n\t\t\telse\n\t\t\t\t$scope.periodos_notas = undefined\n\t\t\t\ttoastr.warning 'Sin matrícula este año.'\n\t\t, (r2)->\n\t\t\ttoastr.warning 'Lo sentimos, No se trajeron las notas'\n\t\t)\n\n\n\n\tif $state.params.alumno_id\n\t\tif $scope.USER.tipo == 'Alumno'\n\t\t\ttoastr.warning 'No puedes ver otras notas'\n\t\t\treturn\n\n\t\t$scope.verNotasAlumno($state.params.alumno_id, $scope.USER.grupo_id)\n\n\n\n\tif $scope.USER.tipo == 'Alumno' and $scope.USER.pazysalvo\n\t\t\t$scope.verNotasAlumno($scope.USER.persona_id, $scope.USER.grupo_id)\n\n\n\n\n\t$scope.cambiaNotaDef = (asignatura, nota, nf_id, num_periodo)->\n\n\t\tif nota > $scope.escala_maxima.porc_final or nota == 'undefined' or nota == undefined\n\t\t\ttoastr.error 'No puede ser mayor de ' + $scope.escala_maxima.porc_final, 'NO guardada', {timeOut: 8000}\n\t\t\treturn\n\n\t\tif nf_id\n\t\t\t$http.put('::definitivas_periodos/update', {nf_id: nf_id, nota: nota}).then((r)->\n\t\t\t\tif !asignatura.manual\n\t\t\t\t\tasignatura.manual = 1\n\t\t\t\ttoastr.success 'Cambiada: ' + nota\n\t\t\t, (r2)->\n\t\t\t\tif r2.status == 400\n\t\t\t\t\ttoastr.warning 'Parece que no tienes permisos', 'Lo sentimos'\n\t\t\t\telse\n\t\t\t\t\ttoastr.error 'No pudimos guardar la nota ' + nota, '', {timeOut: 8000}\n\t\t\t)\n\t\telse\n\t\t\t$http.put('::definitivas_periodos/update', {alumno_id: $scope.alumno_traido.alumno_id, nota: nota, asignatura_id: asignatura.asignatura_id, num_periodo: num_periodo }).then((r)->\n\t\t\t\ttoastr.success 'Creada: ' + nota\n\t\t\t\tr = r.data[0]\n\t\t\t\tasignatura.nf_id          = r.id\n\t\t\t\tasignatura.recuperada     = 0\n\t\t\t\tasignatura.manual         = 1\n\t\t\t, (r2)->\n\t\t\t\tif r2.status == 400\n\t\t\t\t\ttoastr.warning 'Parece que no tienes permisos', 'Lo sentimos'\n\t\t\t\telse\n\t\t\t\t\ttoastr.error 'No pudimos guardar la nota ' + nota, '', {timeOut: 8000}\n\t\t\t)\n\n\n\t$scope.toggleNotaFinalRecuperada = (alumno, recuperada, nf_id)->\n\t\t$http.put('::definitivas_periodos/toggle-recuperada', {nf_id: nf_id, recuperada: recuperada}).then((r)->\n\n\t\t\tif recuperada and !alumno.manual\n\t\t\t\talumno.manual = 1\n\t\t\t\ttoastr.success 'Indicará que es recuperada, así que también será manual.'\n\t\t\telse if recuperada\n\t\t\t\ttoastr.success 'Recuperada'\n\t\t\telse\n\t\t\t\ttoastr.success 'No recuperada'\n\t\t, (r2)->\n\t\t\tif r2.status == 400\n\t\t\t\ttoastr.warning 'Parece que no tienes permisos', 'Lo sentimos'\n\t\t\telse\n\t\t\t\ttoastr.error 'No pudimos cambiar.', '', {timeOut: 8000}\n\t\t)\n\n\t$scope.toggleNotaFinalManual = (alumno, manual, nf_id)->\n\t\t$http.put('::definitivas_periodos/toggle-manual', {nf_id: nf_id, manual: manual}).then((r)->\n\n\t\t\tif !manual and alumno.nota_final.recuperada\n\t\t\t\talumno.nota_final.recuperada = false\n\t\t\t\ttoastr.success 'Será automática y no recuperada.'\n\t\t\telse if manual\n\t\t\t\ttoastr.success 'Nota manual.'\n\t\t\telse\n\t\t\t\ttoastr.success 'Ahora la calculará el sistema.'\n\t\t, (r2)->\n\t\t\tif r2.status == 400\n\t\t\t\ttoastr.warning 'Parece que no tienes permisos', 'Lo sentimos'\n\t\t\telse\n\t\t\t\ttoastr.error 'No pudimos cambiar.', '', {timeOut: 8000}\n\t\t)\n\n\n\n\t$scope.cambiaNota = (nota, otra)->\n\t\t$http.put('::notas/update/' + nota.id, {nota: nota.nota}).then((r)->\n\t\t\tr = r.data\n\t\t\ttoastr.success 'Cambiada: ' + nota.nota\n\t\t, (r2)->\n\t\t\tif r2.status == 400\n\t\t\t\ttoastr.warning 'Parece que no tienes permisos', 'Lo sentimos'\n\t\t\telse\n\t\t\t\ttoastr.error 'No pudimos guardar la nota ' + nota.nota, '', {timeOut: 8000}\n\t\t)\n\n\n\n\n\t$scope.selectGrupo = (item)->\n\t\tif item\n\t\t\t$scope.filtered_alumnos = $filter('filter')(alumnos, {grupo_id: item.id}, true)\n\t\telse\n\t\t\t$scope.filtered_alumnos = alumnos\n\n\t\t\t$cookies.putObject 'requested_alumno', ''\n\n\t\t$scope.datos.selected_alumno = ''\n\n\n])\n"
  ]
}
{
  "version": 3,
  "file": "ProfesoresCtrl.js",
  "sourceRoot": "",
  "sources": [
    "ProfesoresCtrl.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "'use strict'\n\nangular.module(\"myvcFrontApp\")\n\n.controller('ProfesoresCtrl', ['$scope', '$uibModal', 'toastr', 'uiGridConstants', '$http', '$state', 'App', '$filter', 'Acentos', ($scope, $uibModal, toastr, uiGridConstants, $http, $state, App, $filter, Acentos)->\n\n  $scope.gridScope = $scope # Para getExternalScopes de ui-Grid\n  $scope.current_year = $scope.USER.year_id\n  $scope.views \t\t\t\t\t\t= App.views\n  $scope.perfilPath \t\t  \t      \t= App.images+'perfil/'\n\n  $scope.editar = (row)->\n    $state.go('panel.profesores.editar', {profe_id: row.id})\n\n  $scope.eliminar = (row)->\n    modalInstance = $uibModal.open({\n      templateUrl: '==profesores/removeProfesor.tpl.html'\n      controller: 'RemoveProfesorCtrl'\n      resolve:\n        profesor: ()->\n          row\n    })\n    modalInstance.result.then( (alum)->\n      $scope.gridOptions.data = $filter('filter')($scope.gridOptions.data, {alumno_id: '!'+alum.alumno_id})\n    )\n\n\n\n  btGrid1 = '<a uib-tooltip=\"Editar\" tooltip-placement=\"left\" class=\"btn btn-default btn-xs shiny icon-only info\" ng-click=\"grid.appScope.editar(row.entity)\"><i class=\"fa fa-edit \"></i></a>'\n  btGrid2 = '<a uib-tooltip=\"X Eliminar\" tooltip-placement=\"right\" class=\"btn btn-default btn-xs shiny icon-only danger\" ng-click=\"grid.appScope.eliminar(row.entity)\"><i class=\"fa fa-times \"></i></a>'\n  btGrid3 = \"==profesores/botonContratar.tpl.html\"\n  btUsuario = \"==directives/botonesResetPassword.tpl.html\"\n  btEditUsername = \"==profesores/botonEditUsername.tpl.html\"\n\n  $scope.gridOptions =\n    enableSorting: true,\n    enableFiltering: true,\n    exporterSuppressColumns: [ 'edicion' ],\n    exporterCsvColumnSeparator: ';'\n    exporterMenuPdf: false,\n    exporterMenuExcel: false,\n    exporterCsvFilename: \"Todos los docentes - MyVC.csv\",\n    enableGridMenu: true,\n    enebleGridColumnMenu: false,\n    enableCellEditOnFocus: true,\n    columnDefs: [\n      { field: 'no', pinnedLeft:true, cellTemplate: '<div class=\"ui-grid-cell-contents\">{{grid.renderContainers.body.visibleRowCache.indexOf(row) + 1}}</div>', width: 40, enableCellEdit: false }\n      { name: 'contrato', pinnedLeft:true, displayName:'Contrato', width: 75, enableFiltering: false, cellTemplate: btGrid3, enableCellEdit: false}\n      { field: 'nombres', enableHiding: false, minWidth: 150, pinnedLeft:true,\n      filter: {\n        condition: Acentos.buscarEnGrid\n      }\n      enableHiding: false, cellTemplate: '<div class=\"ui-grid-cell-contents\" style=\"padding: 0px;\"><img ng-src=\"{{grid.appScope.perfilPath + row.entity.foto_nombre}}\" style=\"width: 35px\" />{{row.entity.nombres}}</div>' }\n      { field: 'apellidos', minWidth: 150 }\n      { field: 'id', displayName:'Id', width: 50, enableFiltering: false, enableCellEdit: false}\n      #{ name: 'edicion', displayName:'Edición', width: 50, enableSorting: false, enableFiltering: false, cellTemplate: btGrid1 + btGrid2, enableCellEdit: false}\n      { name: 'edicion', displayName:'Edición', width: 50, enableSorting: false, enableFiltering: false, cellTemplate: btGrid2, enableCellEdit: false}\n      { field: 'sexo', displayName: 'Sex', width: 40 }\n      { field: 'num_doc', displayName: 'Documento', minWidth: 130, cellFilter: 'formatNumberDocumento' }\n      { field: 'username', filter: { condition: uiGridConstants.filter.CONTAINS }, displayName: 'Usuario', cellTemplate: btUsuario, editableCellTemplate: btEditUsername, minWidth: 135 }\n      { field: 'fecha_nac', displayName: 'Nacimiento', cellFilter: \"date:mediumDate\", type: 'date', minWidth: 100}\n      { field: 'celular', minWidth: 100 }\n      { field: 'titulo', minWidth: 200 }\n      { field: 'email_usu', displayName:'Email', minWidth: 250  }\n      { field: 'direccion', minWidth: 200 }\n    ]\n    multiSelect: false,\n    onRegisterApi: ( gridApi ) ->\n      $scope.gridApi = gridApi\n      gridApi.edit.on.afterCellEdit($scope, (rowEntity, colDef, newValue, oldValue)->\n\n        if newValue != oldValue\n          $http.put('::profesores/update/'+rowEntity.id, rowEntity).then((r)->\n            toastr.success 'Profesor actualizado con éxito', 'Actualizado'\n          , (r2)->\n            toastr.error 'Cambio no guardado', 'Error'\n          )\n        $scope.$apply()\n      )\n\n\n  $http.get('::profesores').then((data)->\n    $scope.gridOptions.data = data.data;\n  )\n\n  $scope.$on 'profesorcreado', (data, prof)->\n    $scope.gridOptions.data.push prof\n\n  $scope.quitarContrato = (contrato_id)->\n    $http.delete('::contratos/destroy/' + contrato_id).then((r)->\n      toastr.success 'Quitado de este año ' + $scope.USER.year\n\n      $scope.gridCurrentOptions.data = $filter('filter')($scope.gridCurrentOptions.data, {contrato_id: '!'+contrato_id})\n\n      actual = $filter('filter')($scope.gridOptions.data, {contrato_id: contrato_id})[0]\n      actual.year_id = null\n    , (r2)->\n      toastr.error 'No se pudo agregar el profesor al presente año', 'Problema'\n    )\n\n  $scope.contratar = (row)->\n    $http.post('::contratos', {profesor_id: row.id}).then((r)->\n      toastr.success row.nombres + ' contratado para este año'\n      r = r.data[0]\n      $scope.gridCurrentOptions.data.push r\n\n      actual = $filter('filter')($scope.gridOptions.data, {id: r.profesor_id})[0]\n\n      actual.year_id = $scope.current_year\n      actual.contrato_id = r.contrato_id\n    , (r2)->\n\n      if r2.data.contratado\n        toastr.warning 'Este profesor ya está contratado'\n      else\n        toastr.error 'No se pudo agregar el profesor al presente año', 'Problema'\n    )\n\n\n  btGridQuitar = '<a uib-tooltip=\"Quitar de año actual\" tooltip-placement=\"left\" class=\"btn btn-default btn-xs shiny danger\" ng-click=\"grid.appScope.quitarContrato(row.entity.contrato_id)\"><i class=\"fa fa-times \"></i></a>'\n\n\n  $scope.gridCurrentOptions =\n    enableSorting: true,\n    enableFiltering: true,\n    exporterSuppressColumns: [ 'edicion' ],\n    exporterCsvColumnSeparator: ';'\n    exporterMenuPdf: false,\n    exporterMenuExcel: false,\n    exporterCsvFilename: \"Docentes contratados - MyVC.csv\",\n    enableGridMenu: true,\n    enebleGridColumnMenu: false,\n    enableCellEditOnFocus: true,\n    columnDefs: [\n      { field: 'no', pinnedLeft:true, cellTemplate: '<div class=\"ui-grid-cell-contents\">{{grid.renderContainers.body.visibleRowCache.indexOf(row) + 1}}</div>', width: 40, enableCellEdit: false }\n      { field: 'profesor_id', displayName:'Id', width: 50, enableFiltering: false, enableCellEdit: false}\n      { name: 'edicion', displayName:'Edición', width: 50, enableSorting: false, enableFiltering: false, cellTemplate: btGridQuitar, enableCellEdit: false}\n      { field: 'nombres', enableHiding: false, minWidth: 100 }\n      { field: 'apellidos', minWidth: 100 }\n      { field: 'sexo', displayName: 'Sex', width: 40 }\n      { field: 'username', filter: { condition: uiGridConstants.filter.CONTAINS }, displayName: 'Usuario', cellTemplate: btUsuario, editableCellTemplate: btEditUsername, minWidth: 135 }\n      { field: 'fecha_nac', displayName: 'Nacimiento', minWidth: 100  }\n      { field: 'email_usu', displayName:'Email', minWidth: 250  }\n      { field: 'celular', minWidth: 100 }\n    ]\n    multiSelect: false,\n    onRegisterApi: ( gridApi ) ->\n      $scope.gridApi = gridApi\n      gridApi.edit.on.afterCellEdit($scope, (rowEntity, colDef, newValue, oldValue)->\n\n        if newValue != oldValue\n          $http.put('::profesores/update/'+rowEntity.profesor_id, rowEntity).then((r)->\n            toastr.success 'Profesor actualizado con éxito', 'Actualizado'\n          , (r2)->\n            toastr.error 'Cambio no guardado', 'Error'\n          )\n        $scope.$apply()\n      )\n\n  $http.get('::contratos').then((r)->\n    $scope.gridCurrentOptions.data = r.data\n  , (r2)->\n    toastr.error 'No se trajeron los profesores contratados'\n  )\n\n\n  $scope.cambiaUsernameCheck = (texto)->\n    $scope.verificandoUsername = true\n    return $http.put('::users/usernames-check', {texto: texto}).then((r)->\n      $scope.username_match \t\t= r.data.usernames\n      $scope.verificandoUsername \t= false\n      return $scope.username_match.map((item)->\n        return item.username\n      )\n    )\n\n  $scope.resetPass = (row)->\n\n    modalInstance = $uibModal.open({\n      templateUrl: App.views + 'usuarios/resetPass.tpl.html'\n      controller: 'ResetPassCtrl'\n      resolve:\n        usuario: ()->\n          row\n    })\n    modalInstance.result.then( (user)->\n      #console.log 'Resultado del modal: ', user\n    )\n\n\n\n\n  return\n])\n\n.controller('RemoveProfesorCtrl', ['$scope', '$uibModalInstance', 'profesor', '$http', 'toastr', ($scope, $modalInstance, profesor, $http, toastr)->\n  $scope.profesor = profesor\n\n  $scope.ok = ()->\n\n    $http.delete('::profesores/destroy/'+profesor.id).then((r)->\n      toastr.success 'Profesor enviado a la papelera.', 'Eliminado'\n    , (r2)->\n      toastr.warning 'No se pudo enviar a la papelera.', 'Problema'\n    )\n    $modalInstance.close(profesor)\n\n  $scope.cancel = ()->\n    $modalInstance.dismiss('cancel')\n\n])\n\n\n"
  ]
}
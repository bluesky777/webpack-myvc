{
  "version": 3,
  "file": "PanelCtrl.js",
  "sourceRoot": "",
  "sources": [
    "PanelCtrl.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "'use strict'\n\nangular.module('myvcFrontApp')\n\n.controller('PanelCtrl', ['$scope', '$http', '$state', '$cookies', '$rootScope', 'AuthService', 'Perfil', 'App', 'resolved_user', 'toastr', 'cfpLoadingBar', '$window', '$uibModal',\n\t($scope, $http, $state, $cookies, $rootScope, AuthService, Perfil, App, resolved_user, toastr, cfpLoadingBar, $window, $modal) ->\n\n\t\t$scope.USER = resolved_user\n\t\t$scope.pageTitle = $rootScope.pageTitle\n\t\t#$scope.bigLoader = true\n\t\t$scope.perfilPath = App.images+'perfil/'\n\t\t$scope.views \t\t\t= App.views\n\n\n\t\tif localStorage.cambia_anio\n\t\t\tcambia = parseInt(localStorage.cambia_anio)\n\n\t\t\tmodalInstance = $modal.open({\n\t\t\t\ttemplateUrl: '==panel/cuidadoCambiaPeriodoModal.tpl.html'\n\t\t\t\tcontroller: 'PoliticasPrivacidadCtrl'\n\t\t\t\tsize: 'lg'\n\t\t\t})\n\t\t\tdelete localStorage.cambia_anio\n\n\n\t\t# Si el colegio quiere que aparezca su imagen en el encabezado, puede hacerlo.\n\t\t$scope.logoPathDefault = 'images/Logo_MyVc_Header.gif'\n\t\t$scope.logoPath = 'images/Logo_Colegio_Header.gif'\n\t\t#$scope.paramuser = {'username': Perfil.User().username }\n\n\n\t\t$http.get($scope.logoPath).then(()->\n\t\t\tconsole.log 'logoPath  existe'\n\t\t, ()->\n\t\t\t#console.log 'logoPath NO existe'\n\t\t\t$scope.logoPath = $scope.logoPathDefault # set default image\n\t\t)\n\n\n\t\tif localStorage.menucompacto\n\t\t\t$rootScope.menucompacto = if localStorage.menucompacto == 'true' then true else false\n\t\telse\n\t\t\tif $window.innerWidth < 600\n\t\t\t\t$rootScope.menucompacto     = true\n\t\t\t\tlocalStorage.menucompacto   = $rootScope.menucompacto\n\n\n\t\t# Para evitar una supuesta espera infinita\n\t\tcfpLoadingBar.complete()\n\n\n\t\tAuthService.verificar_acceso()\n\n\n\t\t$scope.USER.nota_minima_aceptada = parseInt($scope.USER.nota_minima_aceptada)\n\n\n\t\t$scope.date = new Date();\n\n\n\t\t$http.get('::years').then((r)->\n\t\t\t$scope.years = r.data\n\t\t, (r)->\n\t\t\ttoastr.error 'No se trajeron los años'\n\t\t)\n\n\t\t$http.get('::periodos').then((r)->\n\t\t\t$scope.periodos = r.data\n\t\t, (r)->\n\t\t\ttoastr.error 'No se trajeron los periodos'\n\t\t)\n\n\n\t\tif $scope.USER.tipo == 'Acudiente'\n\t\t\t$http.put('::acudientes/mis-acudidos').then((r)->\n\t\t\t\t$scope.mis_acudidos = r.data.alumnos\n\t\t\t, (r)->\n\t\t\t\ttoastr.error 'No se trajeron los acudidos'\n\t\t\t)\n\n\n\n\t\t$scope.setImagenPrincipal = ()->\n\t\t\tini = App.images+'perfil/'\n\n\t\t\timgUsuario = $scope.USER.imagen_nombre\n\t\t\timgOficial = $scope.USER.foto_nombre\n\n\t\t\tpathUsu = ini + imgUsuario\n\t\t\tpathOfi = ini + imgOficial\n\n\t\t\t$scope.imagenPrincipal = pathUsu\n\t\t\t$scope.imagenOficial = pathOfi\n\n\t\t$scope.setImagenPrincipal()\n\n\n\t\t$scope.nameToShow = Perfil.nameToShow\n\n\t\t$scope.usuario = ()->\n\t\t\treturn Perfil.User().username\n\n\t\t$scope.toggleCompactMenu = ()->\n\t\t\t$rootScope.menucompacto = !$rootScope.menucompacto\n\t\t\tlocalStorage.menucompacto = $rootScope.menucompacto\n\n\t\t$scope.seeDropdownPeriodos = false\n\n\t\t$scope.togglePeriodos = ()->\n\t\t\t$scope.seeDropdownPeriodos = !$scope.seeDropdownPeriodos\n\t\t\tconsole.log $scope.seeDropdownPeriodos\n\n\n\t\t$scope.cambiarPeriodo = (periodo)->\n\n\t\t\t$http.put('::periodos/useractive/'+periodo.id).then((r)->\n\t\t\t\ttoastr.success 'Periodo cambiado con éxito al perido ' + periodo.numero, 'Cambiado'\n\t\t\t\t$scope.USER.periodo_id = periodo.id\n\t\t\t\t$scope.USER.numero_periodo = periodo.numero\n\n\t\t\t\t#$rootScope.reload()\n\t\t\t\t$window.location.reload() # Actualizamos toda la página al cambiar el periodo\n\n\t\t\t, (r2)->\n\t\t\t\ttoastr.warning 'No se pudo cambiar de periodo.', 'Problema'\n\t\t\t)\n\n\n\t\t$scope.cambiarYear = (year)->\n\n\t\t\t$http.put('::years/useractive/'+year.id).then((r)->\n\t\t\t\tr = r.data\n\t\t\t\t$scope.USER.year_id = year.id\n\t\t\t\t$scope.USER.year = year.year\n\t\t\t\t$scope.USER.numero_periodo = r.numero\n\t\t\t\t$scope.USER.periodo_id = r.id\n\n\t\t\t\ttoastr.success 'Año cambiado con éxito: ' + year.year, 'Cambiado'\n\n\t\t\t\t$window.location.reload() # Actualizamos toda la página al cambiar el año\n\t\t\t\t# $rootScope.reload() # No funciona correctamente\n\n\t\t\t, (r2)->\n\t\t\t\ttoastr.warning 'No se pudo cambiar el año.', 'Problema'\n\t\t\t)\n\n\t\t$scope.logout = ->\n\t\t\tAuthService.logout();\n\n\t\t$scope.goFileManager = ()->\n\t\t\t$state.go 'panel.filemanager'\n\n\n\t\t$scope.indexChar = (index)->\n\t\t\treturn String.fromCharCode(65 + index)\n\n\n\t\t$scope.verPoliticasPrivacidad = ()->\n\t\t\tmodalInstance = $modal.open({\n\t\t\t\ttemplateUrl: '==panel/politicasPrivacidadModal.tpl.html'\n\t\t\t\tcontroller: 'PoliticasPrivacidadCtrl'\n\t\t\t\tsize: 'lg'\n\t\t\t})\n\n\t\t$scope.$on 'cambianImgs', (event, data)->\n\t\t\t$scope.USER = Perfil.User()\n\t\t\t$scope.setImagenPrincipal()\n\n\n\t\treturn\n\t]\n)\n\n.controller('PoliticasPrivacidadCtrl', ['$scope', '$uibModalInstance', '$http', 'toastr', 'App', ($scope, $modalInstance, $http, toastr, App)->\n\n\t$scope.perfilPath \t= App.images+'perfil/'\n\n\t$scope.ok = ()->\n\t\t$modalInstance.close()\n\n\t$scope.cancel = ()->\n\t\t$modalInstance.dismiss('cancel')\n\n])\n"
  ]
}
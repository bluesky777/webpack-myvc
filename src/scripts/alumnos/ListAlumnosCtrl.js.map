{
  "version": 3,
  "file": "ListAlumnosCtrl.js",
  "sourceRoot": "",
  "sources": [
    "ListAlumnosCtrl.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "angular.module(\"myvcFrontApp\")\n\n.controller('ListAlumnosCtrl', ['$scope', 'App', '$rootScope', '$state', '$interval', 'uiGridConstants', 'uiGridEditConstants', '$uibModal', '$filter', 'AuthService', 'toastr', '$http', '$stateParams', ($scope, App, $rootScope, $state, $interval, uiGridConstants, uiGridEditConstants, $modal, $filter, AuthService, toastr, $http, $stateParams)->\n\n\tAuthService.verificar_acceso()\n\n\n\t#$scope.$parent.bigLoader\t\t\t= true\n\t$scope.dato \t\t\t\t\t\t= {}\n\t$scope.dato.mostrartoolgrupo \t\t= true\n\t$scope.gridScope \t\t\t\t\t= $scope # Para getExternalScopes de ui-Grid\n\t$scope.views \t\t\t\t\t\t= App.views\n\t$scope.perfilPath \t\t  \t      \t= App.images+'perfil/'\n\t$scope.year_ant \t\t\t\t\t= $scope.USER.year - 1\n\t$scope.gridOptions \t\t\t        = {}\n\t$scope.gridOptionsSinMatricula \t\t= {}\n\t$scope.paises \t\t\t\t\t\t= []\n\t$scope.religiones\t\t\t\t\t= App.religiones\n\t$scope.tipos_sangre \t\t\t\t= App.tipos_sangre\n\t$scope.mostrar_pasado     = false\n\t$scope.mostrar_retirados  = false\n\t$scope.es_titular \t\t\t= true\n\n\t$scope.parentescos \t\t\t= App.parentescos\n\n\n\n\t$scope.dato.grupo = ''\n\t$http.get('::grupos/con-paises-tipos').then((r)->\n\t\tmatr_grupo = 0\n\n\t\tif $stateParams.grupo_id\n\t\t\tlocalStorage.matr_grupo = parseInt($stateParams.grupo_id)\n\t\t\tmatr_grupo = parseInt(localStorage.matr_grupo)\n\n\n\t\t$scope.grupos \t\t= r.data.grupos\n\t\t$scope.paises \t\t= r.data.paises\n\t\t$scope.tipos_doc \t= r.data.tipos_doc\n\t\t$scope.grupos_titularia \t= r.data.grupos_titularia\n\n\t\tfor grupo in $scope.grupos\n\t\t\tif parseInt(grupo.id) == parseInt(matr_grupo)\n\t\t\t\t$scope.dato.grupo = grupo\n\t\t\t\t$scope.selectGrupo($scope.dato.grupo)\n\n\t\t#$scope.$parent.bigLoader \t= false\n\t)\n\n\n\t$scope.selectGrupo = (grupo)->\n\t\tlocalStorage.matr_grupo = grupo.id\n\t\t$scope.dato.grupo \t\t= grupo\n\n\t\tfor grup in $scope.grupos\n\t\t\tgrup.active = false\n\n\t\tgrupo.active = true\n\n\t\tif AuthService.hasRoleOrPerm('Profesor')\n\t\t\tif grupo.es_titular\n\t\t\t\t$scope.es_titular = true\n\t\t\t\t###\n\t\t\t\tfor columGrid in $scope.gridOptions.columnDefs\n\t\t\t\t\tcolumGrid.enableCellEdit = true\n\t\t\t\t###\n\t\t\telse\n\t\t\t\t$scope.es_titular = false\n\t\t\t\t###\n\t\t\t\tfor columGrid in $scope.gridOptions.columnDefs\n\t\t\t\t\tcolumGrid.enableCellEdit = false\n\t\t\t\t###\n\n\n\t\t$scope.traerAlumnnos = ()->\n\t\t\t$http.put(\"::grupos/alumnos-con-datos\", {grupo_actual: grupo}).then((r)->\n\t\t\t\t$scope.gridOptions.data \t            = r.data.AlumnosActuales\n\n\t\t\t\tfor alumno in $scope.gridOptions.data\n\t\t\t\t\talumno.fecha_nac \t\t\t= if alumno.fecha_nac then new Date(alumno.fecha_nac.replace(/-/g, '\\/')) else alumno.fecha_nac\n\n\t\t\t\t\tfor tipo_doc in $scope.tipos_doc\n\t\t\t\t\t\tif tipo_doc.id == alumno.tipo_doc\n\t\t\t\t\t\t\talumno.tipo_doc = tipo_doc\n\n\t\t\t\t\tfor pariente in alumno.subGridOptions.data\n\t\t\t\t\t\tpariente.fecha_nac_ant \t= pariente.fecha_nac\n\t\t\t\t\t\tpariente.fecha_nac \t\t= if pariente.fecha_nac then new Date(pariente.fecha_nac.replace(/-/g, '\\/')) else pariente.fecha_nac\n\n\t\t\t\t\tif !$scope.es_titular\n\t\t\t\t\t\treturn\n\n\t\t\t\t\talumno.subGridOptions.onRegisterApi = ( gridApi ) ->\n\n\t\t\t\t\t\tgridApi.edit.on.afterCellEdit($scope, (rowEntity, colDef, newValue, oldValue)->\n\t\t\t\t\t\t\tif newValue != oldValue\n\t\t\t\t\t\t\t\tif colDef.field == \"sexo\"\n\t\t\t\t\t\t\t\t\tnewValue = newValue.toUpperCase()\n\t\t\t\t\t\t\t\t\tif !(newValue == 'M' or newValue == 'F')\n\t\t\t\t\t\t\t\t\t\ttoastr.warning 'Debe usar M o F'\n\t\t\t\t\t\t\t\t\t\trowEntity.sexo = oldValue\n\t\t\t\t\t\t\t\t\t\treturn\n\n\t\t\t\t\t\t\t\tif colDef.field == 'email'\n\t\t\t\t\t\t\t\t\tre = /\\S+@\\S+\\.\\S+/\n\t\t\t\t\t\t\t\t\tif !re.test(newValue)\n\t\t\t\t\t\t\t\t\t\ttoastr.warning 'Email no válido'\n\t\t\t\t\t\t\t\t\t\trowEntity.email = oldValue\n\t\t\t\t\t\t\t\t\t\treturn\n\n\t\t\t\t\t\t\t\t$http.put('::acudientes/guardar-valor', {parentesco_id: rowEntity.parentesco_id, acudiente_id: rowEntity.id, user_id: rowEntity.user_id, propiedad: colDef.field, valor: newValue } ).then((r)->\n\t\t\t\t\t\t\t\t\ttoastr.success 'Acudiente actualizado con éxito'\n\t\t\t\t\t\t\t\t, (r2)->\n\t\t\t\t\t\t\t\t\trowEntity[colDef.field] = oldValue\n\t\t\t\t\t\t\t\t\ttoastr.error 'Cambio no guardado', 'Error'\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t$scope.$apply()\n\t\t\t\t\t\t)\n\n\n\n\t\t\t)\n\n\t\t$scope.traerAlumnnos()\n\n\n\t$scope.agregarAcudiente = (rowAlum)->\n\t\tif !$scope.es_titular\n\t\t\ttoastr.warning 'No eres titular', 'No puedes editar.'\n\t\t\treturn\n\n\t\tdelete $rootScope.acudiente_cambiar\n\n\t\tmodalInstance = $modal.open({\n\t\t\ttemplateUrl: '==alumnos/newAcudienteModal.tpl.html'\n\t\t\tcontroller: 'NewAcudienteModalCtrl'\n\t\t\tresolve:\n\t\t\t\talumno: ()->\n\t\t\t\t\trowAlum\n\t\t\t\tpaises: ()->\n\t\t\t\t\t$scope.paises\n\t\t\t\ttipos_doc: ()->\n\t\t\t\t\t$scope.tipos_doc\n\t\t\t\tparentescos: ()->\n\t\t\t\t\t$scope.parentescos\n\t\t})\n\t\tmodalInstance.result.then( (acud)->\n\t\t\trowAlum.subGridOptions.data.splice(rowAlum.subGridOptions.data.length-1, 0, acud)\n\t\t, ()->\n\t\t\t# nada\n\t\t)\n\n\n\t$scope.cambiarAcudiente = (rowAlum, acudiente)->\n\t\tif !$scope.es_titular\n\t\t\ttoastr.warning 'No eres titular', 'No puedes editar.'\n\t\t\treturn\n\n\t\t$rootScope.acudiente_cambiar = acudiente\n\n\t\tmodalInstance = $modal.open({\n\t\t\ttemplateUrl: '==alumnos/newAcudienteModal.tpl.html'\n\t\t\tcontroller: 'NewAcudienteModalCtrl'\n\t\t\tresolve:\n\t\t\t\talumno: ()->\n\t\t\t\t\trowAlum\n\t\t\t\tpaises: ()->\n\t\t\t\t\t$scope.paises\n\t\t\t\ttipos_doc: ()->\n\t\t\t\t\t$scope.tipos_doc\n\t\t\t\tparentescos: ()->\n\t\t\t\t\t$scope.parentescos\n\t\t})\n\t\tmodalInstance.result.then( (acud)->\n\t\t\tfor pariente, indice in rowAlum.subGridOptions.data\n\t\t\t\tif pariente\n\t\t\t\t\tif pariente.id == acudiente.id\n\t\t\t\t\t\trowAlum.subGridOptions.data.splice(indice, 1, acud)\n\t\t, ()->\n\t\t\t# nada\n\t\t)\n\n\n\t$scope.quitarAcudiente = (rowAlum, acudiente)->\n\t\tif !$scope.es_titular\n\t\t\ttoastr.warning 'No eres titular', 'No puedes editar.'\n\t\t\treturn\n\t\tmodalInstance = $modal.open({\n\t\t\ttemplateUrl: '==alumnos/quitarAcudienteModalConfirm.tpl.html'\n\t\t\tcontroller: 'QuitarAcudienteModalConfirmCtrl'\n\t\t\tresolve:\n\t\t\t\talumno: ()->\n\t\t\t\t\trowAlum\n\t\t\t\tacudiente: ()->\n\t\t\t\t\tacudiente\n\t\t})\n\t\tmodalInstance.result.then( (acud)->\n\t\t\tfor pariente, indice in rowAlum.subGridOptions.data\n\t\t\t\tif pariente\n\t\t\t\t\tif pariente.id == acud.id\n\t\t\t\t\t\trowAlum.subGridOptions.data.splice(indice, 1)\n\t\t, ()->\n\t\t\t# nada\n\t\t)\n\n\n\t$scope.cambiarCiudad = (row, tipo_ciudad)->\n\t\tif !$scope.es_titular\n\t\t\ttoastr.warning 'No eres titular', 'No puedes editar.'\n\t\t\treturn\n\t\tmodalInstance = $modal.open({\n\t\t\ttemplateUrl: '==alumnos/cambiarCiudadModal.tpl.html'\n\t\t\tcontroller: 'CambiarCiudadModalCtrl'\n\t\t\tresolve:\n\t\t\t\tpersona: ()->\n\t\t\t\t\trow\n\t\t\t\tpaises: ()->\n\t\t\t\t\t$scope.paises\n\t\t\t\ttipo_ciudad: ()->\n\t\t\t\t\ttipo_ciudad\n\t\t\t\ttipo_persona: ()->\n\t\t\t\t\tif row.subGridOptions\n\t\t\t\t\t\treturn 'alumno'\n\t\t\t\t\telse\n\t\t\t\t\t\treturn 'acudiente'\n\t\t})\n\t\tmodalInstance.result.then( (alum)->\n\t\t\trow = alum\n\t\t)\n\n\n\n\t$scope.cambiarPazysalvo = (fila)->\n\t\tif !$scope.es_titular\n\t\t\ttoastr.warning 'No eres titular', 'No puedes editar.'\n\t\t\treturn\n\t\tfila.pazysalvo = !fila.pazysalvo\n\t\tif not fila.alumno_id\n\t\t\tfila.alumno_id = fila.id\n\n\t\t#datosAlum = angular.copy(fila)\n\t\t#delete datosAlum.subGridOptions\n\n\t\tdatos =\n\t\t\talumno_id: \tfila.alumno_id\n\t\t\tpropiedad: \t'pazysalvo'\n\t\t\tvalor: \t\tfila.pazysalvo\n\n\t\t$http.put('::alumnos/guardar-valor', datos).then((r)->\n\t\t\tconsole.log 'Cambios guardados'\n\t\t, (r2)->\n\t\t\tfila.pazysalvo = !fila.pazysalvo\n\t\t\ttoastr.error 'Cambio no guardado', 'Error'\n\t\t)\n\n\n\t$scope.resetPass = (row)->\n\t\tif !$scope.es_titular\n\t\t\ttoastr.warning 'No eres titular', 'No puedes editar.'\n\t\t\treturn\n\t\tmodalInstance = $modal.open({\n\t\t\ttemplateUrl: App.views + 'usuarios/resetPass.tpl.html'\n\t\t\tcontroller: 'ResetPassCtrl'\n\t\t\tresolve:\n\t\t\t\tusuario: ()->\n\t\t\t\t\trow\n\t\t})\n\t\tmodalInstance.result.then( (user)->\n\t\t\t#console.log 'Resultado del modal: ', user\n\t\t)\n\n\t$scope.religionSelected = (row, evento)->\n\t\tif !$scope.es_titular\n\t\t\ttoastr.warning 'No eres titular', 'No puedes editar.'\n\t\t\treturn\n\t\tif $scope.religiones.indexOf(row.religion) > -1\n\t\t\t$scope.$broadcast(uiGridEditConstants.events.END_CELL_EDIT);\n\n\n\t$scope.religionEditPressEnter = (row)->\n\t\t$scope.$broadcast(uiGridEditConstants.events.END_CELL_EDIT);\n\n\n\t$scope.tipoDocSeleccionado = ($item, row)->\n\t\tif !$scope.es_titular\n\t\t\ttoastr.warning 'No eres titular', 'No puedes editar.'\n\t\t\treturn\n\t\tdatos = { propiedad: 'tipo_doc', valor: $item.id }\n\t\tperson = 'acudientes'\n\n\t\tif row.subGridOptions\n\t\t\tperson \t\t\t= 'alumnos'\n\t\t\tdatos.alumno_id = row.alumno_id\n\t\telse\n\t\t\tdatos.acudiente_id \t= row.acudiente_id\n\t\t\tdatos.parentesco_id = row.parentesco_id\n\t\t\tdatos.user_acud_id \t= row.user_id\n\n\t\t$http.put('::' + person + '/guardar-valor', datos ).then((r)->\n\t\t\ttoastr.success 'Alumno(a) actualizado con éxito', 'Actualizado'\n\t\t, (r2)->\n\t\t\ttoastr.error 'Cambio no guardado.', 'Error'\n\t\t)\n\n\n\t$scope.cambiaUsernameCheck = (texto)->\n\t\tif !$scope.es_titular\n\t\t\ttoastr.warning 'No eres titular', 'No puedes editar.'\n\t\t\treturn\n\t\t$scope.verificandoUsername = true\n\t\treturn $http.put('::users/usernames-check', {texto: texto}).then((r)->\n\t\t\t$scope.username_match \t\t= r.data.usernames\n\t\t\t$scope.verificandoUsername \t= false\n\t\t\treturn $scope.username_match.map((item)->\n\t\t\t\treturn item.username\n\t\t\t)\n\t\t)\n\n\n\t$scope.cambiaEpsCheck = (texto)->\n\t\tif !$scope.es_titular\n\t\t\ttoastr.warning 'No eres titular', 'No puedes editar.'\n\t\t\treturn\n\t\t$scope.verificandoEps = true\n\t\treturn $http.put('::alumnos/eps-check', {texto: texto}).then((r)->\n\t\t\t$scope.eps_match \t\t= r.data.eps\n\t\t\t$scope.verificandoEps \t= false\n\t\t\treturn $scope.eps_match.map((item)->\n\t\t\t\treturn item.eps\n\t\t\t)\n\t\t)\n\n\n\n\n\t#btGrid1 = '<a uib-tooltip=\"Editar\" tooltip-placement=\"left\" class=\"btn btn-default btn-xs shiny icon-only info\" ng-click=\"grid.appScope.editar(row.entity)\"><i class=\"fa fa-edit \"></i></a>'\n\tbtGrid1 = ''\n\tbtEditReligion = \"==alumnos/botonEditReligion.tpl.html\"\n\tbtPazysalvo = \"==directives/botonPazysalvo.tpl.html\"\n\tbtUsuario = \"==directives/botonesResetPassword.tpl.html\"\n\tbtCiudadNac = \"==directives/botonCiudadNac.tpl.html\"\n\tbtCiudadDoc = \"==directives/botonCiudadDoc.tpl.html\"\n\tbtCiudadResid = \"==directives/botonCiudadResid.tpl.html\"\n\tbtTipoDoc = \"==directives/botonTipoDoc.tpl.html\"\n\tbtEditUsername = \"==alumnos/botonEditUsername.tpl.html\"\n\tbtEditEPS = \"==alumnos/botonEditEps.tpl.html\"\n\n\tappendPopover1 = \"'==alumnos/popoverAlumnoGrid.tpl.html'\"\n\tappendPopover2 = \"'mouseenter'\"\n\tappend3 = \"' '\"\n\tappendPopover = 'uib-popover-template=\"views+' + appendPopover1 + '\" popover-trigger=\"'+appendPopover2+'\" popover-title=\"{{ row.entity.nombres + ' + append3 + ' + row.entity.apellidos }}\" popover-popup-delay=\"500\" popover-append-to-body=\"true\"'\n\n\n\t$scope.gridOptions =\n\t\tshowGridFooter: true,\n\t\tenableSorting: true,\n\t\tenableFiltering: true,\n\t\texporterSuppressColumns: [ 'edicion' ],\n\t\texporterCsvColumnSeparator: ';',\n\t\texporterMenuPdf: false,\n\t\texporterMenuExcel: false,\n\t\texporterCsvFilename: \"Alumnos - MyVC.csv\",\n\t\tenableGridMenu: true,\n\t\tenebleGridColumnMenu: false,\n\t\tenableCellEditOnFocus: true,\n\t\texpandableRowTemplate: '==alumnos/expandableRowTemplate.tpl.html',\n\t\texpandableRowHeight: 110,\n\t\texpandableRowScope:\n\t\t\tagregarAcudiente: \t\t$scope.agregarAcudiente\n\t\t\tquitarAcudiente: \t\t$scope.quitarAcudiente\n\t\t\tcambiarAcudiente: \t\t$scope.cambiarAcudiente\n\t\t\tresetPass: \t\t\t\t$scope.resetPass\n\t\t\tcambiarCiudad: \t\t\t$scope.cambiarCiudad\n\t\t\tcambiaUsernameCheck: \t$scope.cambiaUsernameCheck\n\n\t\tcolumnDefs: [\n\t\t\t{ field: 'no', pinnedLeft:true, cellTemplate: '<div class=\"ui-grid-cell-contents\">{{grid.renderContainers.body.visibleRowCache.indexOf(row) + 1}}</div>', width: 40, enableCellEdit: false }\n\t\t\t{ field: 'nombres', minWidth: 130, pinnedLeft:true,\n\t\t\tfilter: {\n\t\t\t\tcondition: (searchTerm, cellValue, row)->\n\t\t\t\t\tentidad = row.entity\n\t\t\t\t\treturn (entidad.nombres.toLowerCase().indexOf(searchTerm.toLowerCase()) > -1)\n\t\t\t}\n\t\t\tenableHiding: false, cellTemplate: '<div class=\"ui-grid-cell-contents\" style=\"padding: 0px;\" ' + appendPopover + '><img ng-src=\"{{grid.appScope.perfilPath + row.entity.foto_nombre}}\" style=\"width: 35px\" />{{row.entity.nombres}}</div>' }\n\t\t\t{ field: 'apellidos', minWidth: 110, filter: { condition: uiGridConstants.filter.CONTAINS }}\n\t\t\t{ field: 'sexo', displayName: 'Sex', width: 40 }\n\t\t\t{ field: 'no_matricula', displayName: '# matrícula', minWidth: 80, enableColumnMenu: true }\n\t\t\t{ field: 'username', filter: { condition: uiGridConstants.filter.CONTAINS }, displayName: 'Usuario', cellTemplate: btUsuario, editableCellTemplate: btEditUsername, minWidth: 135 }\n\t\t\t{ field: 'deuda', displayName: 'Deuda', type: 'number', cellFilter: 'currency:\"$\":0', minWidth: 70 }\n\t\t\t{ field: 'pazysalvo', displayName: 'A paz?', cellTemplate: btPazysalvo, minWidth: 60, enableCellEdit: false }\n\t\t\t{ field: 'telefono', displayName: 'Teléfono', minWidth: 80 }\n\t\t\t{ field: 'religion', displayName: 'Religión', minWidth: 70, editableCellTemplate: btEditReligion }\n\t\t\t{ field: 'tipo_doc', displayName: 'Tipo documento', minWidth: 120, cellTemplate: btTipoDoc, enableCellEdit: false }\n\t\t\t{ field: 'documento', minWidth: 100, cellFilter: 'formatNumberDocumento' }\n\t\t\t{ field: 'ciudad_doc', displayName: 'Ciud Docu', minWidth: 120, cellTemplate: btCiudadDoc, enableCellEdit: false }\n\t\t\t{ field: 'direccion', displayName: 'Dirección', minWidth: 70 }\n\t\t\t{ field: 'barrio', minWidth: 70 }\n\t\t\t{ field: 'tipo_sangre', displayName: 'RH', minWidth: 70 }\n\t\t\t{ field: 'estrato', minWidth: 70, type: 'number' }\n\t\t\t{ field: 'fecha_nac', displayName:'Nacimiento', cellFilter: \"date:mediumDate\", type: 'date', minWidth: 100}\n\t\t\t{ field: 'ciudad_nac', displayName: 'Ciud Nacimi', minWidth: 120, cellTemplate: btCiudadNac, enableCellEdit: false }\n\t\t\t{ field: 'ciudad_resid', displayName: 'Ciud Resid', minWidth: 120, cellTemplate: btCiudadResid, enableCellEdit: false }\n\t\t\t{ field: 'eps', displayName: 'EPS', minWidth: 100, editableCellTemplate: btEditEPS }\n\t\t],\n\t\tmultiSelect: false,\n\t\t#filterOptions: $scope.filterOptions,\n\t\texporterHeaderFilter: ( displayName )->\n\t\t\tif( displayName == 'A paz?' )\n\t\t\t\treturn 'Paz y salvo';\n\t\t\telse if displayName == 'Matrícula'\n\t\t\t\treturn 'Grupo'\n\t\t\telse\n\t\t\t\treturn displayName;\n\t\t,\n\t\texporterFieldCallback: ( grid, row, col, input )->\n\t\t\tif col.name == 'no'\n\t\t\t\treturn grid.renderContainers.body.visibleRowCache.indexOf(row) + 1\n\t\t\tif col.name == 'grupo_id'\n\t\t\t\treturn $scope.dato.grupo.nombre\n\t\t\tif col.name == 'ciudad_nac'\n\t\t\t\treturn row.entity.ciudad_nac_nombre\n\n\t\t\tif( col.name == 'pazysalvo' )\n\t\t\t\tif input\n\t\t\t\t\treturn 'Si'\n\t\t\t\telse\n\t\t\t\t\treturn 'No'\n\t\t\telse if col.name == 'tipo_doc'\n\t\t\t\tif input\n\t\t\t\t\tif input.tipo\n\t\t\t\t\t\treturn input.tipo\n\t\t\t\t\telse\n\t\t\t\t\t\treturn input\n\t\t\t\telse\n\t\t\t\t\treturn input\n\t\t\telse\n\t\t\t\treturn input;\n\t\t,\n\t\tonRegisterApi: ( gridApi ) ->\n\t\t\t$scope.gridApi = gridApi\n\t\t\tgridApi.edit.on.afterCellEdit($scope, (rowEntity, colDef, newValue, oldValue)->\n\n\t\t\t\tif newValue != oldValue\n\n\n\t\t\t\t\tif AuthService.hasRoleOrPerm('Profesor') and $scope.USER.profes_can_edit_alumnos\n\t\t\t\t\t\tif !$scope.es_titular\n\t\t\t\t\t\t\trowEntity[colDef.field] = oldValue\n\t\t\t\t\t\t\ttoastr.warning 'No eres el titular'\n\t\t\t\t\t\t\treturn\n\t\t\t\t\telse if !AuthService.hasRoleOrPerm('Admin')\n\t\t\t\t\t\trowEntity[colDef.field] = oldValue\n\t\t\t\t\t\ttoastr.warning 'Actualmente no hay permiso para editar'\n\t\t\t\t\t\treturn\n\n\n\t\t\t\t\tif not rowEntity.alumno_id\n\t\t\t\t\t\trowEntity.alumno_id = fila.id\n\n\n\t\t\t\t\tif colDef.field == \"sexo\"\n\t\t\t\t\t\tnewValue = newValue.toUpperCase()\n\t\t\t\t\t\tif !(newValue == 'M' or newValue == 'F')\n\t\t\t\t\t\t\ttoastr.warning 'Debe usar M o F'\n\t\t\t\t\t\t\trowEntity.sexo = oldValue\n\t\t\t\t\t\t\treturn\n\n\t\t\t\t\tif colDef.field == \"fecha_matricula\"\n\t\t\t\t\t\treturn $scope.cambiarFechaMatricula(rowEntity)\n\n\n\t\t\t\t\tif colDef.field == \"tipo_sangre\"\n\t\t\t\t\t\tnewValue = newValue.toUpperCase()\n\t\t\t\t\t\tif !($scope.tipos_sangre.indexOf(newValue) > -1)\n\t\t\t\t\t\t\ttoastr.warning 'Debe usar: ' + $scope.tipos_sangre.join(' ')\n\t\t\t\t\t\t\trowEntity.tipo_sangre = oldValue\n\t\t\t\t\t\t\treturn\n\n\n\t\t\t\t\tif colDef.field == \"estrato\"\n\t\t\t\t\t\tif newValue < 0 or newValue > 9\n\t\t\t\t\t\t\ttoastr.warning 'Valor no admitido'\n\t\t\t\t\t\t\trowEntity.estrato = oldValue\n\t\t\t\t\t\t\treturn\n\n\n\t\t\t\t\tif colDef.field == \"documento\"\n\t\t\t\t\t\tif newValue.length != 10 and newValue.length != 0\n\t\t\t\t\t\t\ttoastr.warning 'Debe ser de diez dígitos'\n\t\t\t\t\t\t\t#rowEntity.documento = oldValue\n\t\t\t\t\t\t\treturn\n\n\n\t\t\t\t\t$http.put('::alumnos/guardar-valor', {alumno_id: rowEntity.alumno_id, propiedad: colDef.field, valor: newValue } ).then((r)->\n\t\t\t\t\t\ttoastr.success 'Alumno(a) actualizado con éxito'\n\t\t\t\t\t, (r2)->\n\t\t\t\t\t\trowEntity[colDef.field] = oldValue\n\t\t\t\t\t\ttoastr.error 'Cambio no guardado', 'Error'\n\t\t\t\t\t)\n\t\t\t\tif !(colDef.field == \"religion\")\n\t\t\t\t\t$scope.$apply()\n\t\t\t)\n\n\n\n\n])\n"
  ]
}
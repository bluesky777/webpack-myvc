{
  "version": 3,
  "file": "PersonaCtrl.js",
  "sourceRoot": "",
  "sources": [
    "PersonaCtrl.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "'use strict'\n\nangular.module(\"myvcFrontApp\")\n\n\n.directive('personaBasicoDir',['App', (App)->\n  restrict: 'E'\n  templateUrl: \"#{App.views}alumnos/personaBasicoDir.tpl.html\"\n])\n.directive('personaMatriculasDir',['App', (App)->\n  restrict: 'E'\n  templateUrl: \"#{App.views}alumnos/personaMatriculasDir.tpl.html\"\n])\n.directive('personaNeeDir',['App', (App)->\n  restrict: 'E'\n  templateUrl: \"#{App.views}alumnos/personaNeeDir.tpl.html\"\n])\n.directive('personaDatosExtrasDir',['App', (App)->\n  restrict: 'E'\n  templateUrl: \"#{App.views}alumnos/personaDatosExtrasDir.tpl.html\"\n])\n.directive('personaEnfermeriaDir',['App', (App)->\n  restrict: 'E'\n  templateUrl: \"#{App.views}alumnos/personaEnfermeriaDir.tpl.html\"\n])\n.directive('personaAcudientesDir',['App', (App)->\n  restrict: 'E'\n  templateUrl: \"#{App.views}alumnos/personaAcudientesDir.tpl.html\"\n])\n\n\n.controller('PersonaCtrl', ['$scope', '$state', '$http', 'toastr', '$uibModal', 'App', '$rootScope', '$timeout', 'AuthService', ($scope, $state, $http, toastr, $modal, App, $rootScope, $timeout, AuthService)->\n  $scope.data                   = {} # Para el popup del Datapicker\n  $scope.alumno                 = {}\n  $scope.religiones             = App.religiones\n  $scope.tipos_sangre           = App.tipos_sangre\n  $scope.dato \t\t\t\t\t        = {}\n  $scope.hasRoleOrPerm          = AuthService.hasRoleOrPerm\n  $scope.enfermedia_cargada     = false\n  $scope.opciones_programar     = App.opciones_programar\n  $scope.sangres                = App.sangres\n  $scope.mostrar_mas            = false\n  $scope.mostrar_compromisos    = false\n  $scope.mostrar_prematricula   = true\n  $scope.gridScope \t\t\t\t\t    = $scope\n  $scope.gridOptions            = {}\n  $scope.gridOptionsAcudientes  = {}\n  $scope.parentescos \t\t\t      = App.parentescos\n\n  $scope.new_suceso             = {\n    fecha_suceso:   new Date()\n    signo_fc:       60\n    signo_fr:       12\n    signo_t:        35.5\n  }\n\n\n\n  if localStorage.mostrar_mas_deta_alum\n    $scope.mostrar_mas = if localStorage.mostrar_mas_deta_alum == 'true' then true else false\n\n  if localStorage.mostrar_compromisos\n    $scope.mostrar_compromisos = if localStorage.mostrar_compromisos == 'true' then true else false\n\n  if localStorage.mostrar_prematricula\n    $scope.mostrar_prematricula = if localStorage.mostrar_prematricula == 'true' then true else false\n\n\n\n  if $state.params.tipo == 'alumno'\n\n    $http.put('::alumnos/show', { id: $state.params.persona_id, con_grupos: true }).then (r)->\n\n      $scope.grupos \t\t\t\t      = r.data.grupos\n      $scope.grupos_siguientes \t\t= r.data.grupos_siguientes\n      $scope.tipos_doc \t\t\t\t    = r.data.tipos_doc\n      $scope.alumno \t\t\t\t      = r.data.alumno\n      $scope.matriculas \t\t\t\t  = r.data.matriculas\n      $scope.alum_copy            = angular.copy($scope.alumno)\n\n\n      $scope.alumno.next_year.estado_ant = $scope.alumno.next_year.estado\n      $scope.alumno.ciudad_nac_id = $scope.alumno.ciudad_nac\n      $scope.alumno.ciudad_doc_id = $scope.alumno.ciudad_doc\n\n      $scope.alumno.fecha_retiro      = if $scope.alumno.fecha_retiro     then new Date($scope.alumno.fecha_retiro.replace(/-/g, '\\/')) else $scope.alumno.fecha_retiro\n      $scope.alumno.fecha_matricula   = if $scope.alumno.fecha_matricula  then new Date($scope.alumno.fecha_matricula.replace(/-/g, '\\/')) else $scope.alumno.fecha_matricula\n      $scope.alumno.fecha_nac         = if $scope.alumno.fecha_nac        then new Date($scope.alumno.fecha_nac.replace(/-/g, '\\/')) else $scope.alumno.fecha_nac\n\n      $scope.alumno.llevo_formulario \t= if $scope.alumno.llevo_formulario then new Date($scope.alumno.llevo_formulario) else $scope.alumno.llevo_formulario\n      $scope.alumno.llevo_formulario_bool \t= if $scope.alumno.llevo_formulario then 'Si' else 'No'\n\n\n      $scope.cant_compromisos = 0;\n\n      for opcion in $scope.opciones_programar\n\n        for matricu in $scope.matriculas\n          if matricu.programar == opcion.opcion\n            matricu.programar = opcion\n\n          if matricu.efectuar_una == opcion.opcion\n            matricu.efectuar_una = opcion\n\n\n        if $scope.alumno.programar == opcion.opcion\n          $scope.dato.programar = opcion\n          $scope.cant_compromisos++\n\n        if $scope.alumno.efectuar_una == opcion.opcion\n          $scope.dato.efectuar_una = opcion\n          $scope.cant_compromisos++\n\n        if $scope.alumno.next_year.programar == opcion.opcion\n          $scope.dato.programar_next = opcion\n\n        if $scope.alumno.next_year.efectuar_una == opcion.opcion\n          $scope.dato.efectuar_una_next = opcion\n\n\n      if $scope.alumno.next_year\n        $scope.alumno.next_year.prematriculado = if $scope.alumno.next_year.prematriculado then new Date($scope.alumno.next_year.prematriculado.replace(/-/g, '\\/')) else $scope.alumno.next_year.prematriculado\n        $scope.alumno.next_year.fecha_matricula = if $scope.alumno.next_year.fecha_matricula then new Date($scope.alumno.next_year.fecha_matricula.replace(/-/g, '\\/')) else $scope.alumno.next_year.fecha_matricula\n\n        for grup in $scope.grupos_siguientes\n          if grup.id == $scope.alumno.next_year.grupo_id\n            $scope.dato.grupo_prematr = grup\n\n      if $scope.alumno.ciudad_nac == null\n        $scope.alumno.pais_nac = {id: 1, pais: 'COLOMBIA', abrev: 'CO'}\n        $scope.paisNacSelect($scope.alumno.pais_nac, $scope.alumno.pais_nac)\n      else\n        $http.get('::ciudades/datosciudad/'+$scope.alumno.ciudad_nac).then (r2)->\n          r2 = r2.data\n          $scope.paises \t\t\t\t\t\t\t\t\t= r2.paises\n          $scope.departamentosNac \t\t\t\t= r2.departamentos\n          $scope.ciudadesNac \t\t\t\t\t\t\t= r2.ciudades\n          $scope.alumno.pais_nac \t\t\t\t\t= r2.pais\n          $scope.alumno.departamento_nac \t= r2.departamento\n          $scope.alumno.ciudad_nac \t\t\t\t= r2.ciudad\n\n      if $scope.alumno.ciudad_doc > 0\n        $http.get('::ciudades/datosciudad/'+$scope.alumno.ciudad_doc).then (r2)->\n          r2 = r2.data\n          $scope.paises \t\t\t\t\t\t\t\t\t= r2.paises\n          $scope.departamentos \t\t\t\t\t\t= r2.departamentos\n          $scope.ciudades \t\t\t\t\t\t\t\t= r2.ciudades\n          $scope.alumno.pais_doc \t\t\t\t\t= r2.pais\n          $scope.alumno.departamento_doc \t= r2.departamento\n          $scope.alumno.ciudad_doc \t\t\t\t= r2.ciudad\n      else\n        $scope.alumno.pais_doc = {id: 1, pais: 'COLOMBIA', abrev: 'CO'}\n        $scope.paisSeleccionado($scope.alumno.pais_doc, $scope.alumno.pais_doc)\n\n      if $scope.alumno.ciudad_resid > 0\n        $http.get('::ciudades/datosciudad/'+$scope.alumno.ciudad_resid).then (r2)->\n          r2 = r2.data\n          $scope.paises \t\t\t\t\t\t\t\t\t= r2.paises\n          $scope.departamentosResid \t\t\t= r2.departamentos\n          $scope.ciudadesResid \t\t\t\t\t\t= r2.ciudades\n          $scope.alumno.pais_resid \t\t\t\t= r2.pais\n          $scope.alumno.departamento_resid = r2.departamento\n          $scope.alumno.ciudad_resid \t\t\t= r2.ciudad\n      else\n        $scope.alumno.pais_resid = {id: 1, pais: 'COLOMBIA', abrev: 'CO'}\n        $scope.paisResidSelecionado($scope.alumno.pais_resid, $scope.alumno.pais_resid)\n\n\n      if $scope.alumno.tipo_doc\n        for tipo_doc in $scope.tipos_doc\n          if tipo_doc.id == $scope.alumno.tipo_doc\n            $scope.alumno.tipo_doc = tipo_doc\n\n\n  $scope.openDatePicker = (data, elem)->\n    data[elem] = true\n\n\n  $scope.mostarMasDetalle = ()->\n    $scope.mostrar_mas = !$scope.mostrar_mas\n    localStorage.mostrar_mas_deta_alum = $scope.mostrar_mas\n\n\n  $scope.toggleNuevoRepite = (fila, campo, year_id)->\n\n    if !year_id\n      year_id = fila.next_year.year_id\n\n    datos =\n      alumno_id: \t    fila.alumno_id\n      propiedad: \t    campo\n      valor: \t\t      fila.nuevo\n      year_id: \t\t\t\tfila.next_year.year_id\n\n    $http.put('::alumnos/guardar-valor', datos).then((r)->\n      console.log 'Cambios guardados'\n    , (r2)->\n      fila.nuevo = !fila.nuevo\n      toastr.error 'Cambio no guardado', 'Error'\n    )\n\n  $scope.cerrarEdicionSuceso = ()->\n    $scope.editando_suceso = false\n\n  $scope.editarSuceso = (suceso)->\n    $scope.act_suceso       = suceso\n    $scope.editando_suceso  = true\n\n  $scope.eliminarSuceso = (suceso)->\n    modalInstance = $modal.open({\n      templateUrl: '==alumnos/removeSuceso.tpl.html'\n      controller: 'RemoveSucesoCtrl'\n      resolve:\n        elemento: ()->\n          suceso\n    })\n    modalInstance.result.then( (alum)->\n      $scope.gridOptions.data = $filter('filter')($scope.gridOptions.data, {alumno_id: '!'+alum.alumno_id})\n    , ()->\n      # nada\n    )\n\n  btGrid1 = '<a uib-tooltip=\"Editar\" class=\"btn btn-default btn-xs shiny icon-only info\" ng-click=\"grid.appScope.editarSuceso(row.entity)\"><i class=\"fa fa-edit \"></i></a>'\n  btGrid2 = '<a uib-tooltip=\"X Eliminar\" tooltip-placement=\"right\" class=\"btn btn-default btn-xs shiny icon-only danger\" ng-click=\"grid.appScope.eliminarSuceso(row.entity)\"><i class=\"fa fa-trash \"></i></a>'\n  bt2 \t= '<span style=\"padding-left: 2px; padding-top: 4px;\" class=\"btn-group\">' + btGrid1 + btGrid2 + '</span>'\n  btPresion = \"==directives/botonPresionArterial.tpl.html\"\n\n\n  $scope.gridOptions =\n    showGridFooter: true,\n    showColumnFooter: true,\n    showFooter: true,\n    enableSorting: true,\n    enableFiltering: true,\n    enableGridMenu: true,\n    enebleGridColumnMenu: false,\n    enableCellEditOnFocus: true,\n    columnDefs: [\n      { field: 'no', cellTemplate: '<div class=\"ui-grid-cell-contents\">{{grid.renderContainers.body.visibleRowCache.indexOf(row) + 1}}</div>', width: 40, enableCellEdit: false }\n      { name: 'edicion', displayName:'Edit', width: 55, enableSorting: false, enableFiltering: false, cellTemplate: bt2, enableCellEdit: false, enableColumnMenu: true}\n      { field: 'fecha_suceso', displayName: 'Fecha matrícula', cellFilter: \"date:mediumDate\", type: 'date', minWidth: 100 }\n      { field: 'signo_fc', displayName: 'Frec cardiaca', minWidth: 60, enableColumnMenu: true, type: 'number' }\n      { field: 'signo_fr', displayName: 'Frec respiratoria', minWidth: 60, type: 'number' }\n      { field: 'signo_t', displayName: 'Temperatura', minWidth: 60, type: 'number' }\n      { field: 'signo_glu', displayName: 'Glucometría', minWidth: 60, type: 'number' }\n      { field: 'signo_spo2', displayName: 'SPO2', minWidth: 60, type: 'number' }\n      { field: 'signo_pa_dia', displayName: 'Presión arterial', cellTemplate: btPresion, minWidth: 60, enableCellEdit: false }\n      { field: 'asignatura', displayName: 'Asignatura', minWidth: 70 }\n      { field: 'motivo_consulta', displayName: 'Motivo consulta', minWidth: 120 }\n      { field: 'descripcion_suceso', displayName: 'Descripción suceso', minWidth: 120 }\n      { field: 'tratamiento', displayName: 'Tratamiento', minWidth: 120 }\n      { field: 'observaciones', displayName: 'Observaciones', minWidth: 120 }\n      { field: 'insumos_utilizados', displayName: 'insumos_utilizados', minWidth: 120 }\n      { field: 'created_by_name', displayName: 'Creado por', minWidth: 90 }\n      { field: 'updated_by_name', displayName: 'Actualizado por', minWidth: 90 }\n    ],\n    multiSelect: false,\n    onRegisterApi: ( gridApi ) ->\n      $scope.gridApi = gridApi\n      gridApi.edit.on.afterCellEdit($scope, (rowEntity, colDef, newValue, oldValue)->\n        if newValue != oldValue\n          $http.put('::enfermeria/guardar-valor-suceso', {suceso_id: rowEntity.id, propiedad: colDef.field, valor: newValue } ).then((r)->\n            toastr.success 'Suceso actualizado'\n          , (r2)->\n            rowEntity[colDef.field] = oldValue\n            toastr.error 'Cambio no guardado', 'Error'\n          )\n          $scope.$apply()\n      )\n\n\n  $scope.eliminarAlumno = ()->\n    $scope.eliminando = true\n    modalInstance = $modal.open({\n      templateUrl: '==alumnos/removeAlumno.tpl.html'\n      controller: 'RemoveAlumnoCtrl'\n      resolve:\n        alumno: ()->\n          $scope.alumno\n    })\n    modalInstance.result.then( (alum)->\n      $state.reload();\n      $scope.eliminando = false\n    , ()->\n      $scope.eliminando = false\n    )\n\n\n  $scope.restaurarAlumno = ()->\n    $scope.restaurando = true\n    $http.put('::alumnos/restore/' + $scope.alumno.alumno_id).then((r)->\n      $state.reload();\n    , (r2)->\n      toastr.error 'Alumno no restaurado', 'Error'\n      $scope.restaurando = false\n    )\n\n\n\n  $scope.asignarAOtro = (acudiente)->\n    modalInstance = $modal.open({\n      templateUrl: '==alumnos/asignarAcudienteAOtro.tpl.html'\n      controller: 'AsignarAcudienteAOtroModalCtrl'\n      resolve:\n        elemento: ()->\n          acudiente\n    })\n    modalInstance.result.then( (alum)->\n      toastr.success('Asignado.')\n    )\n\n\n\n  $btGrid1 = '<a uib-tooltip=\"Cambiar\" ng-show=\"row.entity.nombres\" tooltip-placement=\"left\" class=\"btn btn-default btn-xs shiny icon-only info\" ng-click=\"grid.appScope.cambiarAcudiente(row.entity, row.entity)\" tooltip-append-to-body=\"true\"><i class=\"fa fa-edit \"></i></a>';\n  $btGrid2 = '<a uib-tooltip=\"Quitar parentesco\" ng-show=\"row.entity.nombres\" tooltip-placement=\"right\" class=\"btn btn-default btn-xs shiny icon-only danger\" ng-click=\"grid.appScope.quitarAcudiente(row.entity, row.entity)\" tooltip-append-to-body=\"true\"><i class=\"fa fa-trash \"></i></a>';\n  $btGrid3 = '<a uib-tooltip=\"Asignar también a otro alumno\" class=\"btn btn-default btn-xs shiny\" ng-click=\"grid.appScope.asignarAOtro(row.entity)\" tooltip-append-to-body=\"true\" style=\"height: 24px;\">Compartir con...</a>';\n  $btEdit = '<span style=\"padding-left: 2px; padding-top: 4px;\" class=\"btn-group\">' + $btGrid1 + $btGrid2 + $btGrid3 + '</span>';\n\n\n  columna_editable  = {name: 'edicion'}\n  columna_usu       = {name: 'usuario'}\n  editable          = !AuthService.hasRoleOrPerm(['psicólogo', 'enfermero']);\n\n  if editable\n    columna_editable  = { name: 'edicion', displayName: 'Edición', width: 170, enableSorting: false, enableFiltering: false, cellTemplate: $btEdit, enableCellEdit: false }\n\n  if editable\n    columna_usu       = { name: \"Usuario\", field: \"username\", minWidth: 135, cellTemplate: \"==directives/botonesResetPassword.tpl.html\", editableCellTemplate: \"==alumnos/botonEditUsername.tpl.html\" }\n\n\n  $scope.gridOptionsAcudientes =\n    enableSorting: true,\n    enableFiltering: true,\n    enableGridMenu: true,\n    enebleGridColumnMenu: false,\n    enableCellEditOnFocus: editable,\n    columnDefs: [\n      columna_editable,\n      { name: \"Id\", field: \"id\", 'minWidth': 60, enableCellEdit: false }\n      { name: \"Nombres\", field: \"nombres\", minWidth: 120 }\n      { name: \"Apellidos\", field: \"apellidos\", minWidth: 100 }\n      { name: \"Sex\", field: \"sexo\", minWidth: 40 }\n      { name: \"Parentesco\", field: \"parentesco\", minWidth: 90 }\n      columna_usu,\n      { name: \"Documento\", field: \"documento\", minWidth: 100, cellFilter: 'formatNumberDocumento' }\n      { name: \"Teléfono\", field: \"telefono\", minWidth: 90 }\n      { name: \"Celular\", field: \"celular\", minWidth: 90 }\n      { name: \"Ocupación\", field: \"ocupacion\", minWidth: 100 }\n      { name: \"Fecha nac\", field: \"fecha_nac\", cellFilter: \"date:mediumDate\", type: 'date', minWidth: 120 }\n    ],\n    multiSelect: false,\n    onRegisterApi: ( gridApi ) ->\n      $scope.gridApi = gridApi\n      if editable\n        gridApi.edit.on.afterCellEdit($scope, (rowEntity, colDef, newValue, oldValue)->\n          if newValue != oldValue\n            if colDef.field == \"sexo\"\n              newValue = newValue.toUpperCase()\n              if !(newValue == 'M' or newValue == 'F')\n                toastr.warning 'Debe usar M o F'\n                rowEntity.sexo = oldValue\n                return\n\n            if colDef.field == 'email'\n              re = /\\S+@\\S+\\.\\S+/\n              if !re.test(newValue)\n                toastr.warning 'Email no válido'\n                rowEntity.email = oldValue\n                return\n\n            $http.put('::acudientes/guardar-valor', {parentesco_id: rowEntity.parentesco_id, acudiente_id: rowEntity.id, user_id: rowEntity.user_id, propiedad: colDef.field, valor: newValue } ).then((r)->\n              toastr.success 'Acudiente actualizado con éxito'\n            , (r2)->\n              rowEntity[colDef.field] = oldValue\n              toastr.error 'Cambio no guardado', 'Error'\n            )\n            $scope.$apply()\n        )\n\n\n\n\n  $scope.$on 'alumnoguardado', (data, alum)->\n    $state.go('panel.persona', {persona_id: alum.id, tipo: 'alumno' })\n\n\n  $scope.guardar_valor_suceso = (rowEntity, col, newValue)->\n\n    $http.put('::enfermeria/guardar-valor-suceso', {suceso_id: rowEntity.id, propiedad: col, valor: newValue } ).then((r)->\n      toastr.success 'Suceso actualizado'\n    , (r2)->\n      toastr.error 'Cambio no guardado', 'Error'\n    )\n\n\n  $scope.crear_alumno = ()->\n    $rootScope.grupos_siguientes = $scope.grupos_siguientes\n    $state.go('panel.persona.nuevo')\n\n\n  $scope.cargarAcudientes = ()->\n    $http.put('::acudientes/de-persona', {alumno_id: $scope.alumno.alumno_id}).then((r)->\n\n      for pariente in r.data.acudientes\n        pariente.fecha_nac_ant \t= pariente.fecha_nac\n        pariente.fecha_nac \t\t= if pariente.fecha_nac then new Date(pariente.fecha_nac.replace(/-/g, '\\/')) else pariente.fecha_nac\n\n      $scope.gridOptionsAcudientes.data \t\t= r.data.acudientes\n      $scope.acudientes_cargado \t\t\t\t\t\t= true\n    )\n\n\n\n  $scope.crearUsuario = (row)->\n\n    if row.user_id\n      toastr.warning 'Ya tiene usuario'\n      return\n\n    if !row.id\n      toastr.info 'Solo con acudientes creados'\n      return\n\n    $http.post('::acudientes/crear-usuario', {acudiente: row}).then((r)->\n      $scope.usuario_creado = true\n      row.user_id \t= r.data.id\n      row.username \t= r.data.username\n      toastr.success 'Usuario creado'\n\n    , ()->\n      toastr.error 'No se pudo crear el usuario'\n    )\n\n\n  $scope.crear_suceso = ()->\n    $scope.creando_suceso = true\n\n  $scope.cargarEnfermeria = ()->\n    $http.put('::enfermeria/datos', {alumno_id: $scope.alumno.alumno_id}).then((r)->\n\n      for sangre in $scope.sangres\n        if $scope.alumno.tipo_sangre == sangre.sangre\n          $scope.dato.tipo_sangre = sangre\n\n      for regi in r.data.registros_enfermeria\n        regi.fecha_suceso = new Date(regi.fecha_suceso)\n        regi.signo_t = parseFloat(regi.signo_t)\n\n      $scope.enfermeria \t\t\t\t\t= r.data.antecedentes\n      $scope.gridOptions.data \t\t= r.data.registros_enfermeria\n      $scope.enfermedia_cargada \t= true\n    )\n\n  $scope.guardar_nuevo_suceso = (new_suceso)->\n    $scope.guardando_suceso = true\n    new_suceso.alumno_id = $scope.alumno.alumno_id\n    $http.post('::enfermeria/crear-suceso', new_suceso ).then((r)->\n      $scope.guardando_suceso = false\n      $scope.gridOptions.data.push(r.data)\n    , ()->\n      toastr.error('Error creando suceso')\n      $scope.guardando_suceso = false\n    )\n\n\n  $http.get('::paises').then((r)->\n    $scope.paises = r.data\n  )\n\n\n  $scope.toggleMostrarCompromisos = ()->\n    $scope.mostrar_compromisos          = !$scope.mostrar_compromisos\n    localStorage.mostrar_compromisos    = $scope.mostrar_compromisos\n    # Debería traer datos disciplinarios...\n\n\n  $scope.toggleMostrarPrematricula = ()->\n    $scope.mostrar_prematricula         = !$scope.mostrar_prematricula\n    localStorage.mostrar_prematricula   = $scope.mostrar_prematricula\n    # Debería traer datos disciplinarios...\n\n\n  $scope.religionSelected = (row, evento)->\n    if $scope.religiones.indexOf(row.religion) > -1\n      $scope.guardarValor(row, 'religion', row.religion)\n\n\n  $scope.llevo_formulario = (alumno)->\n\n    datos = {\n      alumno_id: alumno.alumno_id,\n      llevo_formulario: null,\n      year: $scope.USER.year+1\n    }\n\n    if !alumno.llevo_formulario\n      datos.llevo_formulario = new Date()\n\n    $http.put('::prematriculas/llevo-formulario', datos).then((r)->\n      toastr.success('Dato guardado')\n      if alumno.llevo_formulario\n        alumno.llevo_formulario_bool  = 'No'\n        alumno.llevo_formulario       = null\n      else\n        alumno.llevo_formulario_bool = 'Si'\n        alumno.llevo_formulario       = datos.llevo_formulario\n\n    , ()->\n      toastr.error('Error cambiando si llevó formulario')\n    )\n\n\n\n  $scope.paisNacSelect = ($item, $model)->\n    $http.get(\"::ciudades/departamentos/\"+$item.id).then((r)->\n      $scope.departamentosNac = r.data\n\n      if typeof $scope.alumno.pais_doc is 'undefined'\n        $scope.alumno.pais_doc = $item\n        $scope.paisSeleccionado($item)\n    )\n\n  $scope.departNacSelect = ($item)->\n    $http.get(\"::ciudades/por-departamento/\"+$item.departamento).then((r)->\n      $scope.ciudadesNac = r.data\n\n      if typeof $scope.alumno.departamento_doc is 'undefined'\n        $scope.alumno.departamento_doc = $item\n        $scope.departSeleccionado($item)\n    )\n\n  $scope.paisSeleccionado = ($item, $model)->\n\n    $http.get(\"::ciudades/departamentos/\"+$item.id).then((r)->\n      $scope.departamentos = r.data\n    )\n\n  $scope.departSeleccionado = ($item)->\n    $http.get(\"::ciudades/por-departamento/\"+$item.departamento).then((r)->\n      $scope.ciudades = r.data\n    )\n\n\n  $scope.paisResidSelecionado = ($item, $model)->\n\n    $http.get(\"::ciudades/departamentos/\"+$item.id).then((r)->\n      $scope.departamentosResid = r.data\n    )\n\n  $scope.departResidSeleccionado = ($item)->\n    $http.get(\"::ciudades/por-departamento/\"+$item.departamento).then((r)->\n      $scope.ciudadesResid = r.data\n    )\n\n  $scope.ciudadSeleccionada = ($item, campo)->\n    $scope.guardarValor($scope.alumno, campo, $item.id)\n\n  $scope.dateOptions =\n    formatYear: 'yyyy'\n\n\n  $scope.restarEstrato = ()->\n    if $scope.alumno.estrato > 0\n      $scope.alumno.estrato = $scope.alumno.estrato - 1\n  $scope.sumarEstrato = ()->\n    if $scope.alumno.estrato < 10\n      $scope.alumno.estrato = parseInt($scope.alumno.estrato) + 1\n\n\n\n\n  $scope.cambiarGrupo = ()->\n    if $scope.hasRoleOrPerm(['admin', 'secretario', 'rector'])\n\n      modalInstance = $modal.open({\n        templateUrl: '==alumnos/matricularEn.tpl.html'\n        controller: 'MatricularEnCtrl'\n        resolve:\n          alumno: ()->\n            $scope.alumno\n          grupos: ()->\n            $scope.grupos\n          USER: ()->\n            $scope.USER\n      })\n      modalInstance.result.then( (alum)->\n\n        for grupo in $scope.grupos\n          if grupo.id == alum.grupo_id\n            $scope.alumno.grupo_nombre  = grupo.nombre\n            $scope.alumno.grupo_id      = grupo.id\n      )\n\n    else\n      return\n\n\n\n\n  $scope.persona_buscar \t\t= ''\n  $scope.templateTypeahead  = '==alumnos/personaTemplateTypeahead.tpl.html'\n\n  $scope.personaCheck = (texto)->\n    $scope.verificandoPersona = true\n    return $http.put('::alumnos/personas-check', {texto: texto, todos_anios: $scope.dato.todos_anios }).then((r)->\n      $scope.personas_match \t\t= r.data.personas\n      $scope.personas_match.map((perso)->\n        perso.perfilPath = $scope.perfilPath\n      )\n      $scope.verificandoPersona \t= false\n      return $scope.personas_match\n    )\n\n  $scope.cambiaEpsCheck = (texto)->\n    $scope.verificandoEps = true\n    return $http.put('::alumnos/eps-check', {texto: texto}).then((r)->\n      $scope.eps_match \t\t= r.data.eps\n      $scope.verificandoEps \t= false\n      return $scope.eps_match.map((item)->\n        return item.eps\n      )\n    )\n\n\n  $scope.ir_a_persona = ($item, $model, $label)->\n    datos = { persona_id: $item.alumno_id, tipo: $item.tipo }\n    $state.go 'panel.persona', datos\n\n\n  $scope.religionEditPressEnter = (row)->\n    $scope.$broadcast(uiGridEditConstants.events.END_CELL_EDIT);\n\n\n  $scope.tipoDocSeleccionado = ($item, row)->\n    datos = { propiedad: 'tipo_doc', valor: $item.id }\n    person = 'acudientes'\n\n    if row.subGridOptions\n      person \t\t\t= 'alumnos'\n      datos.alumno_id = row.alumno_id\n    else\n      datos.acudiente_id \t= row.acudiente_id\n      datos.parentesco_id = row.parentesco_id\n      datos.user_acud_id \t= row.user_id\n\n    $http.put('::' + person + '/guardar-valor', datos ).then((r)->\n      toastr.success 'Alumno(a) actualizado con éxito', 'Actualizado'\n    , (r2)->\n      row.tipo_doc = oldValue\n      toastr.error 'Cambio no guardado', 'Error'\n    )\n\n\n  $scope.matricularUno = (row, recargar)->\n    if not $scope.dato.grupo.id\n      toastr.warning 'Debes definir el grupo al que vas a matricular.', 'Falta grupo'\n      return\n\n    datos = { alumno_id: row.alumno_id, grupo_id: $scope.dato.grupo.id, year_id: $scope.USER.year_id }\n\n    $http.post('::matriculas/matricularuno', datos).then((r)->\n      r = r.data\n      row.matricula_id \t\t\t= r.id\n      row.grupo_id \t\t\t\t= r.grupo_id\n      row.estado \t\t\t\t\t= 'MATR'\n      row.fecha_matricula_ant \t= r.fecha_matricula.date\n      row.fecha_matricula \t\t= new Date(r.fecha_matricula.date)\n      toastr.success 'Alumno matriculado con éxito', 'Matriculado'\n      if recargar\n        $scope.traerAlumnnosConGradosAnterior()\n      return row\n    , (r2)->\n      toastr.error 'No se pudo. Tal vez no tienes permiso.', 'Error'\n\n    )\n\n  $scope.cambiaEpsCheck = (texto)->\n    $scope.verificandoEps = true\n    return $http.put('::alumnos/eps-check', {texto: texto}).then((r)->\n      $scope.eps_match \t\t= r.data.eps\n      $scope.verificandoEps \t= false\n      return $scope.eps_match.map((item)->\n        return item.eps\n      )\n    )\n\n\n  $scope.reMatricularUno = (row)->\n\n    datos = { matricula_id: row.matricula_id }\n\n    $http.put('::matriculas/re-matricularuno', datos).then((r)->\n      r = r.data\n      toastr.success 'Alumno rematriculado', 'Matriculado'\n      return row\n    , (r2)->\n      toastr.error 'No se pudo. Tal vez no tienes permiso.', 'Error'\n\n    )\n\n\n  $scope.setAsistente = (fila)->\n\n    $http.put('::matriculas/set-asistente', {matricula_id: fila.matricula_id, grupo_id: $scope.alumno.grupo_id}).then((r)->\n      toastr.success 'Guardado como asistente'\n    , (r2)->\n      toastr.error 'No se pudo. Tal vez no tienes permiso.', 'Error'\n    )\n\n\n\n  $scope.cambiarFechaRetiro = (row)->\n\n    $http.put('::matriculas/cambiar-fecha-retiro', { matricula_id: row.matricula_id, fecha_retiro: row.fecha_retiro }).then((r)->\n      toastr.success 'Fecha retiro guardada'\n    , (r2)->\n      row.fecha_retiro = row.fecha_retiro_ant\n      toastr.error 'No se pudo. Tal vez no tienes permiso.', 'Error'\n    )\n\n\n  $scope.cambiarFechaMatricula = (row)->\n\n    $http.put('::matriculas/cambiar-fecha-matricula', { matricula_id: row.matricula_id, fecha_matricula: row.fecha_matricula }).then((r)->\n      toastr.success 'Fecha matrícula guardada'\n    , (r2)->\n      row.fecha_matricula = row.fecha_matricula_ant\n      toastr.error 'No se pudo. Tal vez no tienes permiso.', 'Error'\n    )\n\n\n\n\n\n  $scope.desertar = (row)->\n    fecha = row.fecha_retiro\n    if row.fecha_retiro_ant == null\n      fecha \t\t\t\t= new Date()\n      row.fecha_retiro \t= fecha\n\n    $http.put('::matriculas/desertar', {matricula_id: row.matricula_id, fecha_retiro: row.fecha_retiro }).then((r)->\n      toastr.success 'Alumno desertado'\n    , (r2)->\n      toastr.error 'No se pudo desertar. Tal vez no tienes permiso.', 'Problema'\n    )\n\n\n\n\n  $scope.retirar = (row)->\n    fecha = row.fecha_retiro\n    if row.fecha_retiro_ant == null\n      fecha \t\t\t\t= new Date()\n      row.fecha_retiro \t= fecha\n\n    $http.put('::matriculas/retirar', {matricula_id: row.matricula_id, fecha_retiro: row.fecha_retiro }).then((r)->\n      toastr.success 'Alumno retirado'\n    , (r2)->\n      toastr.error 'No se pudo desmatricular. Tal vez no tienes permiso.', 'Problema'\n    )\n\n\n\n  # ya es inutil\n  $scope.prematricular = (row)->\n\n    if $scope.prematriculando\n      return\n\n    if !$scope.dato.grupo_prematr\n      toastr.warning 'Debe seleccionar el grupo'\n      return\n\n    $scope.prematriculando = true\n\n    datos = {\n      matricula_id: \trow.next_year.matricula_id,\n      alumno_id: \t\t\trow.alumno_id,\n      grupo_id: \t\t\t$scope.dato.grupo_prematr.id,\n      year_id: \t\t\t\trow.next_year.year_id\n    }\n\n    $http.put('::matriculas/prematricular', datos).then((r)->\n      toastr.success 'Alumno prematriculado'\n      $scope.prematriculando    = false\n      r.data.matricula.prematriculado = new Date(r.data.matricula.prematriculado.replace(/-/g, '\\/'))\n      $scope.alumno.next_year   = r.data.matricula\n      $timeout(()->\n        $scope.$apply()\n      , 100)\n    , (r2)->\n      toastr.error 'Tal vez no existe el ' + ($scope.USER.year+1), 'Problema'\n      $scope.prematriculando = false\n    )\n\n\n\n\n  $scope.cambiaUsernameCheck = (texto)->\n    $scope.username_cambiado = true\n    $scope.verificandoUsername = true\n    return $http.put('::users/usernames-check', {texto: texto}).then((r)->\n      $scope.username_match \t\t= r.data.usernames\n      $scope.verificandoUsername \t= false\n      return $scope.username_match.map((item)->\n        return item.username\n      )\n    )\n\n  $scope.resetPass = (row)->\n\n    if !row.user_id\n      toastr.warning 'Aún no tiene usuario'\n      return\n\n    modalInstance = $modal.open({\n      templateUrl: App.views + 'usuarios/resetPass.tpl.html'\n      controller: 'ResetPassCtrl'\n      resolve:\n        usuario: ()->\n          row\n    })\n    modalInstance.result.then( (user)->\n      #console.log 'Resultado del modal: ', user\n    )\n\n\n  $scope.set_estado_next_matricula = (row)->\n\n    if $scope.matriculando\n      return\n\n    if !$scope.dato.grupo_prematr\n      toastr.warning 'Debe seleccionar el grupo'\n      return\n\n    if row.next_year.estado == 'MATR'\n      faltan = 0\n      for requisito in $scope.matriculas[0].requisitos\n        if requisito.estado == 'falta'\n          faltan = faltan+1\n      if faltan > 0\n        frase = if faltan==1 then faltan+' requisito.' else faltan+' requisitos. '\n        res = confirm('A este estudiante aún le falta por cumplir ' + frase + ' ¿Desea matricular de todos modos?')\n        if res\n          console.log($scope.alumno.next_year.estado, $scope.alumno.next_year.estado_ant)\n        else\n          $scope.alumno.next_year.estado = $scope.alumno.next_year.estado_ant\n          return\n\n    $scope.matriculando = true\n\n    datos = {\n      matricula_id: \trow.next_year.matricula_id,\n      alumno_id: \t\t\trow.alumno_id,\n      grupo_id: \t\t\t$scope.dato.grupo_prematr.id,\n      year_id: \t\t\t\trow.next_year.year_id\n      estado: \t\t\t\trow.next_year.estado\n    }\n\n    $http.put('::matriculas/prematricular', datos).then((r)->\n      toastr.success 'Cambios guardados'\n      $scope.matriculando    = false\n      r.data.matricula.prematriculado = if r.data.matricula.prematriculado then new Date(r.data.matricula.prematriculado.replace(/-/g, '\\/')) else r.data.matricula.prematriculado\n      $scope.alumno.next_year   = r.data.matricula\n      $scope.alumno.next_year.estado_ant = $scope.alumno.next_year.estado\n      $timeout(()->\n        $scope.$apply()\n      , 100)\n    , (r2)->\n      toastr.error 'Tal vez no existe el ' + ($scope.USER.year+1), 'Problema'\n      $scope.matriculando = false\n    )\n\n\n  #Ya puedo borrar:\n  $scope.quitarPrematricula = (row)->\n\n    if $scope.prematriculando\n      return\n\n    $scope.prematriculando = true\n\n    datos = {\n      matricula_id: \trow.next_year.matricula_id\n    }\n\n    $http.put('::matriculas/quitar-prematricula', datos).then((r)->\n      toastr.success 'Matrícula quitada'\n      $scope.prematriculando = false\n      $scope.alumno.next_year = {}\n    , (r2)->\n      toastr.error 'No se pudo quitar', 'Problema'\n      $scope.prematriculando = false\n    )\n\n\n\n\n\n  $scope.cambiarPazysalvo = (fila)->\n    if $scope.hasRoleOrPerm(['admin', 'secretario', 'rector'])\n      fila.pazysalvo = !fila.pazysalvo\n      if not fila.alumno_id\n        fila.alumno_id = fila.id\n\n      datos =\n        alumno_id: \tfila.alumno_id\n        propiedad: \t'pazysalvo'\n        valor: \t\tfila.pazysalvo\n\n      $http.put('::alumnos/guardar-valor', datos).then((r)->\n        console.log 'Cambios guardados'\n      , (r2)->\n        fila.pazysalvo = !fila.pazysalvo\n        toastr.error 'Cambio no guardado', 'Error'\n      )\n\n\n\n  $scope.guardarCambioRequisito = (requisito)->\n    #if requisito.estado=='Falta' or requisito.estado=='Ya' or requisito.estado=='N/A'\n    $http.post('::requisitos/alumno', requisito ).then((r)->\n      toastr.success 'Requisito actualizado'\n    , (r2)->\n      toastr.error 'Cambio no guardado', 'Error'\n    )\n\n\n\n\n  $scope.guardarValor = (rowEntity, colDef, newValue, year_id)->\n    datos = {}\n\n    if colDef == 'username'\n      if $scope.username_cambiado\n        datos.user_id = rowEntity.user_id\n      else\n        return\n\n    if colDef == 'email'\n      datos.user_id = rowEntity.user_id\n      if newValue.length > 0\n        if !window.validateEmail(newValue)\n          toastr.warning 'No es un correo válido'\n          return\n\n    if not rowEntity.alumno_id\n      rowEntity.alumno_id = rowEntity.id\n\n\n    if colDef == \"sexo\"\n      newValue = newValue.toUpperCase()\n      if !(newValue == 'M' or newValue == 'F')\n        toastr.warning 'Debe usar M o F'\n        rowEntity.sexo = $scope.alum_copy['sexo']\n        return\n\n    ###\n    if colDef == \"fecha_matricula\"\n      return $scope.cambiarFechaMatricula(rowEntity)\n    ###\n\n    if colDef == \"tipo_sangre\"\n      newValue = newValue.toUpperCase()\n      if !($scope.tipos_sangre.indexOf(newValue) > -1)\n        toastr.warning 'Debe usar: ' + $scope.tipos_sangre.join(' ')\n        rowEntity.tipo_sangre = $scope.alum_copy['tipo_sangre']\n        return\n\n\n    if colDef == \"estrato\"\n      if newValue < 0 or newValue > 9\n        toastr.warning 'Valor no admitido'\n        rowEntity.estrato = $scope.alum_copy['estrato']\n        return\n\n\n    if colDef == \"documento\"\n      if newValue.length != 10 and newValue.length != 0\n        toastr.warning 'Debe ser de diez dígitos'\n        #rowEntity.documento = oldValue\n        return\n\n    datos.alumno_id = rowEntity.alumno_id\n    datos.propiedad = colDef\n    datos.valor \t\t= newValue\n    datos.year_id \t= rowEntity.year_id\n\n    if year_id\n      datos.year_id = year_id\n\n    $http.put('::alumnos/guardar-valor', datos ).then((r)->\n      toastr.success 'Alumno(a) actualizado con éxito'\n      if colDef == \"tipo_sangre\"\n        $scope.alumno.tipo_sangre = newValue\n    , (r2)->\n      rowEntity[colDef] = $scope.alum_copy[colDef]\n      toastr.error 'Cambio no guardado', 'Error'\n    )\n\n\n  $scope.guardarValorEnfermeria = (enferm, propiedad, newValue)->\n    datos = {}\n    datos.antec_id    = enferm.id\n    datos.propiedad   = propiedad\n    datos.valor \t\t  = newValue\n\n\n    $http.put('::enfermeria/guardar-valor', datos ).then((r)->\n      toastr.success 'Enfermería actualizada'\n    , (r2)->\n      #rowEntity[colDef] = $scope.alum_copy[colDef]\n      toastr.error 'Cambio no guardado', 'Error'\n    )\n\n\n  $scope.verTodosLosCertificados = ()->\n    $state.go 'panel.persona.ver_todos_los_certificados', {alumno_id: $scope.alumno.alumno_id}, {reload: true}\n\n\n\n\n  $scope.agregarAcudiente = ()->\n    delete $rootScope.acudiente_cambiar\n\n    $scope.alumno.parientes = $scope.gridOptionsAcudientes.data\n\n    modalInstance = $modal.open({\n      templateUrl: '==alumnos/newAcudienteModal.tpl.html'\n      controller: 'NewAcudienteModalCtrl'\n      resolve:\n        alumno: ()->\n          $scope.alumno\n        paises: ()->\n          $scope.paises\n        tipos_doc: ()->\n          $scope.tipos_doc\n        parentescos: ()->\n          $scope.parentescos\n    })\n    modalInstance.result.then( (acud)->\n      $scope.gridOptionsAcudientes.data.splice($scope.alumno.parientes.length-1, 0, acud)\n    , ()->\n      # nada\n    )\n\n\n  $scope.cambiarAcudiente = (acudiente)->\n    $rootScope.acudiente_cambiar = acudiente\n\n    modalInstance = $modal.open({\n      templateUrl: '==alumnos/newAcudienteModal.tpl.html'\n      controller: 'NewAcudienteModalCtrl'\n      resolve:\n        alumno: ()->\n          $scope.alumno\n        paises: ()->\n          $scope.paises\n        tipos_doc: ()->\n          $scope.tipos_doc\n        parentescos: ()->\n          $scope.parentescos\n    })\n    modalInstance.result.then( (acud)->\n      for pariente, indice in $scope.gridOptionsAcudientes.data\n        if pariente\n          if pariente.id == acudiente.id\n            $scope.gridOptionsAcudientes.data.splice(indice, 1, acud)\n    , ()->\n      # nada\n    )\n\n\n  $scope.quitarAcudiente = (acudiente)->\n\n    modalInstance = $modal.open({\n      templateUrl: '==alumnos/quitarAcudienteModalConfirm.tpl.html'\n      controller: 'QuitarAcudienteModalConfirmCtrl'\n      resolve:\n        alumno: ()->\n          $scope.alumno\n        acudiente: ()->\n          acudiente\n    })\n    modalInstance.result.then( (acud)->\n      for pariente, indice in $scope.gridOptionsAcudientes.data\n        if pariente\n          if pariente.id == acud.acudiente_id\n            $scope.gridOptionsAcudientes.data.splice(indice, 1)\n    , ()->\n      # nada\n    )\n\n\n\n\n\n  return\n])\n\n\n.controller('RemoveSucesoCtrl', ['$scope', '$uibModalInstance', 'elemento', '$http', 'toastr', 'App', ($scope, $modalInstance, elemento, $http, toastr, App)->\n  $scope.elemento \t\t= elemento\n  #$scope.perfilPath \t= App.images+'perfil/'\n\n  $scope.ok = ()->\n\n    $http.delete('::enfermeria/destroy/'+elemento.id).then((r)->\n      toastr.success 'Suceso eliminado.', 'Eliminado'\n    , (r2)->\n      toastr.warning 'No se pudo eliminar.', 'Problema'\n    )\n    $modalInstance.close(elemento)\n\n  $scope.cancel = ()->\n    $modalInstance.dismiss('cancel')\n\n])\n"
  ]
}
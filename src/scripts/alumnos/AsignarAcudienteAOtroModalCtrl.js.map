{
  "version": 3,
  "file": "AsignarAcudienteAOtroModalCtrl.js",
  "sourceRoot": "",
  "sources": [
    "AsignarAcudienteAOtroModalCtrl.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "'use strict'\n\nangular.module(\"myvcFrontApp\")\n\n\n.controller('AsignarAcudienteAOtroModalCtrl', ['$scope', 'App', '$uibModalInstance', 'elemento', '$uibModal', '$http', 'toastr', '$filter', '$rootScope', '$timeout', ($scope, App, $modalInstance, acudiente, $modal, $http, toastr, $filter, $rootScope, $timeout)->\n\t$scope.acudiente \t\t\t\t  = acudiente\n\t$scope.datos \t\t\t\t      = {}\n\t$scope.perfilPath \t\t\t  = App.images+'perfil/'\n\t$scope.repetido \t\t\t\t\t= false\n\t$scope.alumno             = {}\n\t$scope.parentescos        = App.parentescos\n\n\n\tfor parentesc in $scope.parentescos\n\t\tif parentesc.parentesco == 'Madre' and acudiente.sexo == 'F'\n\t\t\t$scope.acudiente.parentesco = parentesc\n\t\tif parentesc.parentesco == 'Padre' and acudiente.sexo == 'M'\n\t\t\t$scope.acudiente.parentesco = parentesc\n\n\n\n\t$scope.seleccionarAcudiente = ()->\n\t\tdatos = { acudiente_id: $scope.acudiente.id, alumno_id: $scope.alumno.alumno_id, parentesco: $scope.acudiente.parentesco.parentesco, ocupacion: $scope.acudiente.ocupacion }\n\n\t\t$http.put('::acudientes/seleccionar-parentesco', datos ).then((r)->\n\t\t\tif $scope.acudiente.parentesco\n\t\t\t\t$scope.acudiente.parentesco = $scope.acudiente.parentesco.parentesco\n\t\t\t$modalInstance.close(r.data)\n\t\t, (r2)->\n\t\t\ttoastr.warning 'No se pudo seleccionar.', 'Problema'\n\t\t)\n\n\n\n\n\t$scope.quitarAcudiente = (rowAlum, acudiente)->\n\n\t\tmodalInstance = $modal.open({\n\t\t\ttemplateUrl: '==alumnos/quitarAcudienteModalConfirm.tpl.html'\n\t\t\tcontroller: 'QuitarAcudienteModalConfirmCtrl'\n\t\t\tresolve:\n\t\t\t\talumno: ()->\n\t\t\t\t\trowAlum\n\t\t\t\tacudiente: ()->\n\t\t\t\t\tacudiente\n\t\t})\n\t\tmodalInstance.result.then( (acud)->\n\t\t\tfor pariente, indice in $scope.acudientes\n\t\t\t\tif pariente\n\t\t\t\t\tif pariente.id == acud.id\n\t\t\t\t\t\t$scope.acudientes.splice(indice, 1)\n\t\t, ()->\n\t\t\t# nada\n\t\t)\n\n\n\n\t$scope.personaCheck = (texto)->\n\t\t$scope.verificandoPersona = true\n\t\treturn $http.put('::alumnos/personas-check', {texto: texto, todos_anios: true }).then((r)->\n\t\t\t$scope.personas_match \t\t= r.data.personas\n\t\t\t$scope.personas_match.map((perso)->\n\t\t\t\tperso.perfilPath = $scope.perfilPath\n\t\t\t)\n\t\t\t$scope.verificandoPersona \t= false\n\t\t\treturn $scope.personas_match\n\t\t)\n\n\n\t$scope.seleccionarPersona = ($item, $model, $label)->\n\t\t$scope.alumno = $item\n\n\t\t$http.put('::acudientes/de-persona', {alumno_id: $item.alumno_id}).then((r)->\n\n\t\t\tfor pariente in r.data.acudientes\n\t\t\t\tif pariente.id == $scope.acudiente.id\n\t\t\t\t\ttoastr.warning('Ya tiene este acudiente.')\n\t\t\t\t\t$scope.repetido     = true\n\t\t\t\t\tpariente.repetido   = true\n\n\t\t\t$scope.acudientes \t\t  = r.data.acudientes\n\n\t\t, ()->\n\t\t\ttoastr.error('Error trayendo acudientes de ' + $item.nombres)\n\t\t)\n\n\n\n\t$scope.cancel = ()->\n\t\tif $scope.acudiente.parentesco\n\t\t\t$scope.acudiente.parentesco = $scope.acudiente.parentesco.parentesco\n\t\t$modalInstance.dismiss('cancel')\n\n\n])\n\n\n\n\n\n\n.controller('QuitarAcudienteModalConfirmCtrl', ['$scope', 'App', '$uibModalInstance', 'alumno', 'acudiente', '$http', 'toastr', ($scope, App, $modalInstance, alumno, acudiente, $http, toastr)->\n\t$scope.acudiente \t\t\t\t  = acudiente\n\t$scope.alumno             = alumno\n\t$scope.perfilPath \t\t\t  = App.images+'perfil/'\n\n\t$scope.ok = ()->\n\t\tdatos = { parentesco_id: $scope.acudiente.parentesco_id }\n\n\t\t$http.put('::acudientes/quitar-parentesco-alumno', datos ).then((r)->\n\t\t\t$modalInstance.close(r.data)\n\t\t, (r2)->\n\t\t\ttoastr.warning 'No se pudo seleccionar.', 'Problema'\n\t\t)\n\n\n\t$scope.cancel = ()->\n\t\t$modalInstance.dismiss('cancel')\n\n\n\n])\n"
  ]
}
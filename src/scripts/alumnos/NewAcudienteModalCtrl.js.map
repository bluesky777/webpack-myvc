{
  "version": 3,
  "file": "NewAcudienteModalCtrl.js",
  "sourceRoot": "",
  "sources": [
    "NewAcudienteModalCtrl.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "'use strict'\n\nangular.module(\"myvcFrontApp\")\n\n\n.controller('NewAcudienteModalCtrl', ['$scope', 'App', '$uibModalInstance', 'alumno', 'paises', 'tipos_doc', 'parentescos', '$http', 'toastr', '$filter', '$rootScope', '$timeout', ($scope, App, $modalInstance, alumno, paises, tipos_doc, parentescos, $http, toastr, $filter, $rootScope, $timeout)->\n\t$scope.alumno \t\t\t\t    = alumno\n\t$scope.paises \t\t\t\t    = paises\n\t$scope.parentescos \t\t\t  = parentescos\n\t$scope.datos \t\t\t\t      = {}\n\t$scope.tipos_doc \t\t\t    = tipos_doc\n\t$scope.crearTabSelected \t= false\n\t$scope.selectTabSelected \t= true\n\t$scope.perfilPath \t\t\t  = App.images+'perfil/'\n\t$scope.acudiente_cambiar  = $rootScope.acudiente_cambiar\n\n\n\t$scope.acudiente \t= {\n\t\tsexo:\t\t\t'M'\n\t\tparentesco: \t$scope.parentescos[0]\n\t\ttipo_doc: \t\t$scope.tipos_doc[0]\n\t}\n\n\t$scope.acudientes = [  ]\n\n\n\tif $scope.acudiente_cambiar\n\t\tif $scope.acudiente_cambiar.parentesco\n\t\t\tfor paren in $scope.parentescos\n\t\t\t\tif paren.parentesco.toLowerCase() == $scope.acudiente_cambiar.parentesco.toLowerCase()\n\t\t\t\t\t$scope.acudiente.parentesco = paren\n\n\n\n\t$scope.selectCrearTab = ()->\n\t\t$scope.crearTabSelected \t= true\n\t\t$scope.selectTabSelected \t= false\n\n\t$scope.selectSelectTab = ()->\n\t\t$scope.crearTabSelected \t= false\n\t\t$scope.selectTabSelected \t= true\n\n\n\t$scope.selecAcudOption = (acudiente)->\n\t\tfor parentesc in $scope.parentescos\n\t\t\tif parentesc.parentesco == 'Madre' and acudiente.sexo == 'F'\n\t\t\t\t$scope.acudiente.parentesco = parentesc\n\t\t\tif parentesc.parentesco == 'Padre' and acudiente.sexo == 'M'\n\t\t\t\t$scope.acudiente.parentesco = parentesc\n\n\n\t$scope.cancel = ()->\n\t\t$modalInstance.dismiss('cancel')\n\n\t$scope.$on('modal.closing', (event, reason, closed)->\n\n\t\tswitch (reason)\n\t\t\twhen \"backdrop click\", \"escape key press\"\n\t\t\t\tif (!confirm('¿Seguro que quiere cerrar sin guardar acudiente?'))\n\t\t\t\t\tevent.preventDefault();\n\n\n\n\t)\n\n\n\t$http.put('::acudientes/ultimos').then((r)->\n\t\t$scope.sin_repetir(r.data)\n\t)\n\n\n\t$scope.refreshAcudientes = (termino)->\n\t\tif termino\n\t\t\t$http.put('::acudientes/buscar', { termino: termino } ).then((r)->\n\t\t\t\t$scope.sin_repetir(r.data)\n\t\t\t, (r2)->\n\t\t\t\ttoastr.warning 'No se pudo encontrar nada.', 'Problema'\n\t\t\t)\n\n\t$scope.sin_repetir = (respuesta)->\n\t\tres = []\n\t\tfor acudi in respuesta\n\t\t\t$scope.existe = false\n\n\t\t\tparientes = if alumno.subGridOptions then alumno.subGridOptions.data else alumno.parientes\n\t\t\tfor pariente in parientes\n\t\t\t\tif pariente.id == acudi.id\n\t\t\t\t\t$scope.existe = true\n\n\t\t\tif !$scope.existe\n\t\t\t\tres.push acudi\n\n\t\t$scope.acudientes = res\n\n\n\t$scope.paisNacSelect = ($item, $model)->\n\t\t$http.get(\"::ciudades/departamentos/\"+$item.id).then((r)->\n\t\t\t$scope.departamentosNac = r.data\n\t\t)\n\n\t$scope.departNacSelect = ($item)->\n\t\t$http.get(\"::ciudades/por-departamento/\"+$item.departamento).then((r)->\n\t\t\t$scope.ciudadesNac = r.data\n\n\t\t\tif typeof $scope.acudiente.departamento_doc is 'undefined'\n\t\t\t\t$scope.acudiente.departamento_doc = $item\n\t\t\t\t$scope.departSeleccionado($item)\n\t\t)\n\n\t$scope.paisSelecionado = ($item, $model)->\n\n\t\t$http.get(\"::ciudades/departamentos/\"+$item.id).then((r)->\n\t\t\t$scope.departamentos = r.data\n\n\t\t\tif typeof $scope.acudiente.pais_nac is 'undefined'\n\t\t\t\tfor un_pais in $scope.paises\n\t\t\t\t\tif un_pais.id == $item.id\n\t\t\t\t\t\t$scope.acudiente.pais_nac = un_pais\n\t\t\t\t\t\t$scope.paisNacSelect(un_pais)\n\t\t)\n\n\t$scope.departSeleccionado = ($item)->\n\t\t$http.get(\"::ciudades/por-departamento/\"+$item.departamento).then((r)->\n\t\t\t$scope.ciudades = r.data\n\t\t)\n\n\t$scope.dateOptions =\n\t\tformatYear: 'yy'\n\n\n\t$scope.restarEstrato = ()->\n\t\tif $scope.alumno.estrato > 0\n\t\t\t$scope.alumno.estrato = $scope.alumno.estrato - 1\n\t$scope.sumarEstrato = ()->\n\t\tif $scope.alumno.estrato < 10\n\t\t\t$scope.alumno.estrato = $scope.alumno.estrato + 1\n\n\n\t$scope.crearAcudiente = ()->\n\n\t\t$scope.acudiente.alumno_id = alumno.alumno_id\n\n\t\t$http.post('::acudientes/crear', $scope.acudiente ).then((r)->\n\t\t\ttoastr.success 'Acudiente creado con éxito.'\n\t\t\t$modalInstance.close(r.data)\n\t\t, (r2)->\n\t\t\ttoastr.warning 'No se pudo crear al alumno.', 'Problema'\n\t\t)\n\n\n\t$scope.seleccionarAcudiente = ()->\n\t\tdatos = { acudiente_id: $scope.datos.acudiente.id, alumno_id: alumno.alumno_id, parentesco: $scope.acudiente.parentesco.parentesco, ocupacion: $scope.acudiente.ocupacion }\n\n\t\tif $rootScope.acudiente_cambiar\n\t\t\tdatos.parentesco_acudiente_cambiar_id = $rootScope.acudiente_cambiar.parentesco_id\n\n\t\t$http.put('::acudientes/seleccionar-parentesco', datos ).then((r)->\n\t\t\ttoastr.success 'Acudiente seleccionado.'\n\t\t\tdelete $rootScope.acudiente_cambiar\n\t\t\t$modalInstance.close(r.data)\n\t\t, (r2)->\n\t\t\ttoastr.warning 'No se pudo seleccionar.', 'Problema'\n\t\t)\n\n\n\t$scope.ocupacionCheck = (texto)->\n\t\t$scope.verificandoOcupacion = true\n\t\treturn $http.put('::acudientes/ocupaciones-check', {texto: texto}).then((r)->\n\t\t\t$scope.ocupaciones_match \t\t= r.data.ocupaciones\n\t\t\t$scope.verificandoOcupacion \t= false\n\t\t\treturn $scope.ocupaciones_match.map((item)->\n\t\t\t\treturn item.ocupacion\n\t\t\t)\n\t\t)\n\n])\n"
  ]
}